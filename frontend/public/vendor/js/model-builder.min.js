/*! template 2016-09-22 */
require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(){if(i.length)throw i.shift()}function e(a){var b;b=h.length?h.pop():new f,b.task=a,g(b)}function f(){this.task=null}var g=a("./raw"),h=[],i=[],j=g.makeRequestCallFromTimer(d);b.exports=e,f.prototype.call=function(){try{this.task.call()}catch(a){e.onerror?e.onerror(a):(i.push(a),j())}finally{this.task=null,h[h.length]=this}}},{"./raw":2}],2:[function(a,b,c){(function(a){"use strict";function c(a){h.length||(g(),i=!0),h[h.length]=a}function d(){for(;j<h.length;){var a=j;if(j+=1,h[a].call(),j>k){for(var b=0,c=h.length-j;c>b;b++)h[b]=h[b+j];h.length-=j,j=0}}h.length=0,j=0,i=!1}function e(a){var b=1,c=new l(a),d=document.createTextNode("");return c.observe(d,{characterData:!0}),function(){b=-b,d.data=b}}function f(a){return function(){function b(){clearTimeout(c),clearInterval(d),a()}var c=setTimeout(b,0),d=setInterval(b,50)}}b.exports=c;var g,h=[],i=!1,j=0,k=1024,l=a.MutationObserver||a.WebKitMutationObserver;g="function"==typeof l?e(d):f(d),c.requestFlush=g,c.makeRequestCallFromTimer=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(a,b,c){var d=a("./core/core.js")();a("./core/core.helpers")(d),a("./core/core.element")(d),a("./core/core.animation")(d),a("./core/core.controller")(d),a("./core/core.datasetController")(d),a("./core/core.layoutService")(d),a("./core/core.scaleService")(d),a("./core/core.plugin.js")(d),a("./core/core.scale")(d),a("./core/core.title")(d),a("./core/core.legend")(d),a("./core/core.tooltip")(d),a("./elements/element.arc")(d),a("./elements/element.line")(d),a("./elements/element.point")(d),a("./elements/element.rectangle")(d),a("./scales/scale.linearbase.js")(d),a("./scales/scale.category")(d),a("./scales/scale.linear")(d),a("./scales/scale.logarithmic")(d),a("./scales/scale.radialLinear")(d),a("./scales/scale.time")(d),a("./controllers/controller.bar")(d),a("./controllers/controller.bubble")(d),a("./controllers/controller.doughnut")(d),a("./controllers/controller.line")(d),a("./controllers/controller.polarArea")(d),a("./controllers/controller.radar")(d),a("./charts/Chart.Bar")(d),a("./charts/Chart.Bubble")(d),a("./charts/Chart.Doughnut")(d),a("./charts/Chart.Line")(d),a("./charts/Chart.PolarArea")(d),a("./charts/Chart.Radar")(d),a("./charts/Chart.Scatter")(d),window.Chart=b.exports=d},{"./charts/Chart.Bar":4,"./charts/Chart.Bubble":5,"./charts/Chart.Doughnut":6,"./charts/Chart.Line":7,"./charts/Chart.PolarArea":8,"./charts/Chart.Radar":9,"./charts/Chart.Scatter":10,"./controllers/controller.bar":11,"./controllers/controller.bubble":12,"./controllers/controller.doughnut":13,"./controllers/controller.line":14,"./controllers/controller.polarArea":15,"./controllers/controller.radar":16,"./core/core.animation":17,"./core/core.controller":18,"./core/core.datasetController":19,"./core/core.element":20,"./core/core.helpers":21,"./core/core.js":22,"./core/core.layoutService":23,"./core/core.legend":24,"./core/core.plugin.js":25,"./core/core.scale":26,"./core/core.scaleService":27,"./core/core.title":28,"./core/core.tooltip":29,"./elements/element.arc":30,"./elements/element.line":31,"./elements/element.point":32,"./elements/element.rectangle":33,"./scales/scale.category":34,"./scales/scale.linear":35,"./scales/scale.linearbase.js":36,"./scales/scale.logarithmic":37,"./scales/scale.radialLinear":38,"./scales/scale.time":39}],4:[function(a,b,c){"use strict";b.exports=function(a){a.Bar=function(b,c){return c.type="bar",new a(b,c)}}},{}],5:[function(a,b,c){"use strict";b.exports=function(a){a.Bubble=function(b,c){return c.type="bubble",new a(b,c)}}},{}],6:[function(a,b,c){"use strict";b.exports=function(a){a.Doughnut=function(b,c){return c.type="doughnut",new a(b,c)}}},{}],7:[function(a,b,c){"use strict";b.exports=function(a){a.Line=function(b,c){return c.type="line",new a(b,c)}}},{}],8:[function(a,b,c){"use strict";b.exports=function(a){a.PolarArea=function(b,c){return c.type="polarArea",new a(b,c)}}},{}],9:[function(a,b,c){"use strict";b.exports=function(a){a.Radar=function(b,c){return c.options=a.helpers.configMerge({aspectRatio:1},c.options),c.type="radar",new a(b,c)}}},{}],10:[function(a,b,c){"use strict";b.exports=function(a){var b={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-1"}],yAxes:[{type:"linear",position:"left",id:"y-axis-1"}]},tooltips:{callbacks:{title:function(a,b){return""},label:function(a,b){return"("+a.xLabel+", "+a.yLabel+")"}}}};a.defaults.scatter=b,a.controllers.scatter=a.controllers.line,a.Scatter=function(b,c){return c.type="scatter",new a(b,c)}}},{}],11:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.defaults.bar={hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}},a.controllers.bar=a.DatasetController.extend({dataElementType:a.elements.Rectangle,initialize:function(b,c){a.DatasetController.prototype.initialize.call(this,b,c),this.getMeta().bar=!0},getBarCount:function(){var a=this,c=0;return b.each(a.chart.data.datasets,function(b,d){var e=a.chart.getDatasetMeta(d);e.bar&&a.chart.isDatasetVisible(d)&&++c},a),c},update:function(a){var c=this;b.each(c.getMeta().data,function(b,d){c.updateElement(b,d,a)},c)},updateElement:function(a,c,d){var e=this,f=e.getMeta(),g=e.getScaleForId(f.xAxisID),h=e.getScaleForId(f.yAxisID),i=h.getBasePixel(),j=e.chart.options.elements.rectangle,k=a.custom||{},l=e.getDataset();b.extend(a,{_xScale:g,_yScale:h,_datasetIndex:e.index,_index:c,_model:{x:e.calculateBarX(c,e.index),y:d?i:e.calculateBarY(c,e.index),label:e.chart.data.labels[c],datasetLabel:l.label,base:d?i:e.calculateBarBase(e.index,c),width:e.calculateBarWidth(c),backgroundColor:k.backgroundColor?k.backgroundColor:b.getValueAtIndexOrDefault(l.backgroundColor,c,j.backgroundColor),borderSkipped:k.borderSkipped?k.borderSkipped:j.borderSkipped,borderColor:k.borderColor?k.borderColor:b.getValueAtIndexOrDefault(l.borderColor,c,j.borderColor),borderWidth:k.borderWidth?k.borderWidth:b.getValueAtIndexOrDefault(l.borderWidth,c,j.borderWidth)}}),a.pivot()},calculateBarBase:function(a,b){var c=this,d=c.getMeta(),e=c.getScaleForId(d.yAxisID),f=0;if(e.options.stacked){var g=c.chart,h=g.data.datasets,i=h[a].data[b];if(0>i)for(var j=0;a>j;j++){var k=h[j],l=g.getDatasetMeta(j);l.bar&&l.yAxisID===e.id&&g.isDatasetVisible(j)&&(f+=k.data[b]<0?k.data[b]:0)}else for(var m=0;a>m;m++){var n=h[m],o=g.getDatasetMeta(m);o.bar&&o.yAxisID===e.id&&g.isDatasetVisible(m)&&(f+=n.data[b]>0?n.data[b]:0)}return e.getPixelForValue(f)}return e.getBasePixel()},getRuler:function(a){var b,c=this,d=c.getMeta(),e=c.getScaleForId(d.xAxisID),f=c.getBarCount();b="category"===e.options.type?e.getPixelForTick(a+1)-e.getPixelForTick(a):e.width/e.ticks.length;var g=b*e.options.categoryPercentage,h=(b-b*e.options.categoryPercentage)/2,i=g/f;if(e.ticks.length!==c.chart.data.labels.length){var j=e.ticks.length/c.chart.data.labels.length;i*=j}var k=i*e.options.barPercentage,l=i-i*e.options.barPercentage;return{datasetCount:f,tickWidth:b,categoryWidth:g,categorySpacing:h,fullBarWidth:i,barWidth:k,barSpacing:l}},calculateBarWidth:function(a){var b=this.getScaleForId(this.getMeta().xAxisID),c=this.getRuler(a);return b.options.stacked?c.categoryWidth:c.barWidth},getBarIndex:function(a){var b,c,d=0;for(c=0;a>c;++c)b=this.chart.getDatasetMeta(c),b.bar&&this.chart.isDatasetVisible(c)&&++d;return d},calculateBarX:function(a,b){var c=this,d=c.getMeta(),e=c.getScaleForId(d.xAxisID),f=c.getBarIndex(b),g=c.getRuler(a),h=e.getPixelForValue(null,a,b,c.chart.isCombo);return h-=c.chart.isCombo?g.tickWidth/2:0,e.options.stacked?h+g.categoryWidth/2+g.categorySpacing:h+g.barWidth/2+g.categorySpacing+g.barWidth*f+g.barSpacing/2+g.barSpacing*f},calculateBarY:function(a,b){var c=this,d=c.getMeta(),e=c.getScaleForId(d.yAxisID),f=c.getDataset().data[a];if(e.options.stacked){for(var g=0,h=0,i=0;b>i;i++){var j=c.chart.data.datasets[i],k=c.chart.getDatasetMeta(i);k.bar&&k.yAxisID===e.id&&c.chart.isDatasetVisible(i)&&(j.data[a]<0?h+=j.data[a]||0:g+=j.data[a]||0)}return 0>f?e.getPixelForValue(h+f):e.getPixelForValue(g+f)}return e.getPixelForValue(f)},draw:function(a){var c=this,d=a||1;b.each(c.getMeta().data,function(a,b){var e=c.getDataset().data[b];null===e||void 0===e||isNaN(e)||a.transition(d).draw()},c)},setHoverStyle:function(a){var c=this.chart.data.datasets[a._datasetIndex],d=a._index,e=a.custom||{},f=a._model;f.backgroundColor=e.hoverBackgroundColor?e.hoverBackgroundColor:b.getValueAtIndexOrDefault(c.hoverBackgroundColor,d,b.getHoverColor(f.backgroundColor)),f.borderColor=e.hoverBorderColor?e.hoverBorderColor:b.getValueAtIndexOrDefault(c.hoverBorderColor,d,b.getHoverColor(f.borderColor)),f.borderWidth=e.hoverBorderWidth?e.hoverBorderWidth:b.getValueAtIndexOrDefault(c.hoverBorderWidth,d,f.borderWidth)},removeHoverStyle:function(a){var c=this.chart.data.datasets[a._datasetIndex],d=a._index,e=a.custom||{},f=a._model,g=this.chart.options.elements.rectangle;f.backgroundColor=e.backgroundColor?e.backgroundColor:b.getValueAtIndexOrDefault(c.backgroundColor,d,g.backgroundColor),f.borderColor=e.borderColor?e.borderColor:b.getValueAtIndexOrDefault(c.borderColor,d,g.borderColor),f.borderWidth=e.borderWidth?e.borderWidth:b.getValueAtIndexOrDefault(c.borderWidth,d,g.borderWidth)}}),a.defaults.horizontalBar={hover:{mode:"label"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{position:"left",type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{callbacks:{title:function(a,b){var c="";return a.length>0&&(a[0].yLabel?c=a[0].yLabel:b.labels.length>0&&a[0].index<b.labels.length&&(c=b.labels[a[0].index])),c},label:function(a,b){var c=b.datasets[a.datasetIndex].label||"";return c+": "+a.xLabel}}}},a.controllers.horizontalBar=a.controllers.bar.extend({updateElement:function(a,c,d,e){var f=this,g=f.getMeta(),h=f.getScaleForId(g.xAxisID),i=f.getScaleForId(g.yAxisID),j=h.getBasePixel(),k=a.custom||{},l=f.getDataset(),m=f.chart.options.elements.rectangle;b.extend(a,{_xScale:h,_yScale:i,_datasetIndex:f.index,_index:c,_model:{x:d?j:f.calculateBarX(c,f.index),y:f.calculateBarY(c,f.index),label:f.chart.data.labels[c],datasetLabel:l.label,base:d?j:f.calculateBarBase(f.index,c),height:f.calculateBarHeight(c),backgroundColor:k.backgroundColor?k.backgroundColor:b.getValueAtIndexOrDefault(l.backgroundColor,c,m.backgroundColor),borderSkipped:k.borderSkipped?k.borderSkipped:m.borderSkipped,borderColor:k.borderColor?k.borderColor:b.getValueAtIndexOrDefault(l.borderColor,c,m.borderColor),borderWidth:k.borderWidth?k.borderWidth:b.getValueAtIndexOrDefault(l.borderWidth,c,m.borderWidth)},draw:function(){function a(a){return i[(k+a)%4]}var b=this._chart.ctx,c=this._view,d=c.height/2,e=c.y-d,f=c.y+d,g=c.base-(c.base-c.x),h=c.borderWidth/2;c.borderWidth&&(e+=h,f-=h,g+=h),b.beginPath(),b.fillStyle=c.backgroundColor,b.strokeStyle=c.borderColor,b.lineWidth=c.borderWidth;var i=[[c.base,f],[c.base,e],[g,e],[g,f]],j=["bottom","left","top","right"],k=j.indexOf(c.borderSkipped,0);-1===k&&(k=0),b.moveTo.apply(b,a(0));for(var l=1;4>l;l++)b.lineTo.apply(b,a(l));b.fill(),c.borderWidth&&b.stroke()},inRange:function(a,b){var c=this._view,d=!1;return c&&(d=c.x<c.base?b>=c.y-c.height/2&&b<=c.y+c.height/2&&a>=c.x&&a<=c.base:b>=c.y-c.height/2&&b<=c.y+c.height/2&&a>=c.base&&a<=c.x),d}}),a.pivot()},calculateBarBase:function(a,b){var c=this,d=c.getMeta(),e=c.getScaleForId(d.xAxisID),f=0;if(e.options.stacked){var g=c.chart.data.datasets[a].data[b];if(0>g)for(var h=0;a>h;h++){var i=c.chart.data.datasets[h],j=c.chart.getDatasetMeta(h);j.bar&&j.xAxisID===e.id&&c.chart.isDatasetVisible(h)&&(f+=i.data[b]<0?i.data[b]:0)}else for(var k=0;a>k;k++){var l=c.chart.data.datasets[k],m=c.chart.getDatasetMeta(k);m.bar&&m.xAxisID===e.id&&c.chart.isDatasetVisible(k)&&(f+=l.data[b]>0?l.data[b]:0)}return e.getPixelForValue(f)}return e.getBasePixel()},getRuler:function(a){var b,c=this,d=c.getMeta(),e=c.getScaleForId(d.yAxisID),f=c.getBarCount();b="category"===e.options.type?e.getPixelForTick(a+1)-e.getPixelForTick(a):e.width/e.ticks.length;var g=b*e.options.categoryPercentage,h=(b-b*e.options.categoryPercentage)/2,i=g/f;if(e.ticks.length!==c.chart.data.labels.length){var j=e.ticks.length/c.chart.data.labels.length;i*=j}var k=i*e.options.barPercentage,l=i-i*e.options.barPercentage;return{datasetCount:f,tickHeight:b,categoryHeight:g,categorySpacing:h,fullBarHeight:i,barHeight:k,barSpacing:l}},calculateBarHeight:function(a){var b=this,c=b.getScaleForId(b.getMeta().yAxisID),d=b.getRuler(a);return c.options.stacked?d.categoryHeight:d.barHeight},calculateBarX:function(a,b){var c=this,d=c.getMeta(),e=c.getScaleForId(d.xAxisID),f=c.getDataset().data[a];if(e.options.stacked){for(var g=0,h=0,i=0;b>i;i++){var j=c.chart.data.datasets[i],k=c.chart.getDatasetMeta(i);k.bar&&k.xAxisID===e.id&&c.chart.isDatasetVisible(i)&&(j.data[a]<0?h+=j.data[a]||0:g+=j.data[a]||0)}return 0>f?e.getPixelForValue(h+f):e.getPixelForValue(g+f)}return e.getPixelForValue(f)},calculateBarY:function(a,b){var c=this,d=c.getMeta(),e=c.getScaleForId(d.yAxisID),f=c.getBarIndex(b),g=c.getRuler(a),h=e.getPixelForValue(null,a,b,c.chart.isCombo);return h-=c.chart.isCombo?g.tickHeight/2:0,e.options.stacked?h+g.categoryHeight/2+g.categorySpacing:h+g.barHeight/2+g.categorySpacing+g.barHeight*f+g.barSpacing/2+g.barSpacing*f}})}},{}],12:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.defaults.bubble={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(a,b){return""},label:function(a,b){var c=b.datasets[a.datasetIndex].label||"",d=b.datasets[a.datasetIndex].data[a.index];return c+": ("+d.x+", "+d.y+", "+d.r+")"}}}},a.controllers.bubble=a.DatasetController.extend({dataElementType:a.elements.Point,update:function(a){var c=this,d=c.getMeta(),e=d.data;b.each(e,function(b,d){c.updateElement(b,d,a)})},updateElement:function(c,d,e){var f=this,g=f.getMeta(),h=f.getScaleForId(g.xAxisID),i=f.getScaleForId(g.yAxisID),j=c.custom||{},k=f.getDataset(),l=k.data[d],m=f.chart.options.elements.point,n=f.index;b.extend(c,{_xScale:h,_yScale:i,_datasetIndex:n,_index:d,_model:{x:e?h.getPixelForDecimal(.5):h.getPixelForValue(l,d,n,f.chart.isCombo),y:e?i.getBasePixel():i.getPixelForValue(l,d,n),radius:e?0:j.radius?j.radius:f.getRadius(l),hitRadius:j.hitRadius?j.hitRadius:b.getValueAtIndexOrDefault(k.hitRadius,d,m.hitRadius)}}),a.DatasetController.prototype.removeHoverStyle.call(f,c,m);var o=c._model;o.skip=j.skip?j.skip:isNaN(o.x)||isNaN(o.y),c.pivot()},getRadius:function(a){return a.r||this.chart.options.elements.point.radius},setHoverStyle:function(c){var d=this;a.DatasetController.prototype.setHoverStyle.call(d,c);var e=d.chart.data.datasets[c._datasetIndex],f=c._index,g=c.custom||{},h=c._model;h.radius=g.hoverRadius?g.hoverRadius:b.getValueAtIndexOrDefault(e.hoverRadius,f,d.chart.options.elements.point.hoverRadius)+d.getRadius(e.data[f])},removeHoverStyle:function(b){var c=this;a.DatasetController.prototype.removeHoverStyle.call(c,b,c.chart.options.elements.point);var d=c.chart.data.datasets[b._datasetIndex].data[b._index],e=b.custom||{},f=b._model;f.radius=e.radius?e.radius:c.getRadius(d)}})}},{}],13:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c=a.defaults;c.doughnut={animation:{animateRotate:!0,animateScale:!1},aspectRatio:1,hover:{mode:"single"},legendCallback:function(a){var b=[];b.push('<ul class="'+a.id+'-legend">');var c=a.data,d=c.datasets,e=c.labels;if(d.length)for(var f=0;f<d[0].data.length;++f)b.push('<li><span style="background-color:'+d[0].backgroundColor[f]+'"></span>'),e[f]&&b.push(e[f]),b.push("</li>");return b.push("</ul>"),b.join("")},legend:{labels:{generateLabels:function(a){var c=a.data;return c.labels.length&&c.datasets.length?c.labels.map(function(d,e){var f=a.getDatasetMeta(0),g=c.datasets[0],h=f.data[e],i=h.custom||{},j=b.getValueAtIndexOrDefault,k=a.options.elements.arc,l=i.backgroundColor?i.backgroundColor:j(g.backgroundColor,e,k.backgroundColor),m=i.borderColor?i.borderColor:j(g.borderColor,e,k.borderColor),n=i.borderWidth?i.borderWidth:j(g.borderWidth,e,k.borderWidth);return{text:d,fillStyle:l,strokeStyle:m,lineWidth:n,hidden:isNaN(g.data[e])||f.data[e].hidden,index:e}}):[]}},onClick:function(a,b){var c,d,e,f=b.index,g=this.chart;for(c=0,d=(g.data.datasets||[]).length;d>c;++c)e=g.getDatasetMeta(c),e.data[f].hidden=!e.data[f].hidden;g.update()}},cutoutPercentage:50,rotation:Math.PI*-.5,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(a,b){return b.labels[a.index]+": "+b.datasets[a.datasetIndex].data[a.index]}}}},c.pie=b.clone(c.doughnut),b.extend(c.pie,{cutoutPercentage:0}),a.controllers.doughnut=a.controllers.pie=a.DatasetController.extend({dataElementType:a.elements.Arc,linkScales:b.noop,getRingIndex:function(a){for(var b=0,c=0;a>c;++c)this.chart.isDatasetVisible(c)&&++b;return b},update:function(a){var c=this,d=c.chart,e=d.chartArea,f=d.options,g=f.elements.arc,h=e.right-e.left-g.borderWidth,i=e.bottom-e.top-g.borderWidth,j=Math.min(h,i),k={x:0,y:0},l=c.getMeta(),m=f.cutoutPercentage,n=f.circumference;if(n<2*Math.PI){var o=f.rotation%(2*Math.PI);o+=2*Math.PI*(o>=Math.PI?-1:o<-Math.PI?1:0);var p=o+n,q={x:Math.cos(o),y:Math.sin(o)},r={x:Math.cos(p),y:Math.sin(p)},s=0>=o&&p>=0||o<=2*Math.PI&&2*Math.PI<=p,t=o<=.5*Math.PI&&.5*Math.PI<=p||o<=2.5*Math.PI&&2.5*Math.PI<=p,u=o<=-Math.PI&&-Math.PI<=p||o<=Math.PI&&Math.PI<=p,v=o<=.5*-Math.PI&&.5*-Math.PI<=p||o<=1.5*Math.PI&&1.5*Math.PI<=p,w=m/100,x={x:u?-1:Math.min(q.x*(q.x<0?1:w),r.x*(r.x<0?1:w)),y:v?-1:Math.min(q.y*(q.y<0?1:w),r.y*(r.y<0?1:w))},y={x:s?1:Math.max(q.x*(q.x>0?1:w),r.x*(r.x>0?1:w)),y:t?1:Math.max(q.y*(q.y>0?1:w),r.y*(r.y>0?1:w))},z={width:.5*(y.x-x.x),height:.5*(y.y-x.y)};j=Math.min(h/z.width,i/z.height),k={x:(y.x+x.x)*-.5,y:(y.y+x.y)*-.5}}d.outerRadius=Math.max(j/2,0),d.innerRadius=Math.max(m?d.outerRadius/100*m:1,0),d.radiusLength=(d.outerRadius-d.innerRadius)/d.getVisibleDatasetCount(),d.offsetX=k.x*d.outerRadius,d.offsetY=k.y*d.outerRadius,l.total=c.calculateTotal(),c.outerRadius=d.outerRadius-d.radiusLength*c.getRingIndex(c.index),c.innerRadius=c.outerRadius-d.radiusLength,b.each(l.data,function(b,d){c.updateElement(b,d,a)})},updateElement:function(a,c,d){var e=this,f=e.chart,g=f.chartArea,h=f.options,i=h.animation,j=(h.elements.arc,(g.left+g.right)/2),k=(g.top+g.bottom)/2,l=h.rotation,m=h.rotation,n=e.getDataset(),o=d&&i.animateRotate?0:a.hidden?0:e.calculateCircumference(n.data[c])*(h.circumference/(2*Math.PI)),p=d&&i.animateScale?0:e.innerRadius,q=d&&i.animateScale?0:e.outerRadius,r=(a.custom||{},b.getValueAtIndexOrDefault);b.extend(a,{_datasetIndex:e.index,_index:c,_model:{x:j+f.offsetX,y:k+f.offsetY,startAngle:l,endAngle:m,circumference:o,outerRadius:q,innerRadius:p,label:r(n.label,c,f.data.labels[c])}});var s=a._model;this.removeHoverStyle(a),d&&i.animateRotate||(0===c?s.startAngle=h.rotation:s.startAngle=e.getMeta().data[c-1]._model.endAngle,s.endAngle=s.startAngle+s.circumference),a.pivot()},removeHoverStyle:function(b){a.DatasetController.prototype.removeHoverStyle.call(this,b,this.chart.options.elements.arc)},calculateTotal:function(){var a,c=this.getDataset(),d=this.getMeta(),e=0;return b.each(d.data,function(b,d){a=c.data[d],isNaN(a)||b.hidden||(e+=Math.abs(a))}),e},calculateCircumference:function(a){var b=this.getMeta().total;return b>0&&!isNaN(a)?2*Math.PI*(a/b):0}})}},{}],14:[function(a,b,c){"use strict";b.exports=function(a){function b(a,b){return c.getValueOrDefault(a.showLine,b.showLines)}var c=a.helpers;a.defaults.line={showLines:!0,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}},a.controllers.line=a.DatasetController.extend({datasetElementType:a.elements.Line,dataElementType:a.elements.Point,addElementAndReset:function(c){var d=this,e=d.chart.options,f=d.getMeta();a.DatasetController.prototype.addElementAndReset.call(d,c),b(d.getDataset(),e)&&0!==f.dataset._model.tension&&d.updateBezierControlPoints()},update:function(a){var d,e,f,g=this,h=g.getMeta(),i=h.dataset,j=h.data||[],k=g.chart.options,l=k.elements.line,m=g.getScaleForId(h.yAxisID),n=g.getDataset(),o=b(n,k);for(o&&(f=i.custom||{},void 0!==n.tension&&void 0===n.lineTension&&(n.lineTension=n.tension),i._scale=m,i._datasetIndex=g.index,i._children=j,i._model={spanGaps:n.spanGaps?n.spanGaps:!1,tension:f.tension?f.tension:c.getValueOrDefault(n.lineTension,l.tension),backgroundColor:f.backgroundColor?f.backgroundColor:n.backgroundColor||l.backgroundColor,borderWidth:f.borderWidth?f.borderWidth:n.borderWidth||l.borderWidth,borderColor:f.borderColor?f.borderColor:n.borderColor||l.borderColor,borderCapStyle:f.borderCapStyle?f.borderCapStyle:n.borderCapStyle||l.borderCapStyle,borderDash:f.borderDash?f.borderDash:n.borderDash||l.borderDash,borderDashOffset:f.borderDashOffset?f.borderDashOffset:n.borderDashOffset||l.borderDashOffset,borderJoinStyle:f.borderJoinStyle?f.borderJoinStyle:n.borderJoinStyle||l.borderJoinStyle,fill:f.fill?f.fill:void 0!==n.fill?n.fill:l.fill,scaleTop:m.top,scaleBottom:m.bottom,scaleZero:m.getBasePixel()},i.pivot()),d=0,e=j.length;e>d;++d)g.updateElement(j[d],d,a);for(o&&0!==i._model.tension&&g.updateBezierControlPoints(),d=0,e=j.length;e>d;++d)j[d].pivot()},getPointBackgroundColor:function(a,b){var d=this.chart.options.elements.point.backgroundColor,e=this.getDataset(),f=a.custom||{};return f.backgroundColor?d=f.backgroundColor:e.pointBackgroundColor?d=c.getValueAtIndexOrDefault(e.pointBackgroundColor,b,d):e.backgroundColor&&(d=e.backgroundColor),d},getPointBorderColor:function(a,b){var d=this.chart.options.elements.point.borderColor,e=this.getDataset(),f=a.custom||{};return f.borderColor?d=f.borderColor:e.pointBorderColor?d=c.getValueAtIndexOrDefault(e.pointBorderColor,b,d):e.borderColor&&(d=e.borderColor),d},getPointBorderWidth:function(a,b){var d=this.chart.options.elements.point.borderWidth,e=this.getDataset(),f=a.custom||{};return f.borderWidth?d=f.borderWidth:e.pointBorderWidth?d=c.getValueAtIndexOrDefault(e.pointBorderWidth,b,d):e.borderWidth&&(d=e.borderWidth),d},updateElement:function(a,b,d){var e,f,g=this,h=g.getMeta(),i=a.custom||{},j=g.getDataset(),k=g.index,l=j.data[b],m=g.getScaleForId(h.yAxisID),n=g.getScaleForId(h.xAxisID),o=g.chart.options.elements.point;void 0!==j.radius&&void 0===j.pointRadius&&(j.pointRadius=j.radius),void 0!==j.hitRadius&&void 0===j.pointHitRadius&&(j.pointHitRadius=j.hitRadius),e=n.getPixelForValue(l,b,k,g.chart.isCombo),f=d?m.getBasePixel():g.calculatePointY(l,b,k,g.chart.isCombo),a._xScale=n,a._yScale=m,a._datasetIndex=k,a._index=b,a._model={x:e,y:f,skip:i.skip||isNaN(e)||isNaN(f),radius:i.radius||c.getValueAtIndexOrDefault(j.pointRadius,b,o.radius),pointStyle:i.pointStyle||c.getValueAtIndexOrDefault(j.pointStyle,b,o.pointStyle),backgroundColor:g.getPointBackgroundColor(a,b),borderColor:g.getPointBorderColor(a,b),borderWidth:g.getPointBorderWidth(a,b),tension:h.dataset._model?h.dataset._model.tension:0,hitRadius:i.hitRadius||c.getValueAtIndexOrDefault(j.pointHitRadius,b,o.hitRadius)}},calculatePointY:function(a,b,c,d){var e,f,g,h=this,i=h.chart,j=h.getMeta(),k=h.getScaleForId(j.yAxisID),l=0,m=0;if(k.options.stacked){for(e=0;c>e;e++)f=i.data.datasets[e],g=i.getDatasetMeta(e),"line"===g.type&&i.isDatasetVisible(e)&&(f.data[b]<0?m+=f.data[b]||0:l+=f.data[b]||0);return 0>a?k.getPixelForValue(m+a):k.getPixelForValue(l+a)}return k.getPixelForValue(a)},updateBezierControlPoints:function(){var a,b,d,e,f,g=this.getMeta(),h=(this.chart.chartArea,g.data||[]);for(a=0,b=h.length;b>a;++a)d=h[a],e=d._model,f=c.splineCurve(c.previousItem(h,a)._model,e,c.nextItem(h,a)._model,g.dataset._model.tension),e.controlPointPreviousX=f.previous.x,e.controlPointPreviousY=f.previous.y,e.controlPointNextX=f.next.x,e.controlPointNextY=f.next.y},draw:function(a){var c,d,e=this,f=e.getMeta(),g=f.data||[],h=a||1;for(c=0,d=g.length;d>c;++c)g[c].transition(h);for(b(e.getDataset(),e.chart.options)&&f.dataset.transition(h).draw(),c=0,d=g.length;d>c;++c)g[c].draw()},setHoverStyle:function(a){var b=this.chart.data.datasets[a._datasetIndex],d=a._index,e=a.custom||{},f=a._model;f.radius=e.hoverRadius||c.getValueAtIndexOrDefault(b.pointHoverRadius,d,this.chart.options.elements.point.hoverRadius),f.backgroundColor=e.hoverBackgroundColor||c.getValueAtIndexOrDefault(b.pointHoverBackgroundColor,d,c.getHoverColor(f.backgroundColor)),f.borderColor=e.hoverBorderColor||c.getValueAtIndexOrDefault(b.pointHoverBorderColor,d,c.getHoverColor(f.borderColor)),f.borderWidth=e.hoverBorderWidth||c.getValueAtIndexOrDefault(b.pointHoverBorderWidth,d,f.borderWidth)},removeHoverStyle:function(a){var b=this,d=b.chart.data.datasets[a._datasetIndex],e=a._index,f=a.custom||{},g=a._model;void 0!==d.radius&&void 0===d.pointRadius&&(d.pointRadius=d.radius),g.radius=f.radius||c.getValueAtIndexOrDefault(d.pointRadius,e,b.chart.options.elements.point.radius),g.backgroundColor=b.getPointBackgroundColor(a,e),g.borderColor=b.getPointBorderColor(a,e),g.borderWidth=b.getPointBorderWidth(a,e)}})}},{}],15:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.defaults.polarArea={scale:{type:"radialLinear",lineArc:!0},animation:{animateRotate:!0,animateScale:!0},aspectRatio:1,legendCallback:function(a){var b=[];b.push('<ul class="'+a.id+'-legend">');var c=a.data,d=c.datasets,e=c.labels;if(d.length)for(var f=0;f<d[0].data.length;++f)b.push('<li><span style="background-color:'+d[0].backgroundColor[f]+'">'),e[f]&&b.push(e[f]),b.push("</span></li>");return b.push("</ul>"),b.join("")},legend:{labels:{generateLabels:function(a){var c=a.data;return c.labels.length&&c.datasets.length?c.labels.map(function(d,e){var f=a.getDatasetMeta(0),g=c.datasets[0],h=f.data[e],i=h.custom||{},j=b.getValueAtIndexOrDefault,k=a.options.elements.arc,l=i.backgroundColor?i.backgroundColor:j(g.backgroundColor,e,k.backgroundColor),m=i.borderColor?i.borderColor:j(g.borderColor,e,k.borderColor),n=i.borderWidth?i.borderWidth:j(g.borderWidth,e,k.borderWidth);return{text:d,fillStyle:l,strokeStyle:m,lineWidth:n,hidden:isNaN(g.data[e])||f.data[e].hidden,index:e}}):[]}},onClick:function(a,b){var c,d,e,f=b.index,g=this.chart;for(c=0,d=(g.data.datasets||[]).length;d>c;++c)e=g.getDatasetMeta(c),e.data[f].hidden=!e.data[f].hidden;g.update()}},tooltips:{callbacks:{title:function(){return""},label:function(a,b){return b.labels[a.index]+": "+a.yLabel}}}},a.controllers.polarArea=a.DatasetController.extend({dataElementType:a.elements.Arc,linkScales:b.noop,update:function(a){var c=this,d=c.chart,e=d.chartArea,f=c.getMeta(),g=d.options,h=g.elements.arc,i=Math.min(e.right-e.left,e.bottom-e.top);d.outerRadius=Math.max((i-h.borderWidth/2)/2,0),d.innerRadius=Math.max(g.cutoutPercentage?d.outerRadius/100*g.cutoutPercentage:1,0),d.radiusLength=(d.outerRadius-d.innerRadius)/d.getVisibleDatasetCount(),c.outerRadius=d.outerRadius-d.radiusLength*c.index,c.innerRadius=c.outerRadius-d.radiusLength,f.count=c.countVisibleElements(),b.each(f.data,function(b,d){c.updateElement(b,d,a)})},updateElement:function(a,c,d){for(var e=this,f=e.chart,g=f.chartArea,h=e.getDataset(),i=f.options,j=i.animation,k=(i.elements.arc,a.custom||{},f.scale),l=b.getValueAtIndexOrDefault,m=f.data.labels,n=e.calculateCircumference(h.data[c]),o=(g.left+g.right)/2,p=(g.top+g.bottom)/2,q=0,r=e.getMeta(),s=0;c>s;++s)isNaN(h.data[s])||r.data[s].hidden||++q;var t=-.5*Math.PI,u=a.hidden?0:k.getDistanceFromCenterForValue(h.data[c]),v=t+n*q,w=v+(a.hidden?0:n),x=j.animateScale?0:k.getDistanceFromCenterForValue(h.data[c]);b.extend(a,{_datasetIndex:e.index,_index:c,_scale:k,_model:{x:o,y:p,innerRadius:0,outerRadius:d?x:u,startAngle:d&&j.animateRotate?t:v,endAngle:d&&j.animateRotate?t:w,label:l(m,c,m[c])}}),e.removeHoverStyle(a),a.pivot()},removeHoverStyle:function(b){a.DatasetController.prototype.removeHoverStyle.call(this,b,this.chart.options.elements.arc)},countVisibleElements:function(){var a=this.getDataset(),c=this.getMeta(),d=0;return b.each(c.data,function(b,c){isNaN(a.data[c])||b.hidden||d++}),d},calculateCircumference:function(a){var b=this.getMeta().count;return b>0&&!isNaN(a)?2*Math.PI/b:0}})}},{}],16:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.defaults.radar={scale:{type:"radialLinear"},elements:{line:{tension:0}}},a.controllers.radar=a.DatasetController.extend({datasetElementType:a.elements.Line,dataElementType:a.elements.Point,linkScales:b.noop,addElementAndReset:function(b){a.DatasetController.prototype.addElementAndReset.call(this,b),this.updateBezierControlPoints()},update:function(a){var c=this,d=c.getMeta(),e=d.dataset,f=d.data,g=e.custom||{},h=c.getDataset(),i=c.chart.options.elements.line,j=c.chart.scale;void 0!==h.tension&&void 0===h.lineTension&&(h.lineTension=h.tension),b.extend(d.dataset,{_datasetIndex:c.index,_children:f,_loop:!0,_model:{tension:g.tension?g.tension:b.getValueOrDefault(h.lineTension,i.tension),backgroundColor:g.backgroundColor?g.backgroundColor:h.backgroundColor||i.backgroundColor,borderWidth:g.borderWidth?g.borderWidth:h.borderWidth||i.borderWidth,borderColor:g.borderColor?g.borderColor:h.borderColor||i.borderColor,fill:g.fill?g.fill:void 0!==h.fill?h.fill:i.fill,borderCapStyle:g.borderCapStyle?g.borderCapStyle:h.borderCapStyle||i.borderCapStyle,borderDash:g.borderDash?g.borderDash:h.borderDash||i.borderDash,borderDashOffset:g.borderDashOffset?g.borderDashOffset:h.borderDashOffset||i.borderDashOffset,borderJoinStyle:g.borderJoinStyle?g.borderJoinStyle:h.borderJoinStyle||i.borderJoinStyle,scaleTop:j.top,scaleBottom:j.bottom,scaleZero:j.getBasePosition()}}),d.dataset.pivot(),b.each(f,function(b,d){c.updateElement(b,d,a)},c),c.updateBezierControlPoints()},updateElement:function(a,c,d){var e=this,f=a.custom||{},g=e.getDataset(),h=e.chart.scale,i=e.chart.options.elements.point,j=h.getPointPositionForValue(c,g.data[c]);b.extend(a,{_datasetIndex:e.index,_index:c,_scale:h,_model:{x:d?h.xCenter:j.x,y:d?h.yCenter:j.y,tension:f.tension?f.tension:b.getValueOrDefault(g.tension,e.chart.options.elements.line.tension),radius:f.radius?f.radius:b.getValueAtIndexOrDefault(g.pointRadius,c,i.radius),backgroundColor:f.backgroundColor?f.backgroundColor:b.getValueAtIndexOrDefault(g.pointBackgroundColor,c,i.backgroundColor),borderColor:f.borderColor?f.borderColor:b.getValueAtIndexOrDefault(g.pointBorderColor,c,i.borderColor),borderWidth:f.borderWidth?f.borderWidth:b.getValueAtIndexOrDefault(g.pointBorderWidth,c,i.borderWidth),pointStyle:f.pointStyle?f.pointStyle:b.getValueAtIndexOrDefault(g.pointStyle,c,i.pointStyle),hitRadius:f.hitRadius?f.hitRadius:b.getValueAtIndexOrDefault(g.hitRadius,c,i.hitRadius)}}),a._model.skip=f.skip?f.skip:isNaN(a._model.x)||isNaN(a._model.y)},updateBezierControlPoints:function(){var a=this.chart.chartArea,c=this.getMeta();b.each(c.data,function(d,e){var f=d._model,g=b.splineCurve(b.previousItem(c.data,e,!0)._model,f,b.nextItem(c.data,e,!0)._model,f.tension);f.controlPointPreviousX=Math.max(Math.min(g.previous.x,a.right),a.left),f.controlPointPreviousY=Math.max(Math.min(g.previous.y,a.bottom),a.top),f.controlPointNextX=Math.max(Math.min(g.next.x,a.right),a.left),f.controlPointNextY=Math.max(Math.min(g.next.y,a.bottom),a.top),d.pivot()})},draw:function(a){var c=this.getMeta(),d=a||1;b.each(c.data,function(a,b){a.transition(d)}),c.dataset.transition(d).draw(),b.each(c.data,function(a){a.draw();
})},setHoverStyle:function(a){var c=this.chart.data.datasets[a._datasetIndex],d=a.custom||{},e=a._index,f=a._model;f.radius=d.hoverRadius?d.hoverRadius:b.getValueAtIndexOrDefault(c.pointHoverRadius,e,this.chart.options.elements.point.hoverRadius),f.backgroundColor=d.hoverBackgroundColor?d.hoverBackgroundColor:b.getValueAtIndexOrDefault(c.pointHoverBackgroundColor,e,b.getHoverColor(f.backgroundColor)),f.borderColor=d.hoverBorderColor?d.hoverBorderColor:b.getValueAtIndexOrDefault(c.pointHoverBorderColor,e,b.getHoverColor(f.borderColor)),f.borderWidth=d.hoverBorderWidth?d.hoverBorderWidth:b.getValueAtIndexOrDefault(c.pointHoverBorderWidth,e,f.borderWidth)},removeHoverStyle:function(a){var c=this.chart.data.datasets[a._datasetIndex],d=a.custom||{},e=a._index,f=a._model,g=this.chart.options.elements.point;f.radius=d.radius?d.radius:b.getValueAtIndexOrDefault(c.radius,e,g.radius),f.backgroundColor=d.backgroundColor?d.backgroundColor:b.getValueAtIndexOrDefault(c.pointBackgroundColor,e,g.backgroundColor),f.borderColor=d.borderColor?d.borderColor:b.getValueAtIndexOrDefault(c.pointBorderColor,e,g.borderColor),f.borderWidth=d.borderWidth?d.borderWidth:b.getValueAtIndexOrDefault(c.pointBorderWidth,e,g.borderWidth)}})}},{}],17:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.defaults.global.animation={duration:1e3,easing:"easeOutQuart",onProgress:b.noop,onComplete:b.noop},a.Animation=a.Element.extend({currentStep:null,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),a.animationService={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(a,b,c,d){var e=this;d||(a.animating=!0);for(var f=0;f<e.animations.length;++f)if(e.animations[f].chartInstance===a)return void(e.animations[f].animationObject=b);e.animations.push({chartInstance:a,animationObject:b}),1===e.animations.length&&e.requestAnimationFrame()},cancelAnimation:function(a){var c=b.findIndex(this.animations,function(b){return b.chartInstance===a});-1!==c&&(this.animations.splice(c,1),a.animating=!1)},requestAnimationFrame:function(){var a=this;null===a.request&&(a.request=b.requestAnimFrame.call(window,function(){a.request=null,a.startDigest()}))},startDigest:function(){var a=this,b=Date.now(),c=0;a.dropFrames>1&&(c=Math.floor(a.dropFrames),a.dropFrames=a.dropFrames%1);for(var d=0;d<a.animations.length;)null===a.animations[d].animationObject.currentStep&&(a.animations[d].animationObject.currentStep=0),a.animations[d].animationObject.currentStep+=1+c,a.animations[d].animationObject.currentStep>a.animations[d].animationObject.numSteps&&(a.animations[d].animationObject.currentStep=a.animations[d].animationObject.numSteps),a.animations[d].animationObject.render(a.animations[d].chartInstance,a.animations[d].animationObject),a.animations[d].animationObject.onAnimationProgress&&a.animations[d].animationObject.onAnimationProgress.call&&a.animations[d].animationObject.onAnimationProgress.call(a.animations[d].chartInstance,a.animations[d]),a.animations[d].animationObject.currentStep===a.animations[d].animationObject.numSteps?(a.animations[d].animationObject.onAnimationComplete&&a.animations[d].animationObject.onAnimationComplete.call&&a.animations[d].animationObject.onAnimationComplete.call(a.animations[d].chartInstance,a.animations[d]),a.animations[d].chartInstance.animating=!1,a.animations.splice(d,1)):++d;var e=Date.now(),f=(e-b)/a.frameDuration;a.dropFrames+=f,a.animations.length>0&&a.requestAnimationFrame()}}}},{}],18:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.types={},a.instances={},a.controllers={},a.Controller=function(c){return this.chart=c,this.config=c.config,this.options=this.config.options=b.configMerge(a.defaults.global,a.defaults[this.config.type],this.config.options||{}),this.id=b.uid(),Object.defineProperty(this,"data",{get:function(){return this.config.data}}),a.instances[this.id]=this,this.options.responsive&&this.resize(!0),this.initialize(),this},b.extend(a.Controller.prototype,{initialize:function(){var b=this;return a.plugins.notify("beforeInit",[b]),b.bindEvents(),b.ensureScalesHaveIDs(),b.buildOrUpdateControllers(),b.buildScales(),b.updateLayout(),b.resetElements(),b.initToolTip(),b.update(),a.plugins.notify("afterInit",[b]),b},clear:function(){return b.clear(this.chart),this},stop:function(){return a.animationService.cancelAnimation(this),this},resize:function(c){var d=this,e=d.chart,f=e.canvas,g=b.getMaximumWidth(f),h=e.aspectRatio,i=d.options.maintainAspectRatio&&isNaN(h)===!1&&isFinite(h)&&0!==h?g/h:b.getMaximumHeight(f),j=e.width!==g||e.height!==i;if(!j)return d;f.width=e.width=g,f.height=e.height=i,b.retinaScale(e);var k={width:g,height:i};return a.plugins.notify("resize",[d,k]),d.options.onResize&&d.options.onResize(d,k),c||(d.stop(),d.update(d.options.responsiveAnimationDuration)),d},ensureScalesHaveIDs:function(){var a=this.options,c=a.scales||{},d=a.scale;b.each(c.xAxes,function(a,b){a.id=a.id||"x-axis-"+b}),b.each(c.yAxes,function(a,b){a.id=a.id||"y-axis-"+b}),d&&(d.id=d.id||"scale")},buildScales:function(){var c=this,d=c.options,e=c.scales={},f=[];d.scales&&(f=f.concat((d.scales.xAxes||[]).map(function(a){return{options:a,dtype:"category"}}),(d.scales.yAxes||[]).map(function(a){return{options:a,dtype:"linear"}}))),d.scale&&f.push({options:d.scale,dtype:"radialLinear",isDefault:!0}),b.each(f,function(d,f){var g=d.options,h=b.getValueOrDefault(g.type,d.dtype),i=a.scaleService.getScaleConstructor(h);if(i){var j=new i({id:g.id,options:g,ctx:c.chart.ctx,chart:c});e[j.id]=j,d.isDefault&&(c.scale=j)}}),a.scaleService.addScalesToLayout(this)},updateLayout:function(){a.layoutService.update(this,this.chart.width,this.chart.height)},buildOrUpdateControllers:function(){var c=this,d=[],e=[];if(b.each(c.data.datasets,function(b,f){var g=c.getDatasetMeta(f);g.type||(g.type=b.type||c.config.type),d.push(g.type),g.controller?g.controller.updateIndex(f):(g.controller=new a.controllers[g.type](c,f),e.push(g.controller))},c),d.length>1)for(var f=1;f<d.length;f++)if(d[f]!==d[f-1]){c.isCombo=!0;break}return e},resetElements:function(){var a=this;b.each(a.data.datasets,function(b,c){a.getDatasetMeta(c).controller.reset()},a)},update:function(c,d){var e=this;a.plugins.notify("beforeUpdate",[e]),e.tooltip._data=e.data;var f=e.buildOrUpdateControllers();b.each(e.data.datasets,function(a,b){e.getDatasetMeta(b).controller.buildOrUpdateElements()},e),a.layoutService.update(e,e.chart.width,e.chart.height),a.plugins.notify("afterScaleUpdate",[e]),b.each(f,function(a){a.reset()}),e.updateDatasets(),a.plugins.notify("afterUpdate",[e]),e.render(c,d)},updateDatasets:function(){var b,c,d=this;if(a.plugins.notify("beforeDatasetsUpdate",[d])){for(b=0,c=d.data.datasets.length;c>b;++b)d.getDatasetMeta(b).controller.update();a.plugins.notify("afterDatasetsUpdate",[d])}},render:function(c,d){var e=this;a.plugins.notify("beforeRender",[e]);var f=e.options.animation;if(f&&("undefined"!=typeof c&&0!==c||"undefined"==typeof c&&0!==f.duration)){var g=new a.Animation;g.numSteps=(c||f.duration)/16.66,g.easing=f.easing,g.render=function(a,c){var d=b.easingEffects[c.easing],e=c.currentStep/c.numSteps,f=d(e);a.draw(f,e,c.currentStep)},g.onAnimationProgress=f.onProgress,g.onAnimationComplete=f.onComplete,a.animationService.addAnimation(e,g,c,d)}else e.draw(),f&&f.onComplete&&f.onComplete.call&&f.onComplete.call(e);return e},draw:function(c){var d=this,e=c||1;d.clear(),a.plugins.notify("beforeDraw",[d,e]),b.each(d.boxes,function(a){a.draw(d.chartArea)},d),d.scale&&d.scale.draw(),a.plugins.notify("beforeDatasetsDraw",[d,e]),b.each(d.data.datasets,function(a,b){d.isDatasetVisible(b)&&d.getDatasetMeta(b).controller.draw(c)},d,!0),a.plugins.notify("afterDatasetsDraw",[d,e]),d.tooltip.transition(e).draw(),a.plugins.notify("afterDraw",[d,e])},getElementAtEvent:function(a){var c=this,d=b.getRelativePosition(a,c.chart),e=[];return b.each(c.data.datasets,function(a,f){if(c.isDatasetVisible(f)){var g=c.getDatasetMeta(f);b.each(g.data,function(a,b){return a.inRange(d.x,d.y)?(e.push(a),e):void 0})}}),e},getElementsAtEvent:function(a){var c=this,d=b.getRelativePosition(a,c.chart),e=[],f=function(){if(c.data.datasets)for(var a=0;a<c.data.datasets.length;a++){var b=c.getDatasetMeta(a);if(c.isDatasetVisible(a))for(var e=0;e<b.data.length;e++)if(b.data[e].inRange(d.x,d.y))return b.data[e]}}.call(c);return f?(b.each(c.data.datasets,function(a,b){if(c.isDatasetVisible(b)){var d=c.getDatasetMeta(b);e.push(d.data[f._index])}},c),e):e},getElementsAtEventForMode:function(a,b){var c=this;switch(b){case"single":return c.getElementAtEvent(a);case"label":return c.getElementsAtEvent(a);case"dataset":return c.getDatasetAtEvent(a);default:return a}},getDatasetAtEvent:function(a){var b=this.getElementAtEvent(a);return b.length>0&&(b=this.getDatasetMeta(b[0]._datasetIndex).data),b},getDatasetMeta:function(a){var b=this,c=b.data.datasets[a];c._meta||(c._meta={});var d=c._meta[b.id];return d||(d=c._meta[b.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),d},getVisibleDatasetCount:function(){for(var a=0,b=0,c=this.data.datasets.length;c>b;++b)this.isDatasetVisible(b)&&a++;return a},isDatasetVisible:function(a){var b=this.getDatasetMeta(a);return"boolean"==typeof b.hidden?!b.hidden:!this.data.datasets[a].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroy:function(){var c=this;c.stop(),c.clear(),b.unbindEvents(c,c.events),b.removeResizeListener(c.chart.canvas.parentNode);var d=c.chart.canvas;d.width=c.chart.width,d.height=c.chart.height,void 0!==c.chart.originalDevicePixelRatio&&c.chart.ctx.scale(1/c.chart.originalDevicePixelRatio,1/c.chart.originalDevicePixelRatio),d.style.width=c.chart.originalCanvasStyleWidth,d.style.height=c.chart.originalCanvasStyleHeight,a.plugins.notify("destroy",[c]),delete a.instances[c.id]},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)},initToolTip:function(){var b=this;b.tooltip=new a.Tooltip({_chart:b.chart,_chartInstance:b,_data:b.data,_options:b.options.tooltips},b)},bindEvents:function(){var a=this;b.bindEvents(a,a.options.events,function(b){a.eventHandler(b)})},updateHoverStyle:function(a,b,c){var d,e,f,g=c?"setHoverStyle":"removeHoverStyle";switch(b){case"single":a=[a[0]];break;case"label":case"dataset":break;default:return}for(e=0,f=a.length;f>e;++e)d=a[e],d&&this.getDatasetMeta(d._datasetIndex).controller[g](d)},eventHandler:function(a){var c=this,d=c.tooltip,e=c.options||{},f=e.hover,g=e.tooltips;return c.lastActive=c.lastActive||[],c.lastTooltipActive=c.lastTooltipActive||[],"mouseout"===a.type?(c.active=[],c.tooltipActive=[]):(c.active=c.getElementsAtEventForMode(a,f.mode),c.tooltipActive=c.getElementsAtEventForMode(a,g.mode)),f.onHover&&f.onHover.call(c,c.active),"mouseup"!==a.type&&"click"!==a.type||(e.onClick&&e.onClick.call(c,a,c.active),c.legend&&c.legend.handleEvent&&c.legend.handleEvent(a)),c.lastActive.length&&c.updateHoverStyle(c.lastActive,f.mode,!1),c.active.length&&f.mode&&c.updateHoverStyle(c.active,f.mode,!0),(g.enabled||g.custom)&&(d.initialize(),d._active=c.tooltipActive,d.update(!0)),d.pivot(),c.animating||b.arrayEquals(c.active,c.lastActive)&&b.arrayEquals(c.tooltipActive,c.lastTooltipActive)||(c.stop(),(g.enabled||g.custom)&&d.update(!0),c.render(f.animationDuration,!0)),c.lastActive=c.active,c.lastTooltipActive=c.tooltipActive,c}})}},{}],19:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c=b.noop;a.DatasetController=function(a,b){this.initialize.call(this,a,b)},b.extend(a.DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(a,b){var c=this;c.chart=a,c.index=b,c.linkScales(),c.addElements()},updateIndex:function(a){this.index=a},linkScales:function(){var a=this,b=a.getMeta(),c=a.getDataset();null===b.xAxisID&&(b.xAxisID=c.xAxisID||a.chart.options.scales.xAxes[0].id),null===b.yAxisID&&(b.yAxisID=c.yAxisID||a.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(a){return this.chart.scales[a]},reset:function(){this.update(!0)},createMetaDataset:function(){var a=this,b=a.datasetElementType;return b&&new b({_chart:a.chart.chart,_datasetIndex:a.index})},createMetaData:function(a){var b=this,c=b.dataElementType;return c&&new c({_chart:b.chart.chart,_datasetIndex:b.index,_index:a})},addElements:function(){var a,b,c=this,d=c.getMeta(),e=c.getDataset().data||[],f=d.data;for(a=0,b=e.length;b>a;++a)f[a]=f[a]||c.createMetaData(d,a);d.dataset=d.dataset||c.createMetaDataset()},addElementAndReset:function(a){var b=this,c=b.createMetaData(a);b.getMeta().data.splice(a,0,c),b.updateElement(c,a,!0)},buildOrUpdateElements:function(){var a=this.getMeta(),b=a.data,c=this.getDataset().data.length,d=b.length;if(d>c)b.splice(c,d-c);else if(c>d)for(var e=d;c>e;++e)this.addElementAndReset(e)},update:c,draw:function(a){var c=a||1;b.each(this.getMeta().data,function(a,b){a.transition(c).draw()})},removeHoverStyle:function(a,c){var d=this.chart.data.datasets[a._datasetIndex],e=a._index,f=a.custom||{},g=b.getValueAtIndexOrDefault,h=(b.color,a._model);h.backgroundColor=f.backgroundColor?f.backgroundColor:g(d.backgroundColor,e,c.backgroundColor),h.borderColor=f.borderColor?f.borderColor:g(d.borderColor,e,c.borderColor),h.borderWidth=f.borderWidth?f.borderWidth:g(d.borderWidth,e,c.borderWidth)},setHoverStyle:function(a){var c=this.chart.data.datasets[a._datasetIndex],d=a._index,e=a.custom||{},f=b.getValueAtIndexOrDefault,g=(b.color,b.getHoverColor),h=a._model;h.backgroundColor=e.hoverBackgroundColor?e.hoverBackgroundColor:f(c.hoverBackgroundColor,d,g(h.backgroundColor)),h.borderColor=e.hoverBorderColor?e.hoverBorderColor:f(c.hoverBorderColor,d,g(h.borderColor)),h.borderWidth=e.hoverBorderWidth?e.hoverBorderWidth:f(c.hoverBorderWidth,d,h.borderWidth)}}),a.DatasetController.extend=b.inherits}},{}],20:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.elements={},a.Element=function(a){b.extend(this,a),this.initialize.apply(this,arguments)},b.extend(a.Element.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var a=this;return a._view||(a._view=b.clone(a._model)),a._start=b.clone(a._view),a},transition:function(a){var c=this;return c._view||(c._view=b.clone(c._model)),1===a?(c._view=c._model,c._start=null,c):(c._start||c.pivot(),b.each(c._model,function(d,e){if("_"===e[0]);else if(c._view.hasOwnProperty(e))if(d===c._view[e]);else if("string"==typeof d)try{var f=b.color(c._model[e]).mix(b.color(c._start[e]),a);c._view[e]=f.rgbString()}catch(g){c._view[e]=d}else if("number"==typeof d){var h=void 0!==c._start[e]&&isNaN(c._start[e])===!1?c._start[e]:0;c._view[e]=(c._model[e]-h)*a+h}else c._view[e]=d;else"number"!=typeof d||isNaN(c._view[e])?c._view[e]=d:c._view[e]=d*a},c),c)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return b.isNumber(this._model.x)&&b.isNumber(this._model.y)}}),a.Element.extend=b.inherits}},{}],21:[function(a,b,c){"use strict";var d=a("chartjs-color");b.exports=function(a){function b(a,b,c){var d;return"string"==typeof a?(d=parseInt(a,10),-1!=a.indexOf("%")&&(d=d/100*b.parentNode[c])):d=a,d}function c(a){return void 0!==a&&null!==a&&"none"!==a}function e(a,d,e){var f=document.defaultView,g=a.parentNode,h=f.getComputedStyle(a)[d],i=f.getComputedStyle(g)[d],j=c(h),k=c(i),l=Number.POSITIVE_INFINITY;return j||k?Math.min(j?b(h,a,e):l,k?b(i,g,e):l):"none"}var f=a.helpers={};f.each=function(a,b,c,d){var e,g;if(f.isArray(a))if(g=a.length,d)for(e=g-1;e>=0;e--)b.call(c,a[e],e);else for(e=0;g>e;e++)b.call(c,a[e],e);else if("object"==typeof a){var h=Object.keys(a);for(g=h.length,e=0;g>e;e++)b.call(c,a[h[e]],h[e])}},f.clone=function(a){var b={};return f.each(a,function(a,c){f.isArray(a)?b[c]=a.slice(0):"object"==typeof a&&null!==a?b[c]=f.clone(a):b[c]=a}),b},f.extend=function(a){for(var b=function(b,c){a[c]=b},c=1,d=arguments.length;d>c;c++)f.each(arguments[c],b);return a},f.configMerge=function(b){var c=f.clone(b);return f.each(Array.prototype.slice.call(arguments,1),function(b){f.each(b,function(b,d){if("scales"===d)c[d]=f.scaleMerge(c.hasOwnProperty(d)?c[d]:{},b);else if("scale"===d)c[d]=f.configMerge(c.hasOwnProperty(d)?c[d]:{},a.scaleService.getScaleDefaults(b.type),b);else if(c.hasOwnProperty(d)&&f.isArray(c[d])&&f.isArray(b)){var e=c[d];f.each(b,function(a,b){b<e.length?"object"==typeof e[b]&&null!==e[b]&&"object"==typeof a&&null!==a?e[b]=f.configMerge(e[b],a):e[b]=a:e.push(a)})}else c.hasOwnProperty(d)&&"object"==typeof c[d]&&null!==c[d]&&"object"==typeof b?c[d]=f.configMerge(c[d],b):c[d]=b})}),c},f.scaleMerge=function(b,c){var d=f.clone(b);return f.each(c,function(b,c){"xAxes"===c||"yAxes"===c?d.hasOwnProperty(c)?f.each(b,function(b,e){var g=f.getValueOrDefault(b.type,"xAxes"===c?"category":"linear"),h=a.scaleService.getScaleDefaults(g);e>=d[c].length||!d[c][e].type?d[c].push(f.configMerge(h,b)):b.type&&b.type!==d[c][e].type?d[c][e]=f.configMerge(d[c][e],h,b):d[c][e]=f.configMerge(d[c][e],b)}):(d[c]=[],f.each(b,function(b){var e=f.getValueOrDefault(b.type,"xAxes"===c?"category":"linear");d[c].push(f.configMerge(a.scaleService.getScaleDefaults(e),b))})):d.hasOwnProperty(c)&&"object"==typeof d[c]&&null!==d[c]&&"object"==typeof b?d[c]=f.configMerge(d[c],b):d[c]=b}),d},f.getValueAtIndexOrDefault=function(a,b,c){return void 0===a||null===a?c:f.isArray(a)?b<a.length?a[b]:c:a},f.getValueOrDefault=function(a,b){return void 0===a?b:a},f.indexOf=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;++c)if(a[c]===b)return c;return-1},f.where=function(a,b){if(f.isArray(a)&&Array.prototype.filter)return a.filter(b);var c=[];return f.each(a,function(a){b(a)&&c.push(a)}),c},f.findIndex=Array.prototype.findIndex?function(a,b,c){return a.findIndex(b,c)}:function(a,b,c){c=void 0===c?a:c;for(var d=0,e=a.length;e>d;++d)if(b.call(c,a[d],d,a))return d;return-1},f.findNextWhere=function(a,b,c){void 0!==c&&null!==c||(c=-1);for(var d=c+1;d<a.length;d++){var e=a[d];if(b(e))return e}},f.findPreviousWhere=function(a,b,c){void 0!==c&&null!==c||(c=a.length);for(var d=c-1;d>=0;d--){var e=a[d];if(b(e))return e}},f.inherits=function(a){var b=this,c=a&&a.hasOwnProperty("constructor")?a.constructor:function(){return b.apply(this,arguments)},d=function(){this.constructor=c};return d.prototype=b.prototype,c.prototype=new d,c.extend=f.inherits,a&&f.extend(c.prototype,a),c.__super__=b.prototype,c},f.noop=function(){},f.uid=function(){var a=0;return function(){return a++}}(),f.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},f.almostEquals=function(a,b,c){return Math.abs(a-b)<c},f.max=function(a){return a.reduce(function(a,b){return isNaN(b)?a:Math.max(a,b)},Number.NEGATIVE_INFINITY)},f.min=function(a){return a.reduce(function(a,b){return isNaN(b)?a:Math.min(a,b)},Number.POSITIVE_INFINITY)},f.sign=Math.sign?function(a){return Math.sign(a)}:function(a){return a=+a,0===a||isNaN(a)?a:a>0?1:-1},f.log10=Math.log10?function(a){return Math.log10(a)}:function(a){return Math.log(a)/Math.LN10},f.toRadians=function(a){return a*(Math.PI/180)},f.toDegrees=function(a){return a*(180/Math.PI)},f.getAngleFromPoint=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=Math.sqrt(c*c+d*d),f=Math.atan2(d,c);return f<-.5*Math.PI&&(f+=2*Math.PI),{angle:f,distance:e}},f.aliasPixel=function(a){return a%2===0?0:.5},f.splineCurve=function(a,b,c,d){var e=a.skip?b:a,f=b,g=c.skip?b:c,h=Math.sqrt(Math.pow(f.x-e.x,2)+Math.pow(f.y-e.y,2)),i=Math.sqrt(Math.pow(g.x-f.x,2)+Math.pow(g.y-f.y,2)),j=h/(h+i),k=i/(h+i);j=isNaN(j)?0:j,k=isNaN(k)?0:k;var l=d*j,m=d*k;return{previous:{x:f.x-l*(g.x-e.x),y:f.y-l*(g.y-e.y)},next:{x:f.x+m*(g.x-e.x),y:f.y+m*(g.y-e.y)}}},f.nextItem=function(a,b,c){return c?b>=a.length-1?a[0]:a[b+1]:b>=a.length-1?a[a.length-1]:a[b+1]},f.previousItem=function(a,b,c){return c?0>=b?a[a.length-1]:a[b-1]:0>=b?a[0]:a[b-1]},f.niceNum=function(a,b){var c,d=Math.floor(f.log10(a)),e=a/Math.pow(10,d);return c=b?1.5>e?1:3>e?2:7>e?5:10:1>=e?1:2>=e?2:5>=e?5:10,c*Math.pow(10,d)};var g=f.easingEffects={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return-1*a*(a-2)},easeInOutQuad:function(a){return(a/=.5)<1?.5*a*a:-0.5*(--a*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1*((a=a/1-1)*a*a+1)},easeInOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return-1*((a=a/1-1)*a*a*a-1)},easeInOutQuart:function(a){return(a/=.5)<1?.5*a*a*a*a:-0.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return 1*(a/=1)*a*a*a*a},easeOutQuint:function(a){return 1*((a=a/1-1)*a*a*a*a+1)},easeInOutQuint:function(a){return(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return-1*Math.cos(a/1*(Math.PI/2))+1},easeOutSine:function(a){return 1*Math.sin(a/1*(Math.PI/2))},easeInOutSine:function(a){return-0.5*(Math.cos(Math.PI*a/1)-1)},easeInExpo:function(a){return 0===a?1:1*Math.pow(2,10*(a/1-1))},easeOutExpo:function(a){return 1===a?1:1*(-Math.pow(2,-10*a/1)+1)},easeInOutExpo:function(a){return 0===a?0:1===a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return a>=1?a:-1*(Math.sqrt(1-(a/=1)*a)-1)},easeOutCirc:function(a){return 1*Math.sqrt(1-(a=a/1-1)*a)},easeInOutCirc:function(a){return(a/=.5)<1?-0.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1===(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),-(d*Math.pow(2,10*(a-=1))*Math.sin((1*a-b)*(2*Math.PI)/c)))},easeOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1===(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),d*Math.pow(2,-10*a)*Math.sin((1*a-b)*(2*Math.PI)/c)+1)},easeInOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:2===(a/=.5)?1:(c||(c=1*(.3*1.5)),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),1>a?-.5*(d*Math.pow(2,10*(a-=1))*Math.sin((1*a-b)*(2*Math.PI)/c)):d*Math.pow(2,-10*(a-=1))*Math.sin((1*a-b)*(2*Math.PI)/c)*.5+1)},easeInBack:function(a){var b=1.70158;return 1*(a/=1)*a*((b+1)*a-b)},easeOutBack:function(a){var b=1.70158;return 1*((a=a/1-1)*a*((b+1)*a+b)+1)},easeInOutBack:function(a){var b=1.70158;return(a/=.5)<1?.5*(a*a*(((b*=1.525)+1)*a-b)):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},easeInBounce:function(a){return 1-g.easeOutBounce(1-a)},easeOutBounce:function(a){return(a/=1)<1/2.75?1*(7.5625*a*a):2/2.75>a?1*(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1*(7.5625*(a-=2.25/2.75)*a+.9375):1*(7.5625*(a-=2.625/2.75)*a+.984375)},easeInOutBounce:function(a){return.5>a?.5*g.easeInBounce(2*a):.5*g.easeOutBounce(2*a-1)+.5}};f.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)}}(),f.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(a){return window.clearTimeout(a,1e3/60)}}(),f.getRelativePosition=function(a,b){var c,d,e=a.originalEvent||a,g=a.currentTarget||a.srcElement,h=g.getBoundingClientRect(),i=e.touches;i&&i.length>0?(c=i[0].clientX,d=i[0].clientY):(c=e.clientX,d=e.clientY);var j=parseFloat(f.getStyle(g,"padding-left")),k=parseFloat(f.getStyle(g,"padding-top")),l=parseFloat(f.getStyle(g,"padding-right")),m=parseFloat(f.getStyle(g,"padding-bottom")),n=h.right-h.left-j-l,o=h.bottom-h.top-k-m;return c=Math.round((c-h.left-j)/n*g.width/b.currentDevicePixelRatio),d=Math.round((d-h.top-k)/o*g.height/b.currentDevicePixelRatio),{x:c,y:d}},f.addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,c):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},f.removeEvent=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=f.noop},f.bindEvents=function(a,b,c){var d=a.events=a.events||{};f.each(b,function(b){d[b]=function(){c.apply(a,arguments)},f.addEvent(a.chart.canvas,b,d[b])})},f.unbindEvents=function(a,b){var c=a.chart.canvas;f.each(b,function(a,b){f.removeEvent(c,b,a)})},f.getConstraintWidth=function(a){return e(a,"max-width","clientWidth")},f.getConstraintHeight=function(a){return e(a,"max-height","clientHeight")},f.getMaximumWidth=function(a){var b=a.parentNode,c=parseInt(f.getStyle(b,"padding-left"))+parseInt(f.getStyle(b,"padding-right")),d=b.clientWidth-c,e=f.getConstraintWidth(a);return isNaN(e)?d:Math.min(d,e)},f.getMaximumHeight=function(a){var b=a.parentNode,c=parseInt(f.getStyle(b,"padding-top"))+parseInt(f.getStyle(b,"padding-bottom")),d=b.clientHeight-c,e=f.getConstraintHeight(a);return isNaN(e)?d:Math.min(d,e)},f.getStyle=function(a,b){return a.currentStyle?a.currentStyle[b]:document.defaultView.getComputedStyle(a,null).getPropertyValue(b)},f.retinaScale=function(a){var b=a.ctx,c=a.canvas,d=c.width,e=c.height,f=a.currentDevicePixelRatio=window.devicePixelRatio||1;1!==f&&(c.height=e*f,c.width=d*f,b.scale(f,f),a.originalDevicePixelRatio=a.originalDevicePixelRatio||f),c.style.width=d+"px",c.style.height=e+"px"},f.clear=function(a){a.ctx.clearRect(0,0,a.width,a.height)},f.fontString=function(a,b,c){return b+" "+a+"px "+c},f.longestText=function(a,b,c,d){d=d||{};var e=d.data=d.data||{},g=d.garbageCollect=d.garbageCollect||[];d.font!==b&&(e=d.data={},g=d.garbageCollect=[],d.font=b),a.font=b;var h=0;f.each(c,function(b){void 0!==b&&null!==b&&f.isArray(b)!==!0?h=f.measureText(a,e,g,h,b):f.isArray(b)&&f.each(b,function(b){void 0===b||null===b||f.isArray(b)||(h=f.measureText(a,e,g,h,b))})});var i=g.length/2;if(i>c.length){for(var j=0;i>j;j++)delete e[g[j]];g.splice(0,i)}return h},f.measureText=function(a,b,c,d,e){var f=b[e];return f||(f=b[e]=a.measureText(e).width,c.push(e)),f>d&&(d=f),d},f.numberOfLabelLines=function(a){var b=1;return f.each(a,function(a){f.isArray(a)&&a.length>b&&(b=a.length)}),b},f.drawRoundedRectangle=function(a,b,c,d,e,f){a.beginPath(),a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.quadraticCurveTo(b+d,c,b+d,c+f),a.lineTo(b+d,c+e-f),a.quadraticCurveTo(b+d,c+e,b+d-f,c+e),a.lineTo(b+f,c+e),a.quadraticCurveTo(b,c+e,b,c+e-f),a.lineTo(b,c+f),a.quadraticCurveTo(b,c,b+f,c),a.closePath()},f.color=function(b){return d?d(b instanceof CanvasGradient?a.defaults.global.defaultColor:b):(console.log("Color.js not found!"),b)},f.addResizeListener=function(a,b){var c=document.createElement("iframe"),d="chartjs-hidden-iframe";c.classlist?c.classlist.add(d):c.setAttribute("class",d);var e=c.style;e.width="100%",e.display="block",e.border=0,e.height=0,e.margin=0,e.position="absolute",e.left=0,e.right=0,e.top=0,e.bottom=0,a.insertBefore(c,a.firstChild),(c.contentWindow||c).onresize=function(){b&&b()}},f.removeResizeListener=function(a){var b=a.querySelector(".chartjs-hidden-iframe");b&&b.parentNode.removeChild(b)},f.isArray=Array.isArray?function(a){return Array.isArray(a)}:function(a){return"[object Array]"===Object.prototype.toString.call(a)},f.arrayEquals=function(a,b){var c,d,e,g;if(!a||!b||a.length!=b.length)return!1;for(c=0,d=a.length;d>c;++c)if(e=a[c],g=b[c],e instanceof Array&&g instanceof Array){if(!f.arrayEquals(e,g))return!1}else if(e!=g)return!1;return!0},f.callCallback=function(a,b,c){a&&"function"==typeof a.call&&a.apply(c,b)},f.getHoverColor=function(a){return a instanceof CanvasPattern?a:f.color(a).saturate(.5).darken(.1).rgbString()}}},{"chartjs-color":41}],22:[function(a,b,c){"use strict";b.exports=function(){var a=function(b,c){var d=this,e=a.helpers;return d.config=c,b.length&&b[0].getContext&&(b=b[0]),b.getContext&&(b=b.getContext("2d")),d.ctx=b,d.canvas=b.canvas,b.canvas.style.display=b.canvas.style.display||"block",d.width=b.canvas.width||parseInt(e.getStyle(b.canvas,"width"),10)||e.getMaximumWidth(b.canvas),d.height=b.canvas.height||parseInt(e.getStyle(b.canvas,"height"),10)||e.getMaximumHeight(b.canvas),d.aspectRatio=d.width/d.height,(isNaN(d.aspectRatio)||isFinite(d.aspectRatio)===!1)&&(d.aspectRatio=void 0!==c.aspectRatio?c.aspectRatio:2),d.originalCanvasStyleWidth=b.canvas.style.width,d.originalCanvasStyleHeight=b.canvas.style.height,e.retinaScale(d),c&&(d.controller=new a.Controller(d)),e.addResizeListener(b.canvas.parentNode,function(){d.controller&&d.controller.config.options.responsive&&d.controller.resize()}),d.controller?d.controller:d};return a.defaults={global:{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!0,events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"single",animationDuration:400},onClick:null,defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",showLines:!0,elements:{},legendCallback:function(a){var b=[];b.push('<ul class="'+a.id+'-legend">');for(var c=0;c<a.data.datasets.length;c++)b.push('<li><span style="background-color:'+a.data.datasets[c].backgroundColor+'"></span>'),a.data.datasets[c].label&&b.push(a.data.datasets[c].label),b.push("</li>");return b.push("</ul>"),b.join("")}}},a.Chart=a,a}},{}],23:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.layoutService={defaults:{},addBox:function(a,b){a.boxes||(a.boxes=[]),a.boxes.push(b)},removeBox:function(a,b){a.boxes&&a.boxes.splice(a.boxes.indexOf(b),1)},update:function(a,c,d){function e(a){var b,c=a.isHorizontal();c?(b=a.update(a.options.fullWidth?p:v,u),w-=b.height):(b=a.update(t,s),v-=b.width),x.push({horizontal:c,minSize:b,box:a})}function f(a){var c=b.findNextWhere(x,function(b){return b.box===a});if(c)if(a.isHorizontal()){var d={left:y,right:z,top:0,bottom:0};a.update(a.options.fullWidth?p:v,q/2,d)}else a.update(c.minSize.width,w)}function g(a){var c=b.findNextWhere(x,function(b){return b.box===a}),d={left:0,right:0,top:A,bottom:B};c&&a.update(c.minSize.width,w,d)}function h(a){a.isHorizontal()?(a.left=a.options.fullWidth?i:y,a.right=a.options.fullWidth?c-i:y+v,a.top=F,a.bottom=F+a.height,F=a.bottom):(a.left=E,a.right=E+a.width,a.top=A,a.bottom=A+w,E=a.right)}if(a){var i=0,j=0,k=b.where(a.boxes,function(a){return"left"===a.options.position}),l=b.where(a.boxes,function(a){return"right"===a.options.position}),m=b.where(a.boxes,function(a){return"top"===a.options.position}),n=b.where(a.boxes,function(a){return"bottom"===a.options.position}),o=b.where(a.boxes,function(a){return"chartArea"===a.options.position});m.sort(function(a,b){return(b.options.fullWidth?1:0)-(a.options.fullWidth?1:0)}),n.sort(function(a,b){return(a.options.fullWidth?1:0)-(b.options.fullWidth?1:0)});var p=c-2*i,q=d-2*j,r=p/2,s=q/2,t=(c-r)/(k.length+l.length),u=(d-s)/(m.length+n.length),v=p,w=q,x=[];b.each(k.concat(l,m,n),e);var y=i,z=i,A=j,B=j;b.each(k.concat(l),f),b.each(k,function(a){y+=a.width}),b.each(l,function(a){z+=a.width}),b.each(m.concat(n),f),b.each(m,function(a){A+=a.height}),b.each(n,function(a){B+=a.height}),b.each(k.concat(l),g),y=i,z=i,A=j,B=j,b.each(k,function(a){y+=a.width}),b.each(l,function(a){z+=a.width}),b.each(m,function(a){A+=a.height}),b.each(n,function(a){B+=a.height});var C=d-A-B,D=c-y-z;D===v&&C===w||(b.each(k,function(a){a.height=C}),b.each(l,function(a){a.height=C}),b.each(m,function(a){a.options.fullWidth||(a.width=D)}),b.each(n,function(a){a.options.fullWidth||(a.width=D)}),w=C,v=D);var E=i,F=j;b.each(k.concat(m),h),E+=v,F+=w,b.each(l,h),b.each(n,h),a.chartArea={left:y,top:A,right:y+v,bottom:A+w},b.each(o,function(b){b.left=a.chartArea.left,b.top=a.chartArea.top,b.right=a.chartArea.right,b.bottom=a.chartArea.bottom,b.update(v,w)})}}}}},{}],24:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c=b.noop;a.defaults.global.legend={display:!0,position:"top",fullWidth:!0,reverse:!1,onClick:function(a,b){var c=b.datasetIndex,d=this.chart,e=d.getDatasetMeta(c);
e.hidden=null===e.hidden?!d.data.datasets[c].hidden:null,d.update()},labels:{boxWidth:40,padding:10,generateLabels:function(a){var c=a.data;return b.isArray(c.datasets)?c.datasets.map(function(c,d){return{text:c.label,fillStyle:b.isArray(c.backgroundColor)?c.backgroundColor[0]:c.backgroundColor,hidden:!a.isDatasetVisible(d),lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:c.borderWidth,strokeStyle:c.borderColor,datasetIndex:d}},this):[]}}},a.Legend=a.Element.extend({initialize:function(a){b.extend(this,a),this.legendHitBoxes=[],this.doughnutMode=!1},beforeUpdate:c,update:function(a,b,c){var d=this;return d.beforeUpdate(),d.maxWidth=a,d.maxHeight=b,d.margins=c,d.beforeSetDimensions(),d.setDimensions(),d.afterSetDimensions(),d.beforeBuildLabels(),d.buildLabels(),d.afterBuildLabels(),d.beforeFit(),d.fit(),d.afterFit(),d.afterUpdate(),d.minSize},afterUpdate:c,beforeSetDimensions:c,setDimensions:function(){var a=this;a.isHorizontal()?(a.width=a.maxWidth,a.left=0,a.right=a.width):(a.height=a.maxHeight,a.top=0,a.bottom=a.height),a.paddingLeft=0,a.paddingTop=0,a.paddingRight=0,a.paddingBottom=0,a.minSize={width:0,height:0}},afterSetDimensions:c,beforeBuildLabels:c,buildLabels:function(){var a=this;a.legendItems=a.options.labels.generateLabels.call(a,a.chart),a.options.reverse&&a.legendItems.reverse()},afterBuildLabels:c,beforeFit:c,fit:function(){var c=this,d=c.options,e=d.labels,f=d.display,g=c.ctx,h=a.defaults.global,i=b.getValueOrDefault,j=i(e.fontSize,h.defaultFontSize),k=i(e.fontStyle,h.defaultFontStyle),l=i(e.fontFamily,h.defaultFontFamily),m=b.fontString(j,k,l),n=c.legendHitBoxes=[],o=c.minSize,p=c.isHorizontal();if(p?(o.width=c.maxWidth,o.height=f?10:0):(o.width=f?10:0,o.height=c.maxHeight),f)if(g.font=m,p){var q=c.lineWidths=[0],r=c.legendItems.length?j+e.padding:0;g.textAlign="left",g.textBaseline="top",b.each(c.legendItems,function(a,b){var d=e.boxWidth+j/2+g.measureText(a.text).width;q[q.length-1]+d+e.padding>=c.width&&(r+=j+e.padding,q[q.length]=c.left),n[b]={left:0,top:0,width:d,height:j},q[q.length-1]+=d+e.padding}),o.height+=r}else{var s=e.padding,t=c.columnWidths=[],u=e.padding,v=0,w=0,x=j+s;b.each(c.legendItems,function(a,b){var c=e.boxWidth+j/2+g.measureText(a.text).width;w+x>o.height&&(u+=v+e.padding,t.push(v),v=0,w=0),v=Math.max(v,c),w+=x,n[b]={left:0,top:0,width:c,height:j}}),u+=v,t.push(v),o.width+=u}c.width=o.width,c.height=o.height},afterFit:c,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var c=this,d=c.options,e=d.labels,f=a.defaults.global,g=f.elements.line,h=c.width,i=(c.height,c.lineWidths);if(d.display){var j,k=c.ctx,l=b.getValueOrDefault,m=l(e.fontColor,f.defaultFontColor),n=l(e.fontSize,f.defaultFontSize),o=l(e.fontStyle,f.defaultFontStyle),p=l(e.fontFamily,f.defaultFontFamily),q=b.fontString(n,o,p);k.textAlign="left",k.textBaseline="top",k.lineWidth=.5,k.strokeStyle=m,k.fillStyle=m,k.font=q;var r=e.boxWidth,s=c.legendHitBoxes,t=function(a,b,c){k.save(),k.fillStyle=l(c.fillStyle,f.defaultColor),k.lineCap=l(c.lineCap,g.borderCapStyle),k.lineDashOffset=l(c.lineDashOffset,g.borderDashOffset),k.lineJoin=l(c.lineJoin,g.borderJoinStyle),k.lineWidth=l(c.lineWidth,g.borderWidth),k.strokeStyle=l(c.strokeStyle,f.defaultColor),k.setLineDash&&k.setLineDash(l(c.lineDash,g.borderDash)),k.strokeRect(a,b,r,n),k.fillRect(a,b,r,n),k.restore()},u=function(a,b,c,d){k.fillText(c.text,r+n/2+a,b),c.hidden&&(k.beginPath(),k.lineWidth=2,k.moveTo(r+n/2+a,b+n/2),k.lineTo(r+n/2+a+d,b+n/2),k.stroke())},v=c.isHorizontal();j=v?{x:c.left+(h-i[0])/2,y:c.top+e.padding,line:0}:{x:c.left+e.padding,y:c.top,line:0};var w=n+e.padding;b.each(c.legendItems,function(a,b){var d=k.measureText(a.text).width,f=r+n/2+d,g=j.x,l=j.y;v?g+f>=h&&(l=j.y+=n+e.padding,j.line++,g=j.x=c.left+(h-i[j.line])/2):l+w>c.bottom&&(g=j.x=g+c.columnWidths[j.line]+e.padding,l=j.y=c.top,j.line++),t(g,l,a),s[b].left=g,s[b].top=l,u(g,l,a,d),v?j.x+=f+e.padding:j.y+=w})}},handleEvent:function(a){var c=this,d=b.getRelativePosition(a,c.chart.chart),e=d.x,f=d.y,g=c.options;if(e>=c.left&&e<=c.right&&f>=c.top&&f<=c.bottom)for(var h=c.legendHitBoxes,i=0;i<h.length;++i){var j=h[i];if(e>=j.left&&e<=j.left+j.width&&f>=j.top&&f<=j.top+j.height){g.onClick&&g.onClick.call(c,a,c.legendItems[i]);break}}}}),a.plugins.register({beforeInit:function(b){var c=b.options,d=c.legend;d&&(b.legend=new a.Legend({ctx:b.chart.ctx,options:d,chart:b}),a.layoutService.addBox(b,b.legend))}})}},{}],25:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers.noop;a.plugins={_plugins:[],register:function(a){var b=this._plugins;[].concat(a).forEach(function(a){-1===b.indexOf(a)&&b.push(a)})},unregister:function(a){var b=this._plugins;[].concat(a).forEach(function(a){var c=b.indexOf(a);-1!==c&&b.splice(c,1)})},clear:function(){this._plugins=[]},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(a,b){var c,d,e=this._plugins,f=e.length;for(c=0;f>c;++c)if(d=e[c],"function"==typeof d[a]&&d[a].apply(d,b||[])===!1)return!1;return!0}},a.PluginBase=a.Element.extend({beforeInit:b,afterInit:b,beforeUpdate:b,afterUpdate:b,beforeDraw:b,afterDraw:b,destroy:b}),a.pluginService=a.plugins}},{}],26:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.defaults.scale={display:!0,position:"left",gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",offsetGridLines:!1},scaleLabel:{labelString:"",display:!1},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:10,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:function(a){return b.isArray(a)?a:""+a}}},a.Scale=a.Element.extend({beforeUpdate:function(){b.callCallback(this.options.beforeUpdate,[this])},update:function(a,c,d){var e=this;return e.beforeUpdate(),e.maxWidth=a,e.maxHeight=c,e.margins=b.extend({left:0,right:0,top:0,bottom:0},d),e.beforeSetDimensions(),e.setDimensions(),e.afterSetDimensions(),e.beforeDataLimits(),e.determineDataLimits(),e.afterDataLimits(),e.beforeBuildTicks(),e.buildTicks(),e.afterBuildTicks(),e.beforeTickToLabelConversion(),e.convertTicksToLabels(),e.afterTickToLabelConversion(),e.beforeCalculateTickRotation(),e.calculateTickRotation(),e.afterCalculateTickRotation(),e.beforeFit(),e.fit(),e.afterFit(),e.afterUpdate(),e.minSize},afterUpdate:function(){b.callCallback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){b.callCallback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var a=this;a.isHorizontal()?(a.width=a.maxWidth,a.left=0,a.right=a.width):(a.height=a.maxHeight,a.top=0,a.bottom=a.height),a.paddingLeft=0,a.paddingTop=0,a.paddingRight=0,a.paddingBottom=0},afterSetDimensions:function(){b.callCallback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){b.callCallback(this.options.beforeDataLimits,[this])},determineDataLimits:b.noop,afterDataLimits:function(){b.callCallback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){b.callCallback(this.options.beforeBuildTicks,[this])},buildTicks:b.noop,afterBuildTicks:function(){b.callCallback(this.options.afterBuildTicks,[this])},beforeTickToLabelConversion:function(){b.callCallback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var a=this;a.ticks=a.ticks.map(function(b,c,d){return a.options.ticks.userCallback?a.options.ticks.userCallback(b,c,d):a.options.ticks.callback(b,c,d)},a)},afterTickToLabelConversion:function(){b.callCallback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){b.callCallback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var c=this,d=c.ctx,e=a.defaults.global,f=c.options.ticks,g=b.getValueOrDefault(f.fontSize,e.defaultFontSize),h=b.getValueOrDefault(f.fontStyle,e.defaultFontStyle),i=b.getValueOrDefault(f.fontFamily,e.defaultFontFamily),j=b.fontString(g,h,i);d.font=j;var k,l=d.measureText(c.ticks[0]).width,m=d.measureText(c.ticks[c.ticks.length-1]).width;if(c.labelRotation=f.minRotation||0,c.paddingRight=0,c.paddingLeft=0,c.options.display&&c.isHorizontal()){c.paddingRight=m/2+3,c.paddingLeft=l/2+3,c.longestTextCache||(c.longestTextCache={});for(var n,o,p=b.longestText(d,j,c.ticks,c.longestTextCache),q=p,r=c.getPixelForTick(1)-c.getPixelForTick(0)-6;q>r&&c.labelRotation<f.maxRotation;){if(n=Math.cos(b.toRadians(c.labelRotation)),o=Math.sin(b.toRadians(c.labelRotation)),k=n*l,k+g/2>c.yLabelWidth&&(c.paddingLeft=k+g/2),c.paddingRight=g/2,o*p>c.maxHeight){c.labelRotation--;break}c.labelRotation++,q=n*p}}c.margins&&(c.paddingLeft=Math.max(c.paddingLeft-c.margins.left,0),c.paddingRight=Math.max(c.paddingRight-c.margins.right,0))},afterCalculateTickRotation:function(){b.callCallback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){b.callCallback(this.options.beforeFit,[this])},fit:function(){var c=this,d=c.minSize={width:0,height:0},e=c.options,f=a.defaults.global,g=e.ticks,h=e.scaleLabel,i=e.display,j=c.isHorizontal(),k=b.getValueOrDefault(g.fontSize,f.defaultFontSize),l=b.getValueOrDefault(g.fontStyle,f.defaultFontStyle),m=b.getValueOrDefault(g.fontFamily,f.defaultFontFamily),n=b.fontString(k,l,m),o=b.getValueOrDefault(h.fontSize,f.defaultFontSize),p=b.getValueOrDefault(h.fontStyle,f.defaultFontStyle),q=b.getValueOrDefault(h.fontFamily,f.defaultFontFamily),r=(b.fontString(o,p,q),e.gridLines.tickMarkLength);if(j?d.width=c.isFullWidth()?c.maxWidth-c.margins.left-c.margins.right:c.maxWidth:d.width=i?r:0,j?d.height=i?r:0:d.height=c.maxHeight,h.display&&i&&(j?d.height+=1.5*o:d.width+=1.5*o),g.display&&i){c.longestTextCache||(c.longestTextCache={});var s=b.longestText(c.ctx,n,c.ticks,c.longestTextCache),t=b.numberOfLabelLines(c.ticks),u=.5*k;if(j){c.longestLabelWidth=s;var v=Math.sin(b.toRadians(c.labelRotation))*c.longestLabelWidth+k*t+u*t;d.height=Math.min(c.maxHeight,d.height+v),c.ctx.font=n;var w=c.ctx.measureText(c.ticks[0]).width,x=c.ctx.measureText(c.ticks[c.ticks.length-1]).width,y=Math.cos(b.toRadians(c.labelRotation)),z=Math.sin(b.toRadians(c.labelRotation));c.paddingLeft=0!==c.labelRotation?y*w+3:w/2+3,c.paddingRight=0!==c.labelRotation?z*(k/2)+3:x/2+3}else{var A=c.maxWidth-d.width,B=g.mirror;B?s=0:s+=c.options.ticks.padding,A>s?d.width+=s:d.width=c.maxWidth,c.paddingTop=k/2,c.paddingBottom=k/2}}c.margins&&(c.paddingLeft=Math.max(c.paddingLeft-c.margins.left,0),c.paddingTop=Math.max(c.paddingTop-c.margins.top,0),c.paddingRight=Math.max(c.paddingRight-c.margins.right,0),c.paddingBottom=Math.max(c.paddingBottom-c.margins.bottom,0)),c.width=d.width,c.height=d.height},afterFit:function(){b.callCallback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function c(a){return null===a||"undefined"==typeof a?NaN:"number"==typeof a&&isNaN(a)?NaN:"object"==typeof a?a instanceof Date||a.isValid?a:c(this.isHorizontal()?a.x:a.y):a},getLabelForIndex:b.noop,getPixelForValue:b.noop,getValueForPixel:b.noop,getPixelForTick:function(a,b){var c=this;if(c.isHorizontal()){var d=c.width-(c.paddingLeft+c.paddingRight),e=d/Math.max(c.ticks.length-(c.options.gridLines.offsetGridLines?0:1),1),f=e*a+c.paddingLeft;b&&(f+=e/2);var g=c.left+Math.round(f);return g+=c.isFullWidth()?c.margins.left:0}var h=c.height-(c.paddingTop+c.paddingBottom);return c.top+a*(h/(c.ticks.length-1))},getPixelForDecimal:function(a){var b=this;if(b.isHorizontal()){var c=b.width-(b.paddingLeft+b.paddingRight),d=c*a+b.paddingLeft,e=b.left+Math.round(d);return e+=b.isFullWidth()?b.margins.left:0}return b.top+a*b.height},getBasePixel:function(){var a=this,b=a.min,c=a.max;return a.getPixelForValue(a.beginAtZero?0:0>b&&0>c?c:b>0&&c>0?b:0)},draw:function(c){var d=this,e=d.options;if(e.display){var f,g,h=d.ctx,i=a.defaults.global,j=e.ticks,k=e.gridLines,l=e.scaleLabel,m=0!==d.labelRotation,n=j.autoSkip,o=d.isHorizontal();j.maxTicksLimit&&(g=j.maxTicksLimit);var p=b.getValueOrDefault(j.fontColor,i.defaultFontColor),q=b.getValueOrDefault(j.fontSize,i.defaultFontSize),r=b.getValueOrDefault(j.fontStyle,i.defaultFontStyle),s=b.getValueOrDefault(j.fontFamily,i.defaultFontFamily),t=b.fontString(q,r,s),u=k.tickMarkLength,v=b.getValueOrDefault(l.fontColor,i.defaultFontColor),w=b.getValueOrDefault(l.fontSize,i.defaultFontSize),x=b.getValueOrDefault(l.fontStyle,i.defaultFontStyle),y=b.getValueOrDefault(l.fontFamily,i.defaultFontFamily),z=b.fontString(w,x,y),A=b.toRadians(d.labelRotation),B=Math.cos(A),C=(Math.sin(A),d.longestLabelWidth*B);h.fillStyle=p;var D=[];if(o){if(f=!1,m&&(C/=2),(C+j.autoSkipPadding)*d.ticks.length>d.width-(d.paddingLeft+d.paddingRight)&&(f=1+Math.floor((C+j.autoSkipPadding)*d.ticks.length/(d.width-(d.paddingLeft+d.paddingRight)))),g&&d.ticks.length>g)for(;!f||d.ticks.length/(f||1)>g;)f||(f=1),f+=1;n||(f=!1)}var E="right"===e.position?d.left:d.right-u,F="right"===e.position?d.left+u:d.right,G="bottom"===e.position?d.top:d.bottom-u,H="bottom"===e.position?d.top+u:d.bottom;if(b.each(d.ticks,function(a,g){if(void 0!==a&&null!==a){var h=d.ticks.length===g+1,i=f>1&&g%f>0||g%f===0&&g+f>=d.ticks.length;if((!i||h)&&void 0!==a&&null!==a){var l,n;g===("undefined"!=typeof d.zeroLineIndex?d.zeroLineIndex:0)?(l=k.zeroLineWidth,n=k.zeroLineColor):(l=b.getValueAtIndexOrDefault(k.lineWidth,g),n=b.getValueAtIndexOrDefault(k.color,g));var p,q,r,s,t,v,w,x,y,z,B,C="middle";if(o){m||(C="top"===e.position?"bottom":"top"),B=m?"right":"center";var I=d.getPixelForTick(g)+b.aliasPixel(l);y=d.getPixelForTick(g,k.offsetGridLines)+j.labelOffset,z=m?d.top+12:"top"===e.position?d.bottom-u:d.top+u,p=r=t=w=I,q=G,s=H,v=c.top,x=c.bottom}else{"left"===e.position?j.mirror?(y=d.right+j.padding,B="left"):(y=d.right-j.padding,B="right"):j.mirror?(y=d.left-j.padding,B="right"):(y=d.left+j.padding,B="left");var J=d.getPixelForTick(g);J+=b.aliasPixel(l),z=d.getPixelForTick(g,k.offsetGridLines),p=E,r=F,t=c.left,w=c.right,q=s=v=x=J}D.push({tx1:p,ty1:q,tx2:r,ty2:s,x1:t,y1:v,x2:w,y2:x,labelX:y,labelY:z,glWidth:l,glColor:n,rotation:-1*A,label:a,textBaseline:C,textAlign:B})}}}),b.each(D,function(a){if(k.display&&(h.lineWidth=a.glWidth,h.strokeStyle=a.glColor,h.beginPath(),k.drawTicks&&(h.moveTo(a.tx1,a.ty1),h.lineTo(a.tx2,a.ty2)),k.drawOnChartArea&&(h.moveTo(a.x1,a.y1),h.lineTo(a.x2,a.y2)),h.stroke()),j.display){h.save(),h.translate(a.labelX,a.labelY),h.rotate(a.rotation),h.font=t,h.textBaseline=a.textBaseline,h.textAlign=a.textAlign;var c=a.label;if(b.isArray(c))for(var d=0,e=0;d<c.length;++d)h.fillText(""+c[d],0,e),e+=1.5*q;else h.fillText(c,0,0);h.restore()}}),l.display){var I,J,K=0;if(o)I=d.left+(d.right-d.left)/2,J="bottom"===e.position?d.bottom-w/2:d.top+w/2;else{var L="left"===e.position;I=L?d.left+w/2:d.right-w/2,J=d.top+(d.bottom-d.top)/2,K=L?-.5*Math.PI:.5*Math.PI}h.save(),h.translate(I,J),h.rotate(K),h.textAlign="center",h.textBaseline="middle",h.fillStyle=v,h.font=z,h.fillText(l.labelString,0,0),h.restore()}if(k.drawBorder){h.lineWidth=b.getValueAtIndexOrDefault(k.lineWidth,0),h.strokeStyle=b.getValueAtIndexOrDefault(k.color,0);var M=d.left,N=d.right,O=d.top,P=d.bottom,Q=b.aliasPixel(h.lineWidth);o?(O=P="top"===e.position?d.bottom:d.top,O+=Q,P+=Q):(M=N="left"===e.position?d.right:d.left,M+=Q,N+=Q),h.beginPath(),h.moveTo(M,O),h.lineTo(N,P),h.stroke()}}}})}},{}],27:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.scaleService={constructors:{},defaults:{},registerScaleType:function(a,c,d){this.constructors[a]=c,this.defaults[a]=b.clone(d)},getScaleConstructor:function(a){return this.constructors.hasOwnProperty(a)?this.constructors[a]:void 0},getScaleDefaults:function(c){return this.defaults.hasOwnProperty(c)?b.scaleMerge(a.defaults.scale,this.defaults[c]):{}},updateScaleDefaults:function(a,c){var d=this.defaults;d.hasOwnProperty(a)&&(d[a]=b.extend(d[a],c))},addScalesToLayout:function(c){b.each(c.scales,function(b){a.layoutService.addBox(c,b)})}}}},{}],28:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers;a.defaults.global.title={display:!1,position:"top",fullWidth:!0,fontStyle:"bold",padding:10,text:""};var c=b.noop;a.Title=a.Element.extend({initialize:function(c){var d=this;b.extend(d,c),d.options=b.configMerge(a.defaults.global.title,c.options),d.legendHitBoxes=[]},beforeUpdate:function(){var c=this.chart.options;c&&c.title&&(this.options=b.configMerge(a.defaults.global.title,c.title))},update:function(a,b,c){var d=this;return d.beforeUpdate(),d.maxWidth=a,d.maxHeight=b,d.margins=c,d.beforeSetDimensions(),d.setDimensions(),d.afterSetDimensions(),d.beforeBuildLabels(),d.buildLabels(),d.afterBuildLabels(),d.beforeFit(),d.fit(),d.afterFit(),d.afterUpdate(),d.minSize},afterUpdate:c,beforeSetDimensions:c,setDimensions:function(){var a=this;a.isHorizontal()?(a.width=a.maxWidth,a.left=0,a.right=a.width):(a.height=a.maxHeight,a.top=0,a.bottom=a.height),a.paddingLeft=0,a.paddingTop=0,a.paddingRight=0,a.paddingBottom=0,a.minSize={width:0,height:0}},afterSetDimensions:c,beforeBuildLabels:c,buildLabels:c,afterBuildLabels:c,beforeFit:c,fit:function(){var c=this,d=(c.ctx,b.getValueOrDefault),e=c.options,f=a.defaults.global,g=e.display,h=d(e.fontSize,f.defaultFontSize),i=c.minSize;c.isHorizontal()?(i.width=c.maxWidth,i.height=g?h+2*e.padding:0):(i.width=g?h+2*e.padding:0,i.height=c.maxHeight),c.width=i.width,c.height=i.height},afterFit:c,isHorizontal:function(){var a=this.options.position;return"top"===a||"bottom"===a},draw:function(){var c=this,d=c.ctx,e=b.getValueOrDefault,f=c.options,g=a.defaults.global;if(f.display){var h,i,j=e(f.fontSize,g.defaultFontSize),k=e(f.fontStyle,g.defaultFontStyle),l=e(f.fontFamily,g.defaultFontFamily),m=b.fontString(j,k,l),n=0,o=c.top,p=c.left,q=c.bottom,r=c.right;d.fillStyle=e(f.fontColor,g.defaultFontColor),d.font=m,c.isHorizontal()?(h=p+(r-p)/2,i=o+(q-o)/2):(h="left"===f.position?p+j/2:r-j/2,i=o+(q-o)/2,n=Math.PI*("left"===f.position?-.5:.5)),d.save(),d.translate(h,i),d.rotate(n),d.textAlign="center",d.textBaseline="middle",d.fillText(f.text,0,0),d.restore()}}}),a.plugins.register({beforeInit:function(b){var c=b.options,d=c.title;d&&(b.titleBlock=new a.Title({ctx:b.chart.ctx,options:d,chart:b}),a.layoutService.addBox(b,b.titleBlock))}})}},{}],29:[function(a,b,c){"use strict";b.exports=function(a){function b(a,b){return b&&(e.isArray(b)?Array.prototype.push.apply(a,b):a.push(b)),a}function c(a){if(!a.length)return!1;var b,c,d=[],e=[];for(b=0,c=a.length;c>b;++b){var f=a[b];if(f&&f.hasValue()){var g=f.tooltipPosition();d.push(g.x),e.push(g.y)}}var h=0,i=0;for(b=0,c-d.length;c>b;++b)h+=d[b],i+=e[b];return{x:Math.round(h/d.length),y:Math.round(i/d.length)}}function d(a){var b=a._xScale,c=a._yScale||a._scale,d=a._index,e=a._datasetIndex;return{xLabel:b?b.getLabelForIndex(d,e):"",yLabel:c?c.getLabelForIndex(d,e):"",index:d,datasetIndex:e}}var e=a.helpers;a.defaults.global.tooltips={enabled:!0,custom:null,mode:"single",backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,yAlign:"center",xAlign:"center",caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",callbacks:{beforeTitle:e.noop,title:function(a,b){var c="",d=b.labels,e=d?d.length:0;if(a.length>0){var f=a[0];f.xLabel?c=f.xLabel:e>0&&f.index<e&&(c=d[f.index])}return c},afterTitle:e.noop,beforeBody:e.noop,beforeLabel:e.noop,label:function(a,b){var c=b.datasets[a.datasetIndex].label||"";return c+": "+a.yLabel},labelColor:function(a,b){var c=b.getDatasetMeta(a.datasetIndex),d=c.data[a.index],e=d._view;return{borderColor:e.borderColor,backgroundColor:e.backgroundColor}},afterLabel:e.noop,afterBody:e.noop,beforeFooter:e.noop,footer:e.noop,afterFooter:e.noop}},a.Tooltip=a.Element.extend({initialize:function(){var b=this,c=a.defaults.global,d=b._options,f=e.getValueOrDefault;e.extend(b,{_model:{xPadding:d.xPadding,yPadding:d.yPadding,xAlign:d.yAlign,yAlign:d.xAlign,bodyFontColor:d.bodyFontColor,_bodyFontFamily:f(d.bodyFontFamily,c.defaultFontFamily),_bodyFontStyle:f(d.bodyFontStyle,c.defaultFontStyle),_bodyAlign:d.bodyAlign,bodyFontSize:f(d.bodyFontSize,c.defaultFontSize),bodySpacing:d.bodySpacing,titleFontColor:d.titleFontColor,_titleFontFamily:f(d.titleFontFamily,c.defaultFontFamily),_titleFontStyle:f(d.titleFontStyle,c.defaultFontStyle),titleFontSize:f(d.titleFontSize,c.defaultFontSize),_titleAlign:d.titleAlign,titleSpacing:d.titleSpacing,titleMarginBottom:d.titleMarginBottom,footerFontColor:d.footerFontColor,_footerFontFamily:f(d.footerFontFamily,c.defaultFontFamily),_footerFontStyle:f(d.footerFontStyle,c.defaultFontStyle),footerFontSize:f(d.footerFontSize,c.defaultFontSize),_footerAlign:d.footerAlign,footerSpacing:d.footerSpacing,footerMarginTop:d.footerMarginTop,caretSize:d.caretSize,cornerRadius:d.cornerRadius,backgroundColor:d.backgroundColor,opacity:0,legendColorBackground:d.multiKeyBackground}})},getTitle:function(){var a=this,c=a._options,d=c.callbacks,e=d.beforeTitle.apply(a,arguments),f=d.title.apply(a,arguments),g=d.afterTitle.apply(a,arguments),h=[];return h=b(h,e),h=b(h,f),h=b(h,g)},getBeforeBody:function(){var a=this._options.callbacks.beforeBody.apply(this,arguments);return e.isArray(a)?a:void 0!==a?[a]:[]},getBody:function(a,c){var d=this,f=d._options.callbacks,g=[];return e.each(a,function(a){var e={before:[],lines:[],after:[]};b(e.before,f.beforeLabel.call(d,a,c)),b(e.lines,f.label.call(d,a,c)),b(e.after,f.afterLabel.call(d,a,c)),g.push(e)}),g},getAfterBody:function(){var a=this._options.callbacks.afterBody.apply(this,arguments);return e.isArray(a)?a:void 0!==a?[a]:[]},getFooter:function(){var a=this,c=a._options.callbacks,d=c.beforeFooter.apply(a,arguments),e=c.footer.apply(a,arguments),f=c.afterFooter.apply(a,arguments),g=[];return g=b(g,d),g=b(g,e),g=b(g,f)},update:function(a){var b,f,g=this,h=g._options,i=g._model,j=g._active,k=g._data,l=g._chartInstance;if(j.length){i.opacity=1;var m=[],n=c(j),o=[];for(b=0,f=j.length;f>b;++b)o.push(d(j[b]));h.itemSort&&(o=o.sort(h.itemSort)),j.length>1&&e.each(o,function(a){m.push(h.callbacks.labelColor.call(g,a,l))}),e.extend(i,{title:g.getTitle(o,k),beforeBody:g.getBeforeBody(o,k),body:g.getBody(o,k),afterBody:g.getAfterBody(o,k),footer:g.getFooter(o,k),x:Math.round(n.x),y:Math.round(n.y),caretPadding:e.getValueOrDefault(n.padding,2),labelColors:m});var p=g.getTooltipSize(i);g.determineAlignment(p),e.extend(i,g.getBackgroundPoint(i,p))}else g._model.opacity=0;return a&&h.custom&&h.custom.call(g,i),g},getTooltipSize:function(a){var b=this._chart.ctx,c={height:2*a.yPadding,width:0},d=a.body,f=d.reduce(function(a,b){return a+b.before.length+b.lines.length+b.after.length},0);f+=a.beforeBody.length+a.afterBody.length;var g=a.title.length,h=a.footer.length,i=a.titleFontSize,j=a.bodyFontSize,k=a.footerFontSize;c.height+=g*i,c.height+=(g-1)*a.titleSpacing,c.height+=g?a.titleMarginBottom:0,c.height+=f*j,c.height+=f?(f-1)*a.bodySpacing:0,c.height+=h?a.footerMarginTop:0,c.height+=h*k,c.height+=h?(h-1)*a.footerSpacing:0;var l=0,m=function(a){c.width=Math.max(c.width,b.measureText(a).width+l)};return b.font=e.fontString(i,a._titleFontStyle,a._titleFontFamily),e.each(a.title,m),b.font=e.fontString(j,a._bodyFontStyle,a._bodyFontFamily),e.each(a.beforeBody.concat(a.afterBody),m),l=d.length>1?j+2:0,e.each(d,function(a){e.each(a.before,m),e.each(a.lines,m),e.each(a.after,m)}),l=0,b.font=e.fontString(k,a._footerFontStyle,a._footerFontFamily),e.each(a.footer,m),c.width+=2*a.xPadding,c},determineAlignment:function(a){var b=this,c=b._model,d=b._chart,e=b._chartInstance.chartArea;c.y<a.height?c.yAlign="top":c.y>d.height-a.height&&(c.yAlign="bottom");var f,g,h,i,j,k=(e.left+e.right)/2,l=(e.top+e.bottom)/2;"center"===c.yAlign?(f=function(a){return k>=a},g=function(a){return a>k}):(f=function(b){return b<=a.width/2},g=function(b){return b>=d.width-a.width/2}),h=function(b){return b+a.width>d.width},i=function(b){return b-a.width<0},j=function(a){return l>=a?"top":"bottom"},f(c.x)?(c.xAlign="left",h(c.x)&&(c.xAlign="center",c.yAlign=j(c.y))):g(c.x)&&(c.xAlign="right",i(c.x)&&(c.xAlign="center",c.yAlign=j(c.y)))},getBackgroundPoint:function(a,b){var c={x:a.x,y:a.y},d=a.caretSize,e=a.caretPadding,f=a.cornerRadius,g=a.xAlign,h=a.yAlign,i=d+e,j=f+e;return"right"===g?c.x-=b.width:"center"===g&&(c.x-=b.width/2),"top"===h?c.y+=i:"bottom"===h?c.y-=b.height+i:c.y-=b.height/2,"center"===h?"left"===g?c.x+=i:"right"===g&&(c.x-=i):"left"===g?c.x-=j:"right"===g&&(c.x+=j),c},drawCaret:function(a,b,c,d){var f,g,h,i,j,k,l=this._view,m=this._chart.ctx,n=l.caretSize,o=l.cornerRadius,p=l.xAlign,q=l.yAlign,r=a.x,s=a.y,t=b.width,u=b.height;"center"===q?("left"===p?(f=r,g=f-n,h=f):(f=r+t,g=f+n,h=f),j=s+u/2,i=j-n,k=j+n):("left"===p?(f=r+o,g=f+n,h=g+n):"right"===p?(f=r+t-o,g=f-n,h=g-n):(g=r+t/2,f=g-n,h=g+n),"top"===q?(i=s,j=i-n,k=i):(i=s+u,j=i+n,k=i));var v=e.color(l.backgroundColor);m.fillStyle=v.alpha(c*v.alpha()).rgbString(),m.beginPath(),m.moveTo(f,i),m.lineTo(g,j),m.lineTo(h,k),m.closePath(),m.fill()},drawTitle:function(a,b,c,d){var f=b.title;if(f.length){c.textAlign=b._titleAlign,c.textBaseline="top";var g=b.titleFontSize,h=b.titleSpacing,i=e.color(b.titleFontColor);c.fillStyle=i.alpha(d*i.alpha()).rgbString(),c.font=e.fontString(g,b._titleFontStyle,b._titleFontFamily);var j,k;for(j=0,k=f.length;k>j;++j)c.fillText(f[j],a.x,a.y),a.y+=g+h,j+1===f.length&&(a.y+=b.titleMarginBottom-h)}},drawBody:function(a,b,c,d){var f=b.bodyFontSize,g=b.bodySpacing,h=b.body;c.textAlign=b._bodyAlign,c.textBaseline="top";var i=e.color(b.bodyFontColor),j=i.alpha(d*i.alpha()).rgbString();c.fillStyle=j,c.font=e.fontString(f,b._bodyFontStyle,b._bodyFontFamily);var k=0,l=function(b){c.fillText(b,a.x+k,a.y),a.y+=f+g};e.each(b.beforeBody,l);var m=h.length>1;k=m?f+2:0,e.each(h,function(g,h){e.each(g.before,l),e.each(g.lines,function(g){m&&(c.fillStyle=e.color(b.legendColorBackground).alpha(d).rgbaString(),c.fillRect(a.x,a.y,f,f),c.strokeStyle=e.color(b.labelColors[h].borderColor).alpha(d).rgbaString(),c.strokeRect(a.x,a.y,f,f),c.fillStyle=e.color(b.labelColors[h].backgroundColor).alpha(d).rgbaString(),c.fillRect(a.x+1,a.y+1,f-2,f-2),c.fillStyle=j),l(g)}),e.each(g.after,l)}),k=0,e.each(b.afterBody,l),a.y-=g},drawFooter:function(a,b,c,d){var f=b.footer;if(f.length){a.y+=b.footerMarginTop,c.textAlign=b._footerAlign,c.textBaseline="top";var g=e.color(b.footerFontColor);c.fillStyle=g.alpha(d*g.alpha()).rgbString(),c.font=e.fontString(b.footerFontSize,b._footerFontStyle,b._footerFontFamily),e.each(f,function(d){c.fillText(d,a.x,a.y),a.y+=b.footerFontSize+b.footerSpacing})}},draw:function(){var a=this._chart.ctx,b=this._view;if(0!==b.opacity){var c=this.getTooltipSize(b),d={x:b.x,y:b.y},f=Math.abs(b.opacity<.001)?0:b.opacity;if(this._options.enabled){var g=e.color(b.backgroundColor);a.fillStyle=g.alpha(f*g.alpha()).rgbString(),e.drawRoundedRectangle(a,d.x,d.y,c.width,c.height,b.cornerRadius),a.fill(),this.drawCaret(d,c,f,b.caretPadding),d.x+=b.xPadding,d.y+=b.yPadding,this.drawTitle(d,b,a,f),this.drawBody(d,b,a,f),this.drawFooter(d,b,a,f)}}}})}},{}],30:[function(a,b,c){"use strict";b.exports=function(a,b){var c=a.helpers,d=a.defaults.global;d.elements.arc={backgroundColor:d.defaultColor,borderColor:"#fff",borderWidth:2},a.elements.Arc=a.Element.extend({inLabelRange:function(a){var b=this._view;return b?Math.pow(a-b.x,2)<Math.pow(b.radius+b.hoverRadius,2):!1},inRange:function(a,b){var d=this._view;if(d){for(var e=c.getAngleFromPoint(d,{x:a,y:b}),f=e.angle,g=e.distance,h=d.startAngle,i=d.endAngle;h>i;)i+=2*Math.PI;for(;f>i;)f-=2*Math.PI;for(;h>f;)f+=2*Math.PI;var j=f>=h&&i>=f,k=g>=d.innerRadius&&g<=d.outerRadius;return j&&k}return!1},tooltipPosition:function(){var a=this._view,b=a.startAngle+(a.endAngle-a.startAngle)/2,c=(a.outerRadius-a.innerRadius)/2+a.innerRadius;return{x:a.x+Math.cos(b)*c,y:a.y+Math.sin(b)*c}},draw:function(){var a=this._chart.ctx,b=this._view,c=b.startAngle,d=b.endAngle;a.beginPath(),a.arc(b.x,b.y,b.outerRadius,c,d),a.arc(b.x,b.y,b.innerRadius,d,c,!0),a.closePath(),a.strokeStyle=b.borderColor,a.lineWidth=b.borderWidth,a.fillStyle=b.backgroundColor,a.fill(),a.lineJoin="bevel",b.borderWidth&&a.stroke()}})}},{}],31:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c=a.defaults.global;a.defaults.global.elements.line={tension:.4,backgroundColor:c.defaultColor,borderWidth:3,borderColor:c.defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",fill:!0},a.elements.Line=a.Element.extend({lineToNextPoint:function(a,b,c,d,e){var f=this,g=f._chart.ctx,h=f._view?f._view.spanGaps:!1;b._view.skip&&!h?d.call(f,a,b,c):a._view.skip&&!h?e.call(f,a,b,c):0===b._view.tension?g.lineTo(b._view.x,b._view.y):g.bezierCurveTo(a._view.controlPointNextX,a._view.controlPointNextY,b._view.controlPointPreviousX,b._view.controlPointPreviousY,b._view.x,b._view.y)},draw:function(){function a(a){g._view.skip||h._view.skip?a&&f.lineTo(d._view.scaleZero.x,d._view.scaleZero.y):f.bezierCurveTo(h._view.controlPointNextX,h._view.controlPointNextY,g._view.controlPointPreviousX,g._view.controlPointPreviousY,g._view.x,g._view.y)}var d=this,e=d._view,f=d._chart.ctx,g=d._children[0],h=d._children[d._children.length-1];f.save(),d._children.length>0&&e.fill&&(f.beginPath(),b.each(d._children,function(a,c){var g=b.previousItem(d._children,c),h=b.nextItem(d._children,c);0===c?(d._loop?f.moveTo(e.scaleZero.x,e.scaleZero.y):f.moveTo(a._view.x,e.scaleZero),a._view.skip?d._loop||f.moveTo(h._view.x,d._view.scaleZero):f.lineTo(a._view.x,a._view.y)):d.lineToNextPoint(g,a,h,function(a,b,c){d._loop?f.lineTo(d._view.scaleZero.x,d._view.scaleZero.y):(f.lineTo(a._view.x,d._view.scaleZero),f.moveTo(c._view.x,d._view.scaleZero))},function(a,b){f.lineTo(b._view.x,b._view.y)})},d),d._loop?a(!0):(f.lineTo(d._children[d._children.length-1]._view.x,e.scaleZero),f.lineTo(d._children[0]._view.x,e.scaleZero)),f.fillStyle=e.backgroundColor||c.defaultColor,f.closePath(),f.fill());var i=c.elements.line;f.lineCap=e.borderCapStyle||i.borderCapStyle,f.setLineDash&&f.setLineDash(e.borderDash||i.borderDash),f.lineDashOffset=e.borderDashOffset||i.borderDashOffset,f.lineJoin=e.borderJoinStyle||i.borderJoinStyle,f.lineWidth=e.borderWidth||i.borderWidth,f.strokeStyle=e.borderColor||c.defaultColor,f.beginPath(),b.each(d._children,function(a,c){var e=b.previousItem(d._children,c),g=b.nextItem(d._children,c);0===c?f.moveTo(a._view.x,a._view.y):d.lineToNextPoint(e,a,g,function(a,b,c){f.moveTo(c._view.x,c._view.y)},function(a,b){f.moveTo(b._view.x,b._view.y)})},d),d._loop&&d._children.length>0&&a(),f.stroke(),f.restore()}})}},{}],32:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c=a.defaults.global,d=c.defaultColor;c.elements.point={radius:3,pointStyle:"circle",backgroundColor:d,borderWidth:1,borderColor:d,hitRadius:1,hoverRadius:4,hoverBorderWidth:1},a.elements.Point=a.Element.extend({inRange:function(a,b){var c=this._view;return c?Math.pow(a-c.x,2)+Math.pow(b-c.y,2)<Math.pow(c.hitRadius+c.radius,2):!1},inLabelRange:function(a){var b=this._view;return b?Math.pow(a-b.x,2)<Math.pow(b.radius+b.hitRadius,2):!1},tooltipPosition:function(){var a=this._view;return{x:a.x,y:a.y,padding:a.radius+a.borderWidth}},draw:function(){var a,e,f,g,h,i,j=this._view,k=this._chart.ctx,l=j.pointStyle,m=j.radius,n=j.x,o=j.y;if(!j.skip){if("object"==typeof l&&(a=l.toString(),"[object HTMLImageElement]"===a||"[object HTMLCanvasElement]"===a))return void k.drawImage(l,n-l.width/2,o-l.height/2);if(!(isNaN(m)||0>=m)){switch(k.strokeStyle=j.borderColor||d,k.lineWidth=b.getValueOrDefault(j.borderWidth,c.elements.point.borderWidth),k.fillStyle=j.backgroundColor||d,l){default:k.beginPath(),k.arc(n,o,m,0,2*Math.PI),k.closePath(),k.fill();
break;case"triangle":k.beginPath(),e=3*m/Math.sqrt(3),h=e*Math.sqrt(3)/2,k.moveTo(n-e/2,o+h/3),k.lineTo(n+e/2,o+h/3),k.lineTo(n,o-2*h/3),k.closePath(),k.fill();break;case"rect":i=1/Math.SQRT2*m,k.fillRect(n-i,o-i,2*i,2*i),k.strokeRect(n-i,o-i,2*i,2*i);break;case"rectRot":i=1/Math.SQRT2*m,k.beginPath(),k.moveTo(n-i,o),k.lineTo(n,o+i),k.lineTo(n+i,o),k.lineTo(n,o-i),k.closePath(),k.fill();break;case"cross":k.beginPath(),k.moveTo(n,o+m),k.lineTo(n,o-m),k.moveTo(n-m,o),k.lineTo(n+m,o),k.closePath();break;case"crossRot":k.beginPath(),f=Math.cos(Math.PI/4)*m,g=Math.sin(Math.PI/4)*m,k.moveTo(n-f,o-g),k.lineTo(n+f,o+g),k.moveTo(n-f,o+g),k.lineTo(n+f,o-g),k.closePath();break;case"star":k.beginPath(),k.moveTo(n,o+m),k.lineTo(n,o-m),k.moveTo(n-m,o),k.lineTo(n+m,o),f=Math.cos(Math.PI/4)*m,g=Math.sin(Math.PI/4)*m,k.moveTo(n-f,o-g),k.lineTo(n+f,o+g),k.moveTo(n-f,o+g),k.lineTo(n+f,o-g),k.closePath();break;case"line":k.beginPath(),k.moveTo(n-m,o),k.lineTo(n+m,o),k.closePath();break;case"dash":k.beginPath(),k.moveTo(n,o),k.lineTo(n+m,o),k.closePath()}k.stroke()}}}})}},{}],33:[function(a,b,c){"use strict";b.exports=function(a){var b=(a.helpers,a.defaults.global);b.elements.rectangle={backgroundColor:b.defaultColor,borderWidth:0,borderColor:b.defaultColor,borderSkipped:"bottom"},a.elements.Rectangle=a.Element.extend({draw:function(){function a(a){return i[(k+a)%4]}var b=this._chart.ctx,c=this._view,d=c.width/2,e=c.x-d,f=c.x+d,g=c.base-(c.base-c.y),h=c.borderWidth/2;c.borderWidth&&(e+=h,f-=h,g+=h),b.beginPath(),b.fillStyle=c.backgroundColor,b.strokeStyle=c.borderColor,b.lineWidth=c.borderWidth;var i=[[e,c.base],[e,g],[f,g],[f,c.base]],j=["bottom","left","top","right"],k=j.indexOf(c.borderSkipped,0);-1===k&&(k=0),b.moveTo.apply(b,a(0));for(var l=1;4>l;l++)b.lineTo.apply(b,a(l));b.fill(),c.borderWidth&&b.stroke()},height:function(){var a=this._view;return a.base-a.y},inRange:function(a,b){var c=this._view;return c?c.y<c.base?a>=c.x-c.width/2&&a<=c.x+c.width/2&&b>=c.y&&b<=c.base:a>=c.x-c.width/2&&a<=c.x+c.width/2&&b>=c.base&&b<=c.y:!1},inLabelRange:function(a){var b=this._view;return b?a>=b.x-b.width/2&&a<=b.x+b.width/2:!1},tooltipPosition:function(){var a=this._view;return{x:a.x,y:a.y}}})}},{}],34:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c={position:"bottom"},d=a.Scale.extend({determineDataLimits:function(){var a=this;a.minIndex=0,a.maxIndex=a.chart.data.labels.length-1;var c;void 0!==a.options.ticks.min&&(c=b.indexOf(a.chart.data.labels,a.options.ticks.min),a.minIndex=-1!==c?c:a.minIndex),void 0!==a.options.ticks.max&&(c=b.indexOf(a.chart.data.labels,a.options.ticks.max),a.maxIndex=-1!==c?c:a.maxIndex),a.min=a.chart.data.labels[a.minIndex],a.max=a.chart.data.labels[a.maxIndex]},buildTicks:function(a){var b=this;b.ticks=0===b.minIndex&&b.maxIndex===b.chart.data.labels.length-1?b.chart.data.labels:b.chart.data.labels.slice(b.minIndex,b.maxIndex+1)},getLabelForIndex:function(a,b){return this.ticks[a]},getPixelForValue:function(a,b,c,d){var e=this,f=Math.max(e.maxIndex+1-e.minIndex-(e.options.gridLines.offsetGridLines?0:1),1);if(e.isHorizontal()){var g=e.width-(e.paddingLeft+e.paddingRight),h=g/f,i=h*(b-e.minIndex)+e.paddingLeft;return e.options.gridLines.offsetGridLines&&d&&(i+=h/2),e.left+Math.round(i)}var j=e.height-(e.paddingTop+e.paddingBottom),k=j/f,l=k*(b-e.minIndex)+e.paddingTop;return e.options.gridLines.offsetGridLines&&d&&(l+=k/2),e.top+Math.round(l)},getPixelForTick:function(a,b){return this.getPixelForValue(this.ticks[a],a+this.minIndex,null,b)},getValueForPixel:function(a){var b,c=this,d=Math.max(c.ticks.length-(c.options.gridLines.offsetGridLines?0:1),1),e=c.isHorizontal(),f=e?c.width-(c.paddingLeft+c.paddingRight):c.height-(c.paddingTop+c.paddingBottom),g=f/d;return c.options.gridLines.offsetGridLines&&(a-=g/2),a-=e?c.paddingLeft:c.paddingTop,b=0>=a?0:Math.round(a/g)}});a.scaleService.registerScaleType("category",d,c)}},{}],35:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c={position:"left",ticks:{callback:function(a,c,d){var e=d.length>3?d[2]-d[1]:d[1]-d[0];Math.abs(e)>1&&a!==Math.floor(a)&&(e=a-Math.floor(a));var f=b.log10(Math.abs(e)),g="";if(0!==a){var h=-1*Math.floor(f);h=Math.max(Math.min(h,20),0),g=a.toFixed(h)}else g="0";return g}}},d=a.LinearScaleBase.extend({determineDataLimits:function(){function a(a){return h?a.xAxisID===c.id:a.yAxisID===c.id}var c=this,d=c.options,e=(d.ticks,c.chart),f=e.data,g=f.datasets,h=c.isHorizontal();if(c.min=null,c.max=null,d.stacked){var i={},j=!1,k=!1;b.each(g,function(f,g){var h=e.getDatasetMeta(g);void 0===i[h.type]&&(i[h.type]={positiveValues:[],negativeValues:[]});var l=i[h.type].positiveValues,m=i[h.type].negativeValues;e.isDatasetVisible(g)&&a(h)&&b.each(f.data,function(a,b){var e=+c.getRightValue(a);isNaN(e)||h.data[b].hidden||(l[b]=l[b]||0,m[b]=m[b]||0,d.relativePoints?l[b]=100:0>e?(k=!0,m[b]+=e):(j=!0,l[b]+=e))})}),b.each(i,function(a){var d=a.positiveValues.concat(a.negativeValues),e=b.min(d),f=b.max(d);c.min=null===c.min?e:Math.min(c.min,e),c.max=null===c.max?f:Math.max(c.max,f)})}else b.each(g,function(d,f){var g=e.getDatasetMeta(f);e.isDatasetVisible(f)&&a(g)&&b.each(d.data,function(a,b){var d=+c.getRightValue(a);isNaN(d)||g.data[b].hidden||(null===c.min?c.min=d:d<c.min&&(c.min=d),null===c.max?c.max=d:d>c.max&&(c.max=d))})});this.handleTickRangeOptions()},getTickLimit:function(){var c,d=this,e=d.options.ticks;if(d.isHorizontal())c=Math.min(e.maxTicksLimit?e.maxTicksLimit:11,Math.ceil(d.width/50));else{var f=b.getValueOrDefault(e.fontSize,a.defaults.global.defaultFontSize);c=Math.min(e.maxTicksLimit?e.maxTicksLimit:11,Math.ceil(d.height/(2*f)))}return c},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(a,b){return+this.getRightValue(this.chart.data.datasets[b].data[a])},getPixelForValue:function(a,b,c,d){var e,f,g=this,h=g.paddingLeft,i=g.paddingBottom,j=g.start,k=+g.getRightValue(a),l=g.end-j;return g.isHorizontal()?(f=g.width-(h+g.paddingRight),e=g.left+f/l*(k-j),Math.round(e+h)):(f=g.height-(g.paddingTop+i),e=g.bottom-i-f/l*(k-j),Math.round(e))},getValueForPixel:function(a){var b=this,c=b.isHorizontal(),d=b.paddingLeft,e=b.paddingBottom,f=c?b.width-(d+b.paddingRight):b.height-(b.paddingTop+e),g=(c?a-b.left-d:b.bottom-e-a)/f;return b.start+(b.end-b.start)*g},getPixelForTick:function(a,b){return this.getPixelForValue(this.ticksAsNumbers[a],null,null,b)}});a.scaleService.registerScaleType("linear",d,c)}},{}],36:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c=b.noop;a.LinearScaleBase=a.Scale.extend({handleTickRangeOptions:function(){var a=this,c=a.options,d=c.ticks;if(d.beginAtZero){var e=b.sign(a.min),f=b.sign(a.max);0>e&&0>f?a.max=0:e>0&&f>0&&(a.min=0)}void 0!==d.min?a.min=d.min:void 0!==d.suggestedMin&&(a.min=Math.min(a.min,d.suggestedMin)),void 0!==d.max?a.max=d.max:void 0!==d.suggestedMax&&(a.max=Math.max(a.max,d.suggestedMax)),a.min===a.max&&(a.max++,d.beginAtZero||a.min--)},getTickLimit:c,handleDirectionalChanges:c,buildTicks:function(){var a=this,c=a.options,d=c.ticks,e=b.getValueOrDefault,f=(a.isHorizontal(),a.ticks=[]),g=a.getTickLimit();g=Math.max(2,g);var h,i=d.fixedStepSize&&d.fixedStepSize>0||d.stepSize&&d.stepSize>0;if(i)h=e(d.fixedStepSize,d.stepSize);else{var j=b.niceNum(a.max-a.min,!1);h=b.niceNum(j/(g-1),!0)}var k=Math.floor(a.min/h)*h,l=Math.ceil(a.max/h)*h,m=(l-k)/h;m=b.almostEquals(m,Math.round(m),h/1e3)?Math.round(m):Math.ceil(m),f.push(void 0!==d.min?d.min:k);for(var n=1;m>n;++n)f.push(k+n*h);f.push(void 0!==d.max?d.max:l),a.handleDirectionalChanges(),a.max=b.max(f),a.min=b.min(f),d.reverse?(f.reverse(),a.start=a.max,a.end=a.min):(a.start=a.min,a.end=a.max)},convertTicksToLabels:function(){var b=this;b.ticksAsNumbers=b.ticks.slice(),b.zeroLineIndex=b.ticks.indexOf(0),a.Scale.prototype.convertTicksToLabels.call(b)}})}},{}],37:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c={position:"left",ticks:{callback:function(a,c,d){var e=a/Math.pow(10,Math.floor(b.log10(a)));return 1===e||2===e||5===e||0===c||c===d.length-1?a.toExponential():""}}},d=a.Scale.extend({determineDataLimits:function(){function a(a){return j?a.xAxisID===c.id:a.yAxisID===c.id}var c=this,d=c.options,e=d.ticks,f=c.chart,g=f.data,h=g.datasets,i=b.getValueOrDefault,j=c.isHorizontal();if(c.min=null,c.max=null,d.stacked){var k={};b.each(h,function(e,g){var h=f.getDatasetMeta(g);f.isDatasetVisible(g)&&a(h)&&(void 0===k[h.type]&&(k[h.type]=[]),b.each(e.data,function(a,b){var e=k[h.type],f=+c.getRightValue(a);isNaN(f)||h.data[b].hidden||(e[b]=e[b]||0,d.relativePoints?e[b]=100:e[b]+=f)}))}),b.each(k,function(a){var d=b.min(a),e=b.max(a);c.min=null===c.min?d:Math.min(c.min,d),c.max=null===c.max?e:Math.max(c.max,e)})}else b.each(h,function(d,e){var g=f.getDatasetMeta(e);f.isDatasetVisible(e)&&a(g)&&b.each(d.data,function(a,b){var d=+c.getRightValue(a);isNaN(d)||g.data[b].hidden||(null===c.min?c.min=d:d<c.min&&(c.min=d),null===c.max?c.max=d:d>c.max&&(c.max=d))})});c.min=i(e.min,c.min),c.max=i(e.max,c.max),c.min===c.max&&(0!==c.min&&null!==c.min?(c.min=Math.pow(10,Math.floor(b.log10(c.min))-1),c.max=Math.pow(10,Math.floor(b.log10(c.max))+1)):(c.min=1,c.max=10))},buildTicks:function(){for(var a=this,c=a.options,d=c.ticks,e=b.getValueOrDefault,f=a.ticks=[],g=e(d.min,Math.pow(10,Math.floor(b.log10(a.min))));g<a.max;){f.push(g);var h=Math.floor(b.log10(g)),i=Math.floor(g/Math.pow(10,h))+1;10===i&&(i=1,++h),g=i*Math.pow(10,h)}var j=e(d.max,g);f.push(j),a.isHorizontal()||f.reverse(),a.max=b.max(f),a.min=b.min(f),d.reverse?(f.reverse(),a.start=a.max,a.end=a.min):(a.start=a.min,a.end=a.max)},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),a.Scale.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(a,b){return+this.getRightValue(this.chart.data.datasets[b].data[a])},getPixelForTick:function(a,b){return this.getPixelForValue(this.tickValues[a],null,null,b)},getPixelForValue:function(a,c,d,e){var f,g,h=this,i=h.start,j=+h.getRightValue(a),k=b.log10(h.end)-b.log10(i),l=h.paddingTop,m=h.paddingBottom,n=h.paddingLeft;return h.isHorizontal()?0===j?g=h.left+n:(f=h.width-(n+h.paddingRight),g=h.left+f/k*(b.log10(j)-b.log10(i)),g+=n):0===j?g=h.top+l:(f=h.height-(l+m),g=h.bottom-m-f/k*(b.log10(j)-b.log10(i))),g},getValueForPixel:function(a){var c,d,e=this,f=b.log10(e.end)-b.log10(e.start);return e.isHorizontal()?(d=e.width-(e.paddingLeft+e.paddingRight),c=e.start*Math.pow(10,(a-e.left-e.paddingLeft)*f/d)):(d=e.height-(e.paddingTop+e.paddingBottom),c=Math.pow(10,(e.bottom-e.paddingBottom-a)*f/d)/e.start),c}});a.scaleService.registerScaleType("logarithmic",d,c)}},{}],38:[function(a,b,c){"use strict";b.exports=function(a){var b=a.helpers,c=a.defaults.global,d={display:!0,animate:!0,lineArc:!1,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2},pointLabels:{fontSize:10,callback:function(a){return a}}},e=a.LinearScaleBase.extend({getValueCount:function(){return this.chart.data.labels.length},setDimensions:function(){var a=this,d=a.options,e=d.ticks;a.width=a.maxWidth,a.height=a.maxHeight,a.xCenter=Math.round(a.width/2),a.yCenter=Math.round(a.height/2);var f=b.min([a.height,a.width]),g=b.getValueOrDefault(e.fontSize,c.defaultFontSize);a.drawingArea=d.display?f/2-(g/2+e.backdropPaddingY):f/2},determineDataLimits:function(){var a=this,c=a.chart;a.min=null,a.max=null,b.each(c.data.datasets,function(d,e){if(c.isDatasetVisible(e)){var f=c.getDatasetMeta(e);b.each(d.data,function(b,c){var d=+a.getRightValue(b);isNaN(d)||f.data[c].hidden||(null===a.min?a.min=d:d<a.min&&(a.min=d),null===a.max?a.max=d:d>a.max&&(a.max=d))})}}),a.handleTickRangeOptions()},getTickLimit:function(){var a=this.options.ticks,d=b.getValueOrDefault(a.fontSize,c.defaultFontSize);return Math.min(a.maxTicksLimit?a.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*d)))},convertTicksToLabels:function(){var b=this;a.LinearScaleBase.prototype.convertTicksToLabels.call(b),b.pointLabels=b.chart.data.labels.map(b.options.pointLabels.callback,b)},getLabelForIndex:function(a,b){return+this.getRightValue(this.chart.data.datasets[b].data[a])},fit:function(){var a,d,e,f,g,h,i,j,k,l,m,n,o=this.options.pointLabels,p=b.getValueOrDefault(o.fontSize,c.defaultFontSize),q=b.getValueOrDefault(o.fontStyle,c.defaultFontStyle),r=b.getValueOrDefault(o.fontFamily,c.defaultFontFamily),s=b.fontString(p,q,r),t=b.min([this.height/2-p-5,this.width/2]),u=this.width,v=0;for(this.ctx.font=s,d=0;d<this.getValueCount();d++)a=this.getPointPosition(d,t),e=this.ctx.measureText(this.pointLabels[d]?this.pointLabels[d]:"").width+5,0===d||d===this.getValueCount()/2?(f=e/2,a.x+f>u&&(u=a.x+f,g=d),a.x-f<v&&(v=a.x-f,i=d)):d<this.getValueCount()/2?a.x+e>u&&(u=a.x+e,g=d):d>this.getValueCount()/2&&a.x-e<v&&(v=a.x-e,i=d);k=v,l=Math.ceil(u-this.width),h=this.getIndexAngle(g),j=this.getIndexAngle(i),m=l/Math.sin(h+Math.PI/2),n=k/Math.sin(j+Math.PI/2),m=b.isNumber(m)?m:0,n=b.isNumber(n)?n:0,this.drawingArea=Math.round(t-(n+m)/2),this.setCenterPoint(n,m)},setCenterPoint:function(a,b){var c=this,d=c.width-b-c.drawingArea,e=a+c.drawingArea;c.xCenter=Math.round((e+d)/2+c.left),c.yCenter=Math.round(c.height/2+c.top)},getIndexAngle:function(a){var b=2*Math.PI/this.getValueCount();return a*b-Math.PI/2},getDistanceFromCenterForValue:function(a){var b=this;if(null===a)return 0;var c=b.drawingArea/(b.max-b.min);return b.options.reverse?(b.max-a)*c:(a-b.min)*c},getPointPosition:function(a,b){var c=this,d=c.getIndexAngle(a);return{x:Math.round(Math.cos(d)*b)+c.xCenter,y:Math.round(Math.sin(d)*b)+c.yCenter}},getPointPositionForValue:function(a,b){return this.getPointPosition(a,this.getDistanceFromCenterForValue(b))},getBasePosition:function(){var a=this,b=a.min,c=a.max;return a.getPointPositionForValue(0,a.beginAtZero?0:0>b&&0>c?c:b>0&&c>0?b:0)},draw:function(){var a=this,d=a.options,e=d.gridLines,f=d.ticks,g=d.angleLines,h=d.pointLabels,i=b.getValueOrDefault;if(d.display){var j=a.ctx,k=i(f.fontSize,c.defaultFontSize),l=i(f.fontStyle,c.defaultFontStyle),m=i(f.fontFamily,c.defaultFontFamily),n=b.fontString(k,l,m);if(b.each(a.ticks,function(g,h){if(h>0||d.reverse){var l=a.getDistanceFromCenterForValue(a.ticksAsNumbers[h]),m=a.yCenter-l;if(e.display&&0!==h)if(j.strokeStyle=b.getValueAtIndexOrDefault(e.color,h-1),j.lineWidth=b.getValueAtIndexOrDefault(e.lineWidth,h-1),d.lineArc)j.beginPath(),j.arc(a.xCenter,a.yCenter,l,0,2*Math.PI),j.closePath(),j.stroke();else{j.beginPath();for(var o=0;o<a.getValueCount();o++){var p=a.getPointPosition(o,l);0===o?j.moveTo(p.x,p.y):j.lineTo(p.x,p.y)}j.closePath(),j.stroke()}if(f.display){var q=i(f.fontColor,c.defaultFontColor);if(j.font=n,f.showLabelBackdrop){var r=j.measureText(g).width;j.fillStyle=f.backdropColor,j.fillRect(a.xCenter-r/2-f.backdropPaddingX,m-k/2-f.backdropPaddingY,r+2*f.backdropPaddingX,k+2*f.backdropPaddingY)}j.textAlign="center",j.textBaseline="middle",j.fillStyle=q,j.fillText(g,a.xCenter,m)}}}),!d.lineArc){j.lineWidth=g.lineWidth,j.strokeStyle=g.color;for(var o=a.getDistanceFromCenterForValue(d.reverse?a.min:a.max),p=i(h.fontSize,c.defaultFontSize),q=i(h.fontStyle,c.defaultFontStyle),r=i(h.fontFamily,c.defaultFontFamily),s=b.fontString(p,q,r),t=a.getValueCount()-1;t>=0;t--){if(g.display){var u=a.getPointPosition(t,o);j.beginPath(),j.moveTo(a.xCenter,a.yCenter),j.lineTo(u.x,u.y),j.stroke(),j.closePath()}var v=a.getPointPosition(t,o+5),w=i(h.fontColor,c.defaultFontColor);j.font=s,j.fillStyle=w;var x=a.pointLabels,y=x.length,z=x.length/2,A=z/2,B=A>t||t>y-A,C=t===A||t===y-A;0===t?j.textAlign="center":t===z?j.textAlign="center":z>t?j.textAlign="left":j.textAlign="right",C?j.textBaseline="middle":B?j.textBaseline="bottom":j.textBaseline="top",j.fillText(x[t]?x[t]:"",v.x,v.y)}}}}});a.scaleService.registerScaleType("radialLinear",e,d)}},{}],39:[function(a,b,c){"use strict";var d=a("moment");d="function"==typeof d?d:window.moment,b.exports=function(a){var b=a.helpers,c={units:[{name:"millisecond",steps:[1,2,5,10,20,50,100,250,500]},{name:"second",steps:[1,2,5,10,30]},{name:"minute",steps:[1,2,5,10,30]},{name:"hour",steps:[1,2,3,6,12]},{name:"day",steps:[1,2,5]},{name:"week",maxStep:4},{name:"month",maxStep:3},{name:"quarter",maxStep:4},{name:"year",maxStep:!1}]},e={position:"bottom",time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm:ss a",hour:"MMM D, hA",day:"ll",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},ticks:{autoSkip:!1}},f=a.Scale.extend({initialize:function(){if(!d)throw new Error("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com");a.Scale.prototype.initialize.call(this)},getLabelMoment:function(a,b){return this.labelMoments[a][b]},getMomentStartOf:function(a){var b=this;return"week"===b.options.time.unit&&b.options.time.isoWeekday!==!1?a.clone().startOf("isoWeek").isoWeekday(b.options.time.isoWeekday):a.clone().startOf(b.tickUnit)},determineDataLimits:function(){var a=this;a.labelMoments=[];var c=[];a.chart.data.labels&&a.chart.data.labels.length>0?(b.each(a.chart.data.labels,function(b,d){var e=a.parseTime(b);e.isValid()&&(a.options.time.round&&e.startOf(a.options.time.round),c.push(e))},a),a.firstTick=d.min.call(a,c),a.lastTick=d.max.call(a,c)):(a.firstTick=null,a.lastTick=null),b.each(a.chart.data.datasets,function(e,f){var g=[],h=a.chart.isDatasetVisible(f);"object"==typeof e.data[0]&&null!==e.data[0]?b.each(e.data,function(b,c){var e=a.parseTime(a.getRightValue(b));e.isValid()&&(a.options.time.round&&e.startOf(a.options.time.round),g.push(e),h&&(a.firstTick=null!==a.firstTick?d.min(a.firstTick,e):e,a.lastTick=null!==a.lastTick?d.max(a.lastTick,e):e))},a):g=c,a.labelMoments.push(g)},a),a.options.time.min&&(a.firstTick=a.parseTime(a.options.time.min)),a.options.time.max&&(a.lastTick=a.parseTime(a.options.time.max)),a.firstTick=(a.firstTick||d()).clone(),a.lastTick=(a.lastTick||d()).clone()},buildTicks:function(d){var e=this;e.ctx.save();var f=b.getValueOrDefault(e.options.ticks.fontSize,a.defaults.global.defaultFontSize),g=b.getValueOrDefault(e.options.ticks.fontStyle,a.defaults.global.defaultFontStyle),h=b.getValueOrDefault(e.options.ticks.fontFamily,a.defaults.global.defaultFontFamily),i=b.fontString(f,g,h);if(e.ctx.font=i,e.ticks=[],e.unitScale=1,e.scaleSizeInUnits=0,e.options.time.unit)e.tickUnit=e.options.time.unit||"day",e.displayFormat=e.options.time.displayFormats[e.tickUnit],e.scaleSizeInUnits=e.lastTick.diff(e.firstTick,e.tickUnit,!0),e.unitScale=b.getValueOrDefault(e.options.time.unitStepSize,1);else{var j=e.isHorizontal()?e.width-(e.paddingLeft+e.paddingRight):e.height-(e.paddingTop+e.paddingBottom),k=e.tickFormatFunction(e.firstTick,0,[]),l=e.ctx.measureText(k).width,m=Math.cos(b.toRadians(e.options.ticks.maxRotation)),n=Math.sin(b.toRadians(e.options.ticks.maxRotation));l=l*m+f*n;var o=j/l;e.tickUnit="millisecond",e.scaleSizeInUnits=e.lastTick.diff(e.firstTick,e.tickUnit,!0),e.displayFormat=e.options.time.displayFormats[e.tickUnit];for(var p=0,q=c.units[p];p<c.units.length;){if(e.unitScale=1,b.isArray(q.steps)&&Math.ceil(e.scaleSizeInUnits/o)<b.max(q.steps)){for(var r=0;r<q.steps.length;++r)if(q.steps[r]>=Math.ceil(e.scaleSizeInUnits/o)){e.unitScale=b.getValueOrDefault(e.options.time.unitStepSize,q.steps[r]);break}break}if(q.maxStep===!1||Math.ceil(e.scaleSizeInUnits/o)<q.maxStep){e.unitScale=b.getValueOrDefault(e.options.time.unitStepSize,Math.ceil(e.scaleSizeInUnits/o));break}++p,q=c.units[p],e.tickUnit=q.name;var s=e.firstTick.diff(e.getMomentStartOf(e.firstTick),e.tickUnit,!0),t=e.getMomentStartOf(e.lastTick.clone().add(1,e.tickUnit)).diff(e.lastTick,e.tickUnit,!0);e.scaleSizeInUnits=e.lastTick.diff(e.firstTick,e.tickUnit,!0)+s+t,e.displayFormat=e.options.time.displayFormats[q.name]}}var u;if(e.options.time.min?u=e.getMomentStartOf(e.firstTick):(e.firstTick=e.getMomentStartOf(e.firstTick),u=e.firstTick),!e.options.time.max){var v=e.getMomentStartOf(e.lastTick);0!==v.diff(e.lastTick,e.tickUnit,!0)&&(e.lastTick=e.getMomentStartOf(e.lastTick.add(1,e.tickUnit)))}e.smallestLabelSeparation=e.width,b.each(e.chart.data.datasets,function(a,b){for(var c=1;c<e.labelMoments[b].length;c++)e.smallestLabelSeparation=Math.min(e.smallestLabelSeparation,e.labelMoments[b][c].diff(e.labelMoments[b][c-1],e.tickUnit,!0))},e),e.options.time.displayFormat&&(e.displayFormat=e.options.time.displayFormat),e.ticks.push(e.firstTick.clone());for(var w=1;w<=e.scaleSizeInUnits;++w){var x=u.clone().add(w,e.tickUnit);if(e.options.time.max&&x.diff(e.lastTick,e.tickUnit,!0)>=0)break;w%e.unitScale===0&&e.ticks.push(x)}var y=e.ticks[e.ticks.length-1].diff(e.lastTick,e.tickUnit);0===y&&0!==e.scaleSizeInUnits||(e.options.time.max?(e.ticks.push(e.lastTick.clone()),e.scaleSizeInUnits=e.lastTick.diff(e.ticks[0],e.tickUnit,!0)):(e.ticks.push(e.lastTick.clone()),e.scaleSizeInUnits=e.lastTick.diff(e.firstTick,e.tickUnit,!0))),e.ctx.restore()},getLabelForIndex:function(a,b){var c=this,d=c.chart.data.labels&&a<c.chart.data.labels.length?c.chart.data.labels[a]:"";return"object"==typeof c.chart.data.datasets[b].data[0]&&(d=c.getRightValue(c.chart.data.datasets[b].data[a])),c.options.time.tooltipFormat&&(d=c.parseTime(d).format(c.options.time.tooltipFormat)),d},tickFormatFunction:function(a,c,d){var e=a.format(this.displayFormat),f=this.options.ticks,g=b.getValueOrDefault(f.callback,f.userCallback);return g?g(e,c,d):e},convertTicksToLabels:function(){var a=this;a.tickMoments=a.ticks,a.ticks=a.ticks.map(a.tickFormatFunction,a)},getPixelForValue:function(a,b,c,d){var e=this,f=a&&a.isValid&&a.isValid()?a:e.getLabelMoment(c,b);if(f){var g=f.diff(e.firstTick,e.tickUnit,!0),h=g/e.scaleSizeInUnits;if(e.isHorizontal()){var i=e.width-(e.paddingLeft+e.paddingRight),j=(i/Math.max(e.ticks.length-1,1),i*h+e.paddingLeft);return e.left+Math.round(j)}var k=e.height-(e.paddingTop+e.paddingBottom),l=(k/Math.max(e.ticks.length-1,1),k*h+e.paddingTop);return e.top+Math.round(l)}},getPixelForTick:function(a,b){return this.getPixelForValue(this.tickMoments[a],null,null,b)},getValueForPixel:function(a){var b=this,c=b.isHorizontal()?b.width-(b.paddingLeft+b.paddingRight):b.height-(b.paddingTop+b.paddingBottom),e=(a-(b.isHorizontal()?b.left+b.paddingLeft:b.top+b.paddingTop))/c;return e*=b.scaleSizeInUnits,b.firstTick.clone().add(d.duration(e,b.tickUnit).asSeconds(),"seconds")},parseTime:function(a){var b=this;return"string"==typeof b.options.time.parser?d(a,b.options.time.parser):"function"==typeof b.options.time.parser?b.options.time.parser(a):"function"==typeof a.getMonth||"number"==typeof a?d(a):a.isValid&&a.isValid()?a:"string"!=typeof b.options.time.format&&b.options.time.format.call?(console.warn("options.time.format is deprecated and replaced by options.time.parser. See http://nnnick.github.io/Chart.js/docs-v2/#scales-time-scale"),b.options.time.format(a)):d(a,b.options.time.format)}});a.scaleService.registerScaleType("time",f,e)}},{moment:45}],40:[function(a,b,c){function d(a){if(a){var b=/^#([a-fA-F0-9]{3})$/,c=/^#([a-fA-F0-9]{6})$/,d=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,e=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,f=/(\w+)/,g=[0,0,0],h=1,i=a.match(b);if(i){i=i[1];for(var j=0;j<g.length;j++)g[j]=parseInt(i[j]+i[j],16)}else if(i=a.match(c)){i=i[1];for(var j=0;j<g.length;j++)g[j]=parseInt(i.slice(2*j,2*j+2),16)}else if(i=a.match(d)){for(var j=0;j<g.length;j++)g[j]=parseInt(i[j+1]);h=parseFloat(i[4])}else if(i=a.match(e)){for(var j=0;j<g.length;j++)g[j]=Math.round(2.55*parseFloat(i[j+1]));h=parseFloat(i[4])}else if(i=a.match(f)){if("transparent"==i[1])return[0,0,0,0];if(g=u[i[1]],!g)return}for(var j=0;j<g.length;j++)g[j]=s(g[j],0,255);return h=h||0==h?s(h,0,1):1,g[3]=h,g}}function e(a){if(a){var b=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,c=a.match(b);if(c){var d=parseFloat(c[4]),e=s(parseInt(c[1]),0,360),f=s(parseFloat(c[2]),0,100),g=s(parseFloat(c[3]),0,100),h=s(isNaN(d)?1:d,0,1);return[e,f,g,h]}}}function f(a){if(a){var b=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,c=a.match(b);if(c){var d=parseFloat(c[4]),e=s(parseInt(c[1]),0,360),f=s(parseFloat(c[2]),0,100),g=s(parseFloat(c[3]),0,100),h=s(isNaN(d)?1:d,0,1);return[e,f,g,h]}}}function g(a){var b=d(a);return b&&b.slice(0,3)}function h(a){var b=e(a);return b&&b.slice(0,3)}function i(a){var b=d(a);return b?b[3]:(b=e(a))?b[3]:(b=f(a))?b[3]:void 0}function j(a){return"#"+t(a[0])+t(a[1])+t(a[2])}function k(a,b){return 1>b||a[3]&&a[3]<1?l(a,b):"rgb("+a[0]+", "+a[1]+", "+a[2]+")"}function l(a,b){return void 0===b&&(b=void 0!==a[3]?a[3]:1),"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+b+")"}function m(a,b){if(1>b||a[3]&&a[3]<1)return n(a,b);var c=Math.round(a[0]/255*100),d=Math.round(a[1]/255*100),e=Math.round(a[2]/255*100);return"rgb("+c+"%, "+d+"%, "+e+"%)"}function n(a,b){var c=Math.round(a[0]/255*100),d=Math.round(a[1]/255*100),e=Math.round(a[2]/255*100);return"rgba("+c+"%, "+d+"%, "+e+"%, "+(b||a[3]||1)+")"}function o(a,b){return 1>b||a[3]&&a[3]<1?p(a,b):"hsl("+a[0]+", "+a[1]+"%, "+a[2]+"%)"}function p(a,b){return void 0===b&&(b=void 0!==a[3]?a[3]:1),"hsla("+a[0]+", "+a[1]+"%, "+a[2]+"%, "+b+")"}function q(a,b){return void 0===b&&(b=void 0!==a[3]?a[3]:1),"hwb("+a[0]+", "+a[1]+"%, "+a[2]+"%"+(void 0!==b&&1!==b?", "+b:"")+")"}function r(a){return v[a.slice(0,3)]}function s(a,b,c){return Math.min(Math.max(b,a),c)}function t(a){var b=a.toString(16).toUpperCase();return b.length<2?"0"+b:b}var u=a("color-name");b.exports={getRgba:d,getHsla:e,getRgb:g,getHsl:h,getHwb:f,getAlpha:i,hexString:j,rgbString:k,rgbaString:l,percentString:m,percentaString:n,hslString:o,hslaString:p,hwbString:q,keyword:r};var v={};for(var w in u)v[u[w]]=w},{"color-name":44}],41:[function(a,b,c){var d=a("color-convert"),e=a("chartjs-color-string"),f=function(a){if(a instanceof f)return a;if(!(this instanceof f))return new f(a);this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var b;if("string"==typeof a)if(b=e.getRgba(a))this.setValues("rgb",b);else if(b=e.getHsla(a))this.setValues("hsl",b);else{if(!(b=e.getHwb(a)))throw new Error('Unable to parse color from string "'+a+'"');this.setValues("hwb",b)}else if("object"==typeof a)if(b=a,void 0!==b.r||void 0!==b.red)this.setValues("rgb",b);else if(void 0!==b.l||void 0!==b.lightness)this.setValues("hsl",b);else if(void 0!==b.v||void 0!==b.value)this.setValues("hsv",b);else if(void 0!==b.w||void 0!==b.whiteness)this.setValues("hwb",b);else{if(void 0===b.c&&void 0===b.cyan)throw new Error("Unable to parse color from object "+JSON.stringify(a));this.setValues("cmyk",b)}};f.prototype={rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var a=this.values;return 1!==a.alpha?a.hwb.concat([a.alpha]):a.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var a=this.values;return a.rgb.concat([a.alpha])},hslaArray:function(){var a=this.values;return a.hsl.concat([a.alpha])},alpha:function(a){return void 0===a?this.values.alpha:(this.setValues("alpha",a),this)},red:function(a){return this.setChannel("rgb",0,a)},green:function(a){return this.setChannel("rgb",1,a)},blue:function(a){return this.setChannel("rgb",2,a)},hue:function(a){return a&&(a%=360,a=0>a?360+a:a),this.setChannel("hsl",0,a)},saturation:function(a){return this.setChannel("hsl",1,a)},lightness:function(a){return this.setChannel("hsl",2,a)},saturationv:function(a){return this.setChannel("hsv",1,a)},whiteness:function(a){return this.setChannel("hwb",1,a)},blackness:function(a){return this.setChannel("hwb",2,a)},value:function(a){return this.setChannel("hsv",2,a)},cyan:function(a){return this.setChannel("cmyk",0,a)},magenta:function(a){return this.setChannel("cmyk",1,a)},yellow:function(a){return this.setChannel("cmyk",2,a)},black:function(a){return this.setChannel("cmyk",3,a)},hexString:function(){return e.hexString(this.values.rgb)},rgbString:function(){return e.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return e.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return e.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return e.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return e.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return e.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return e.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var a=this.values.rgb;return a[0]<<16|a[1]<<8|a[2]},luminosity:function(){for(var a=this.values.rgb,b=[],c=0;c<a.length;c++){var d=a[c]/255;b[c]=.03928>=d?d/12.92:Math.pow((d+.055)/1.055,2.4)}return.2126*b[0]+.7152*b[1]+.0722*b[2]},contrast:function(a){var b=this.luminosity(),c=a.luminosity();return b>c?(b+.05)/(c+.05):(c+.05)/(b+.05)},level:function(a){var b=this.contrast(a);return b>=7.1?"AAA":b>=4.5?"AA":""},dark:function(){var a=this.values.rgb,b=(299*a[0]+587*a[1]+114*a[2])/1e3;return 128>b},light:function(){return!this.dark()},negate:function(){for(var a=[],b=0;3>b;b++)a[b]=255-this.values.rgb[b];return this.setValues("rgb",a),this},lighten:function(a){var b=this.values.hsl;return b[2]+=b[2]*a,this.setValues("hsl",b),this},darken:function(a){var b=this.values.hsl;return b[2]-=b[2]*a,this.setValues("hsl",b),this},saturate:function(a){var b=this.values.hsl;return b[1]+=b[1]*a,this.setValues("hsl",b),this},desaturate:function(a){var b=this.values.hsl;return b[1]-=b[1]*a,this.setValues("hsl",b),this},whiten:function(a){var b=this.values.hwb;return b[1]+=b[1]*a,this.setValues("hwb",b),this},blacken:function(a){var b=this.values.hwb;return b[2]+=b[2]*a,this.setValues("hwb",b),this},greyscale:function(){var a=this.values.rgb,b=.3*a[0]+.59*a[1]+.11*a[2];return this.setValues("rgb",[b,b,b]),this},clearer:function(a){var b=this.values.alpha;return this.setValues("alpha",b-b*a),this},opaquer:function(a){var b=this.values.alpha;return this.setValues("alpha",b+b*a),this},rotate:function(a){var b=this.values.hsl,c=(b[0]+a)%360;return b[0]=0>c?360+c:c,this.setValues("hsl",b),this},mix:function(a,b){var c=this,d=a,e=void 0===b?.5:b,f=2*e-1,g=c.alpha()-d.alpha(),h=((f*g===-1?f:(f+g)/(1+f*g))+1)/2,i=1-h;return this.rgb(h*c.red()+i*d.red(),h*c.green()+i*d.green(),h*c.blue()+i*d.blue()).alpha(c.alpha()*e+d.alpha()*(1-e))},toJSON:function(){return this.rgb()},clone:function(){var a,b,c=new f,d=this.values,e=c.values;for(var g in d)d.hasOwnProperty(g)&&(a=d[g],b={}.toString.call(a),"[object Array]"===b?e[g]=a.slice(0):"[object Number]"===b?e[g]=a:console.error("unexpected color value:",a));return c}},f.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},f.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},f.prototype.getValues=function(a){for(var b=this.values,c={},d=0;d<a.length;d++)c[a.charAt(d)]=b[a][d];return 1!==b.alpha&&(c.a=b.alpha),c},f.prototype.setValues=function(a,b){var c,e=this.values,f=this.spaces,g=this.maxes,h=1;if("alpha"===a)h=b;else if(b.length)e[a]=b.slice(0,a.length),h=b[a.length];else if(void 0!==b[a.charAt(0)]){for(c=0;c<a.length;c++)e[a][c]=b[a.charAt(c)];h=b.a}else if(void 0!==b[f[a][0]]){var i=f[a];for(c=0;c<a.length;c++)e[a][c]=b[i[c]];
h=b.alpha}if(e.alpha=Math.max(0,Math.min(1,void 0===h?e.alpha:h)),"alpha"===a)return!1;var j;for(c=0;c<a.length;c++)j=Math.max(0,Math.min(g[a][c],e[a][c])),e[a][c]=Math.round(j);for(var k in f)k!==a&&(e[k]=d[a][k](e[a]));return!0},f.prototype.setSpace=function(a,b){var c=b[0];return void 0===c?this.getValues(a):("number"==typeof c&&(c=Array.prototype.slice.call(b)),this.setValues(a,c),this)},f.prototype.setChannel=function(a,b,c){var d=this.values[a];return void 0===c?d[b]:c===d[b]?this:(d[b]=c,this.setValues(a,d),this)},"undefined"!=typeof window&&(window.Color=f),b.exports=f},{"chartjs-color-string":40,"color-convert":43}],42:[function(a,c,d){function e(a){var b,c,d,e=a[0]/255,f=a[1]/255,g=a[2]/255,h=Math.min(e,f,g),i=Math.max(e,f,g),j=i-h;return i==h?b=0:e==i?b=(f-g)/j:f==i?b=2+(g-e)/j:g==i&&(b=4+(e-f)/j),b=Math.min(60*b,360),0>b&&(b+=360),d=(h+i)/2,c=i==h?0:.5>=d?j/(i+h):j/(2-i-h),[b,100*c,100*d]}function f(a){var b,c,d,e=a[0],f=a[1],g=a[2],h=Math.min(e,f,g),i=Math.max(e,f,g),j=i-h;return c=0==i?0:j/i*1e3/10,i==h?b=0:e==i?b=(f-g)/j:f==i?b=2+(g-e)/j:g==i&&(b=4+(e-f)/j),b=Math.min(60*b,360),0>b&&(b+=360),d=i/255*1e3/10,[b,c,d]}function h(a){var b=a[0],c=a[1],d=a[2],f=e(a)[0],g=1/255*Math.min(b,Math.min(c,d)),d=1-1/255*Math.max(b,Math.max(c,d));return[f,100*g,100*d]}function i(a){var b,c,d,e,f=a[0]/255,g=a[1]/255,h=a[2]/255;return e=Math.min(1-f,1-g,1-h),b=(1-f-e)/(1-e)||0,c=(1-g-e)/(1-e)||0,d=(1-h-e)/(1-e)||0,[100*b,100*c,100*d,100*e]}function j(a){return Z[JSON.stringify(a)]}function k(a){var b=a[0]/255,c=a[1]/255,d=a[2]/255;b=b>.04045?Math.pow((b+.055)/1.055,2.4):b/12.92,c=c>.04045?Math.pow((c+.055)/1.055,2.4):c/12.92,d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92;var e=.4124*b+.3576*c+.1805*d,f=.2126*b+.7152*c+.0722*d,g=.0193*b+.1192*c+.9505*d;return[100*e,100*f,100*g]}function l(a){var b,c,d,e=k(a),f=e[0],g=e[1],h=e[2];return f/=95.047,g/=100,h/=108.883,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,b=116*g-16,c=500*(f-g),d=200*(g-h),[b,c,d]}function m(a){return M(l(a))}function n(a){var b,c,d,e,f,g=a[0]/360,h=a[1]/100,i=a[2]/100;if(0==h)return f=255*i,[f,f,f];c=.5>i?i*(1+h):i+h-i*h,b=2*i-c,e=[0,0,0];for(var j=0;3>j;j++)d=g+1/3*-(j-1),0>d&&d++,d>1&&d--,f=1>6*d?b+6*(c-b)*d:1>2*d?c:2>3*d?b+(c-b)*(2/3-d)*6:b,e[j]=255*f;return e}function o(a){var b,c,d=a[0],e=a[1]/100,f=a[2]/100;return 0===f?[0,0,0]:(f*=2,e*=1>=f?f:2-f,c=(f+e)/2,b=2*e/(f+e),[d,100*b,100*c])}function p(a){return h(n(a))}function q(a){return i(n(a))}function s(a){return j(n(a))}function t(a){var b=a[0]/60,c=a[1]/100,d=a[2]/100,e=Math.floor(b)%6,f=b-Math.floor(b),g=255*d*(1-c),h=255*d*(1-c*f),i=255*d*(1-c*(1-f)),d=255*d;switch(e){case 0:return[d,i,g];case 1:return[h,d,g];case 2:return[g,d,i];case 3:return[g,h,d];case 4:return[i,g,d];case 5:return[d,g,h]}}function u(a){var b,c,d=a[0],e=a[1]/100,f=a[2]/100;return c=(2-e)*f,b=e*f,b/=1>=c?c:2-c,b=b||0,c/=2,[d,100*b,100*c]}function v(a){return h(t(a))}function w(a){return i(t(a))}function x(a){return j(t(a))}function y(a){var c,d,e,f,h=a[0]/360,i=a[1]/100,j=a[2]/100,k=i+j;switch(k>1&&(i/=k,j/=k),c=Math.floor(6*h),d=1-j,e=6*h-c,0!=(1&c)&&(e=1-e),f=i+e*(d-i),c){default:case 6:case 0:r=d,g=f,b=i;break;case 1:r=f,g=d,b=i;break;case 2:r=i,g=d,b=f;break;case 3:r=i,g=f,b=d;break;case 4:r=f,g=i,b=d;break;case 5:r=d,g=i,b=f}return[255*r,255*g,255*b]}function z(a){return e(y(a))}function A(a){return f(y(a))}function B(a){return i(y(a))}function C(a){return j(y(a))}function D(a){var b,c,d,e=a[0]/100,f=a[1]/100,g=a[2]/100,h=a[3]/100;return b=1-Math.min(1,e*(1-h)+h),c=1-Math.min(1,f*(1-h)+h),d=1-Math.min(1,g*(1-h)+h),[255*b,255*c,255*d]}function E(a){return e(D(a))}function F(a){return f(D(a))}function G(a){return h(D(a))}function H(a){return j(D(a))}function I(a){var b,c,d,e=a[0]/100,f=a[1]/100,g=a[2]/100;return b=3.2406*e+-1.5372*f+g*-.4986,c=e*-.9689+1.8758*f+.0415*g,d=.0557*e+f*-.204+1.057*g,b=b>.0031308?1.055*Math.pow(b,1/2.4)-.055:b=12.92*b,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:c=12.92*c,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:d=12.92*d,b=Math.min(Math.max(0,b),1),c=Math.min(Math.max(0,c),1),d=Math.min(Math.max(0,d),1),[255*b,255*c,255*d]}function J(a){var b,c,d,e=a[0],f=a[1],g=a[2];return e/=95.047,f/=100,g/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,b=116*f-16,c=500*(e-f),d=200*(f-g),[b,c,d]}function K(a){return M(J(a))}function L(a){var b,c,d,e,f=a[0],g=a[1],h=a[2];return 8>=f?(c=100*f/903.3,e=7.787*(c/100)+16/116):(c=100*Math.pow((f+16)/116,3),e=Math.pow(c/100,1/3)),b=.008856>=b/95.047?b=95.047*(g/500+e-16/116)/7.787:95.047*Math.pow(g/500+e,3),d=.008859>=d/108.883?d=108.883*(e-h/200-16/116)/7.787:108.883*Math.pow(e-h/200,3),[b,c,d]}function M(a){var b,c,d,e=a[0],f=a[1],g=a[2];return b=Math.atan2(g,f),c=360*b/2/Math.PI,0>c&&(c+=360),d=Math.sqrt(f*f+g*g),[e,d,c]}function N(a){return I(L(a))}function O(a){var b,c,d,e=a[0],f=a[1],g=a[2];return d=g/360*2*Math.PI,b=f*Math.cos(d),c=f*Math.sin(d),[e,b,c]}function P(a){return L(O(a))}function Q(a){return N(O(a))}function R(a){return Y[a]}function S(a){return e(R(a))}function T(a){return f(R(a))}function U(a){return h(R(a))}function V(a){return i(R(a))}function W(a){return l(R(a))}function X(a){return k(R(a))}c.exports={rgb2hsl:e,rgb2hsv:f,rgb2hwb:h,rgb2cmyk:i,rgb2keyword:j,rgb2xyz:k,rgb2lab:l,rgb2lch:m,hsl2rgb:n,hsl2hsv:o,hsl2hwb:p,hsl2cmyk:q,hsl2keyword:s,hsv2rgb:t,hsv2hsl:u,hsv2hwb:v,hsv2cmyk:w,hsv2keyword:x,hwb2rgb:y,hwb2hsl:z,hwb2hsv:A,hwb2cmyk:B,hwb2keyword:C,cmyk2rgb:D,cmyk2hsl:E,cmyk2hsv:F,cmyk2hwb:G,cmyk2keyword:H,keyword2rgb:R,keyword2hsl:S,keyword2hsv:T,keyword2hwb:U,keyword2cmyk:V,keyword2lab:W,keyword2xyz:X,xyz2rgb:I,xyz2lab:J,xyz2lch:K,lab2xyz:L,lab2rgb:N,lab2lch:M,lch2lab:O,lch2xyz:P,lch2rgb:Q};var Y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Z={};for(var $ in Y)Z[JSON.stringify(Y[$])]=$},{}],43:[function(a,b,c){var d=a("./conversions"),e=function(){return new j};for(var f in d){e[f+"Raw"]=function(a){return function(b){return"number"==typeof b&&(b=Array.prototype.slice.call(arguments)),d[a](b)}}(f);var g=/(\w+)2(\w+)/.exec(f),h=g[1],i=g[2];e[h]=e[h]||{},e[h][i]=e[f]=function(a){return function(b){"number"==typeof b&&(b=Array.prototype.slice.call(arguments));var c=d[a](b);if("string"==typeof c||void 0===c)return c;for(var e=0;e<c.length;e++)c[e]=Math.round(c[e]);return c}}(f)}var j=function(){this.convs={}};j.prototype.routeSpace=function(a,b){var c=b[0];return void 0===c?this.getValues(a):("number"==typeof c&&(c=Array.prototype.slice.call(b)),this.setValues(a,c))},j.prototype.setValues=function(a,b){return this.space=a,this.convs={},this.convs[a]=b,this},j.prototype.getValues=function(a){var b=this.convs[a];if(!b){var c=this.space,d=this.convs[c];b=e[c][a](d),this.convs[a]=b}return b},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(a){j.prototype[a]=function(b){return this.routeSpace(a,arguments)}}),b.exports=e},{"./conversions":42}],44:[function(a,b,c){b.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],45:[function(a,b,c){!function(a,d){"object"==typeof c&&"undefined"!=typeof b?b.exports=d():"function"==typeof define&&define.amd?define(d):a.moment=d()}(this,function(){"use strict";function c(){return hd.apply(null,arguments)}function d(a){hd=a}function e(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function f(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function g(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function h(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function i(a,b){for(var c in b)h(b,c)&&(a[c]=b[c]);return h(b,"toString")&&(a.toString=b.toString),h(b,"valueOf")&&(a.valueOf=b.valueOf),a}function j(a,b,c,d){return La(a,b,c,d,!0).utc()}function k(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function l(a){return null==a._pf&&(a._pf=k()),a._pf}function m(a){if(null==a._isValid){var b=l(a),c=id.call(b.parsedDateParts,function(a){return null!=a});a._isValid=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function n(a){var b=j(NaN);return null!=a?i(l(b),a):l(b).userInvalidated=!0,b}function o(a){return void 0===a}function p(a,b){var c,d,e;if(o(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),o(b._i)||(a._i=b._i),o(b._f)||(a._f=b._f),o(b._l)||(a._l=b._l),o(b._strict)||(a._strict=b._strict),o(b._tzm)||(a._tzm=b._tzm),o(b._isUTC)||(a._isUTC=b._isUTC),o(b._offset)||(a._offset=b._offset),o(b._pf)||(a._pf=l(b)),o(b._locale)||(a._locale=b._locale),jd.length>0)for(c in jd)d=jd[c],e=b[d],o(e)||(a[d]=e);return a}function q(a){p(this,a),this._d=new Date(null!=a._d?a._d.getTime():NaN),kd===!1&&(kd=!0,c.updateOffset(this),kd=!1)}function r(a){return a instanceof q||null!=a&&null!=a._isAMomentObject}function s(a){return 0>a?Math.ceil(a):Math.floor(a)}function t(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=s(b)),c}function u(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&t(a[d])!==t(b[d]))&&g++;return g+f}function v(a){c.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function w(a,b){var d=!0;return i(function(){return null!=c.deprecationHandler&&c.deprecationHandler(null,a),d&&(v(a+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),d=!1),b.apply(this,arguments)},b)}function x(a,b){null!=c.deprecationHandler&&c.deprecationHandler(a,b),ld[a]||(v(b),ld[a]=!0)}function y(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function z(a){return"[object Object]"===Object.prototype.toString.call(a)}function A(a){var b,c;for(c in a)b=a[c],y(b)?this[c]=b:this["_"+c]=b;this._config=a,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function B(a,b){var c,d=i({},a);for(c in b)h(b,c)&&(z(a[c])&&z(b[c])?(d[c]={},i(d[c],a[c]),i(d[c],b[c])):null!=b[c]?d[c]=b[c]:delete d[c]);return d}function C(a){null!=a&&this.set(a)}function D(a){return a?a.toLowerCase().replace("_","-"):a}function E(a){for(var b,c,d,e,f=0;f<a.length;){for(e=D(a[f]).split("-"),b=e.length,c=D(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=F(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&u(e,c,!0)>=b-1)break;b--}f++}return null}function F(c){var d=null;if(!pd[c]&&"undefined"!=typeof b&&b&&b.exports)try{d=nd._abbr,a("./locale/"+c),G(d)}catch(e){}return pd[c]}function G(a,b){var c;return a&&(c=o(b)?J(a):H(a,b),c&&(nd=c)),nd._abbr}function H(a,b){return null!==b?(b.abbr=a,null!=pd[a]?(x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),b=B(pd[a]._config,b)):null!=b.parentLocale&&(null!=pd[b.parentLocale]?b=B(pd[b.parentLocale]._config,b):x("parentLocaleUndefined","specified parentLocale is not defined yet")),pd[a]=new C(b),G(a),pd[a]):(delete pd[a],null)}function I(a,b){if(null!=b){var c;null!=pd[a]&&(b=B(pd[a]._config,b)),c=new C(b),c.parentLocale=pd[a],pd[a]=c,G(a)}else null!=pd[a]&&(null!=pd[a].parentLocale?pd[a]=pd[a].parentLocale:null!=pd[a]&&delete pd[a]);return pd[a]}function J(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return nd;if(!e(a)){if(b=F(a))return b;a=[a]}return E(a)}function K(){return md(pd)}function L(a,b){var c=a.toLowerCase();qd[c]=qd[c+"s"]=qd[b]=a}function M(a){return"string"==typeof a?qd[a]||qd[a.toLowerCase()]:void 0}function N(a){var b,c,d={};for(c in a)h(a,c)&&(b=M(c),b&&(d[b]=a[c]));return d}function O(a,b){return function(d){return null!=d?(Q(this,a,d),c.updateOffset(this,b),this):P(this,a)}}function P(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function Q(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}function R(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=M(a),y(this[a]))return this[a](b);return this}function S(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function T(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(ud[a]=e),b&&(ud[b[0]]=function(){return S(e.apply(this,arguments),b[1],b[2])}),c&&(ud[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function U(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function V(a){var b,c,d=a.match(rd);for(b=0,c=d.length;c>b;b++)ud[d[b]]?d[b]=ud[d[b]]:d[b]=U(d[b]);return function(b){var e,f="";for(e=0;c>e;e++)f+=d[e]instanceof Function?d[e].call(b,a):d[e];return f}}function W(a,b){return a.isValid()?(b=X(b,a.localeData()),td[b]=td[b]||V(b),td[b](a)):a.localeData().invalidDate()}function X(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(sd.lastIndex=0;d>=0&&sd.test(a);)a=a.replace(sd,c),sd.lastIndex=0,d-=1;return a}function Y(a,b,c){Md[a]=y(b)?b:function(a,d){return a&&c?c:b}}function Z(a,b){return h(Md,a)?Md[a](b._strict,b._locale):new RegExp($(a))}function $(a){return _(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function _(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function aa(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=t(a)}),c=0;c<a.length;c++)Nd[a[c]]=d}function ba(a,b){aa(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function ca(a,b,c){null!=b&&h(Nd,a)&&Nd[a](b,c._a,c,a)}function da(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function ea(a,b){return e(this._months)?this._months[a.month()]:this._months[Xd.test(b)?"format":"standalone"][a.month()]}function fa(a,b){return e(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[Xd.test(b)?"format":"standalone"][a.month()]}function ga(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;12>d;++d)f=j([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,"").toLocaleLowerCase();return c?"MMM"===b?(e=od.call(this._shortMonthsParse,g),-1!==e?e:null):(e=od.call(this._longMonthsParse,g),-1!==e?e:null):"MMM"===b?(e=od.call(this._shortMonthsParse,g),-1!==e?e:(e=od.call(this._longMonthsParse,g),-1!==e?e:null)):(e=od.call(this._longMonthsParse,g),-1!==e?e:(e=od.call(this._shortMonthsParse,g),-1!==e?e:null))}function ha(a,b,c){var d,e,f;if(this._monthsParseExact)return ga.call(this,a,b,c);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=j([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function ia(a,b){var c;if(!a.isValid())return a;if("string"==typeof b)if(/^\d+$/.test(b))b=t(b);else if(b=a.localeData().monthsParse(b),"number"!=typeof b)return a;return c=Math.min(a.date(),da(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a}function ja(a){return null!=a?(ia(this,a),c.updateOffset(this,!0),this):P(this,"Month")}function ka(){return da(this.year(),this.month())}function la(a){return this._monthsParseExact?(h(this,"_monthsRegex")||na.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex}function ma(a){return this._monthsParseExact?(h(this,"_monthsRegex")||na.call(this),a?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex}function na(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;12>b;b++)c=j([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;12>b;b++)d[b]=_(d[b]),e[b]=_(e[b]),f[b]=_(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")","i")}function oa(a){var b,c=a._a;return c&&-2===l(a).overflow&&(b=c[Pd]<0||c[Pd]>11?Pd:c[Qd]<1||c[Qd]>da(c[Od],c[Pd])?Qd:c[Rd]<0||c[Rd]>24||24===c[Rd]&&(0!==c[Sd]||0!==c[Td]||0!==c[Ud])?Rd:c[Sd]<0||c[Sd]>59?Sd:c[Td]<0||c[Td]>59?Td:c[Ud]<0||c[Ud]>999?Ud:-1,l(a)._overflowDayOfYear&&(Od>b||b>Qd)&&(b=Qd),l(a)._overflowWeeks&&-1===b&&(b=Vd),l(a)._overflowWeekday&&-1===b&&(b=Wd),l(a).overflow=b),a}function pa(a){var b,c,d,e,f,g,h=a._i,i=ae.exec(h)||be.exec(h);if(i){for(l(a).iso=!0,b=0,c=de.length;c>b;b++)if(de[b][1].exec(i[1])){e=de[b][0],d=de[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=ee.length;c>b;b++)if(ee[b][1].exec(i[3])){f=(i[2]||" ")+ee[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!ce.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),Ea(a)}else a._isValid=!1}function qa(a){var b=fe.exec(a._i);return null!==b?void(a._d=new Date(+b[1])):(pa(a),void(a._isValid===!1&&(delete a._isValid,c.createFromInputFallback(a))))}function ra(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 100>a&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function sa(a){var b=new Date(Date.UTC.apply(null,arguments));return 100>a&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function ta(a){return ua(a)?366:365}function ua(a){return a%4===0&&a%100!==0||a%400===0}function va(){return ua(this.year())}function wa(a,b,c){var d=7+b-c,e=(7+sa(a,0,d).getUTCDay()-b)%7;return-e+d-1}function xa(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=wa(a,d,e),j=1+7*(b-1)+h+i;return 0>=j?(f=a-1,g=ta(f)+j):j>ta(a)?(f=a+1,g=j-ta(a)):(f=a,g=j),{year:f,dayOfYear:g}}function ya(a,b,c){var d,e,f=wa(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return 1>g?(e=a.year()-1,d=g+za(e,b,c)):g>za(a.year(),b,c)?(d=g-za(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function za(a,b,c){var d=wa(a,b,c),e=wa(a+1,b,c);return(ta(a)-d+e)/7}function Aa(a,b,c){return null!=a?a:null!=b?b:c}function Ba(a){var b=new Date(c.now());return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function Ca(a){var b,c,d,e,f=[];if(!a._d){for(d=Ba(a),a._w&&null==a._a[Qd]&&null==a._a[Pd]&&Da(a),a._dayOfYear&&(e=Aa(a._a[Od],d[Od]),a._dayOfYear>ta(e)&&(l(a)._overflowDayOfYear=!0),c=sa(e,0,a._dayOfYear),a._a[Pd]=c.getUTCMonth(),a._a[Qd]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[Rd]&&0===a._a[Sd]&&0===a._a[Td]&&0===a._a[Ud]&&(a._nextDay=!0,a._a[Rd]=0),a._d=(a._useUTC?sa:ra).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[Rd]=24)}}function Da(a){var b,c,d,e,f,g,h,i;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=Aa(b.GG,a._a[Od],ya(Ma(),1,4).year),d=Aa(b.W,1),e=Aa(b.E,1),(1>e||e>7)&&(i=!0)):(f=a._locale._week.dow,g=a._locale._week.doy,c=Aa(b.gg,a._a[Od],ya(Ma(),f,g).year),d=Aa(b.w,1),null!=b.d?(e=b.d,(0>e||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f),1>d||d>za(c,f,g)?l(a)._overflowWeeks=!0:null!=i?l(a)._overflowWeekday=!0:(h=xa(c,d,e,f,g),a._a[Od]=h.year,a._dayOfYear=h.dayOfYear)}function Ea(a){if(a._f===c.ISO_8601)return void pa(a);a._a=[],l(a).empty=!0;var b,d,e,f,g,h=""+a._i,i=h.length,j=0;for(e=X(a._f,a._locale).match(rd)||[],b=0;b<e.length;b++)f=e[b],d=(h.match(Z(f,a))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&l(a).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),ud[f]?(d?l(a).empty=!1:l(a).unusedTokens.push(f),ca(f,d,a)):a._strict&&!d&&l(a).unusedTokens.push(f);l(a).charsLeftOver=i-j,h.length>0&&l(a).unusedInput.push(h),l(a).bigHour===!0&&a._a[Rd]<=12&&a._a[Rd]>0&&(l(a).bigHour=void 0),l(a).parsedDateParts=a._a.slice(0),l(a).meridiem=a._meridiem,a._a[Rd]=Fa(a._locale,a._a[Rd],a._meridiem),Ca(a),oa(a)}function Fa(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function Ga(a){var b,c,d,e,f;if(0===a._f.length)return l(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=p({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],Ea(b),m(b)&&(f+=l(b).charsLeftOver,f+=10*l(b).unusedTokens.length,l(b).score=f,(null==d||d>f)&&(d=f,c=b));i(a,c||b)}function Ha(a){if(!a._d){var b=N(a._i);a._a=g([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),Ca(a)}}function Ia(a){var b=new q(oa(Ja(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Ja(a){var b=a._i,c=a._f;return a._locale=a._locale||J(a._l),null===b||void 0===c&&""===b?n({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),r(b)?new q(oa(b)):(e(c)?Ga(a):c?Ea(a):f(b)?a._d=b:Ka(a),m(a)||(a._d=null),a))}function Ka(a){var b=a._i;void 0===b?a._d=new Date(c.now()):f(b)?a._d=new Date(b.valueOf()):"string"==typeof b?qa(a):e(b)?(a._a=g(b.slice(0),function(a){return parseInt(a,10)}),Ca(a)):"object"==typeof b?Ha(a):"number"==typeof b?a._d=new Date(b):c.createFromInputFallback(a)}function La(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,Ia(f)}function Ma(a,b,c,d){return La(a,b,c,d,!1)}function Na(a,b){var c,d;if(1===b.length&&e(b[0])&&(b=b[0]),!b.length)return Ma();for(c=b[0],d=1;d<b.length;++d)b[d].isValid()&&!b[d][a](c)||(c=b[d]);return c}function Oa(){var a=[].slice.call(arguments,0);return Na("isBefore",a)}function Pa(){var a=[].slice.call(arguments,0);return Na("isAfter",a)}function Qa(a){var b=N(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+1e3*h*60*60,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=J(),this._bubble()}function Ra(a){return a instanceof Qa}function Sa(a,b){T(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+S(~~(a/60),2)+b+S(~~a%60,2)})}function Ta(a,b){var c=(b||"").match(a)||[],d=c[c.length-1]||[],e=(d+"").match(ke)||["-",0,0],f=+(60*e[1])+t(e[2]);return"+"===e[0]?f:-f}function Ua(a,b){var d,e;return b._isUTC?(d=b.clone(),e=(r(a)||f(a)?a.valueOf():Ma(a).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+e),c.updateOffset(d,!1),d):Ma(a).local()}function Va(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Wa(a,b){var d,e=this._offset||0;return this.isValid()?null!=a?("string"==typeof a?a=Ta(Jd,a):Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(d=Va(this)),this._offset=a,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==a&&(!b||this._changeInProgress?lb(this,fb(a-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,c.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Va(this):null!=a?this:NaN}function Xa(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Ya(a){return this.utcOffset(0,a)}function Za(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Va(this),"m")),this}function $a(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ta(Id,this._i)),this}function _a(a){return this.isValid()?(a=a?Ma(a).utcOffset():0,(this.utcOffset()-a)%60===0):!1}function ab(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function bb(){if(!o(this._isDSTShifted))return this._isDSTShifted;var a={};if(p(a,this),a=Ja(a),a._a){var b=a._isUTC?j(a._a):Ma(a._a);this._isDSTShifted=this.isValid()&&u(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function cb(){return this.isValid()?!this._isUTC:!1}function db(){return this.isValid()?this._isUTC:!1}function eb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function fb(a,b){var c,d,e,f=a,g=null;return Ra(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(g=le.exec(a))?(c="-"===g[1]?-1:1,f={y:0,d:t(g[Qd])*c,h:t(g[Rd])*c,m:t(g[Sd])*c,s:t(g[Td])*c,ms:t(g[Ud])*c}):(g=me.exec(a))?(c="-"===g[1]?-1:1,f={y:gb(g[2],c),M:gb(g[3],c),w:gb(g[4],c),d:gb(g[5],c),h:gb(g[6],c),m:gb(g[7],c),s:gb(g[8],c)}):null==f?f={}:"object"==typeof f&&("from"in f||"to"in f)&&(e=ib(Ma(f.from),Ma(f.to)),f={},f.ms=e.milliseconds,f.M=e.months),d=new Qa(f),Ra(a)&&h(a,"_locale")&&(d._locale=a._locale),
d}function gb(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function hb(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function ib(a,b){var c;return a.isValid()&&b.isValid()?(b=Ua(b,a),a.isBefore(b)?c=hb(a,b):(c=hb(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function jb(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}function kb(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(x(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=fb(c,d),lb(this,e,a),this}}function lb(a,b,d,e){var f=b._milliseconds,g=jb(b._days),h=jb(b._months);a.isValid()&&(e=null==e?!0:e,f&&a._d.setTime(a._d.valueOf()+f*d),g&&Q(a,"Date",P(a,"Date")+g*d),h&&ia(a,P(a,"Month")+h*d),e&&c.updateOffset(a,g||h))}function mb(a,b){var c=a||Ma(),d=Ua(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse",g=b&&(y(b[f])?b[f]():b[f]);return this.format(g||this.localeData().calendar(f,this,Ma(c)))}function nb(){return new q(this)}function ob(a,b){var c=r(a)?a:Ma(a);return this.isValid()&&c.isValid()?(b=M(o(b)?"millisecond":b),"millisecond"===b?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf()):!1}function pb(a,b){var c=r(a)?a:Ma(a);return this.isValid()&&c.isValid()?(b=M(o(b)?"millisecond":b),"millisecond"===b?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf()):!1}function qb(a,b,c,d){return d=d||"()",("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))}function rb(a,b){var c,d=r(a)?a:Ma(a);return this.isValid()&&d.isValid()?(b=M(b||"millisecond"),"millisecond"===b?this.valueOf()===d.valueOf():(c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf())):!1}function sb(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function tb(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function ub(a,b,c){var d,e,f,g;return this.isValid()?(d=Ua(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=M(b),"year"===b||"month"===b||"quarter"===b?(g=vb(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:s(g)):NaN):NaN}function vb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)||0}function wb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function xb(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?y(Date.prototype.toISOString)?this.toDate().toISOString():W(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):W(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function yb(a){a||(a=this.isUtc()?c.defaultFormatUtc:c.defaultFormat);var b=W(this,a);return this.localeData().postformat(b)}function zb(a,b){return this.isValid()&&(r(a)&&a.isValid()||Ma(a).isValid())?fb({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function Ab(a){return this.from(Ma(),a)}function Bb(a,b){return this.isValid()&&(r(a)&&a.isValid()||Ma(a).isValid())?fb({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function Cb(a){return this.to(Ma(),a)}function Db(a){var b;return void 0===a?this._locale._abbr:(b=J(a),null!=b&&(this._locale=b),this)}function Eb(){return this._locale}function Fb(a){switch(a=M(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function Gb(a){return a=M(a),void 0===a||"millisecond"===a?this:("date"===a&&(a="day"),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms"))}function Hb(){return this._d.valueOf()-6e4*(this._offset||0)}function Ib(){return Math.floor(this.valueOf()/1e3)}function Jb(){return this._offset?new Date(this.valueOf()):this._d}function Kb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function Lb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Mb(){return this.isValid()?this.toISOString():null}function Nb(){return m(this)}function Ob(){return i({},l(this))}function Pb(){return l(this).overflow}function Qb(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Rb(a,b){T(0,[a,a.length],0,b)}function Sb(a){return Wb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Tb(a){return Wb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Ub(){return za(this.year(),1,4)}function Vb(){var a=this.localeData()._week;return za(this.year(),a.dow,a.doy)}function Wb(a,b,c,d,e){var f;return null==a?ya(this,d,e).year:(f=za(a,d,e),b>f&&(b=f),Xb.call(this,a,b,c,d,e))}function Xb(a,b,c,d,e){var f=xa(a,b,c,d,e),g=sa(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}function Yb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Zb(a){return ya(a,this._week.dow,this._week.doy).week}function $b(){return this._week.dow}function _b(){return this._week.doy}function ac(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function bc(a){var b=ya(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function cc(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function dc(a,b){return e(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]}function ec(a){return this._weekdaysShort[a.day()]}function fc(a){return this._weekdaysMin[a.day()]}function gc(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;7>d;++d)f=j([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase();return c?"dddd"===b?(e=od.call(this._weekdaysParse,g),-1!==e?e:null):"ddd"===b?(e=od.call(this._shortWeekdaysParse,g),-1!==e?e:null):(e=od.call(this._minWeekdaysParse,g),-1!==e?e:null):"dddd"===b?(e=od.call(this._weekdaysParse,g),-1!==e?e:(e=od.call(this._shortWeekdaysParse,g),-1!==e?e:(e=od.call(this._minWeekdaysParse,g),-1!==e?e:null))):"ddd"===b?(e=od.call(this._shortWeekdaysParse,g),-1!==e?e:(e=od.call(this._weekdaysParse,g),-1!==e?e:(e=od.call(this._minWeekdaysParse,g),-1!==e?e:null))):(e=od.call(this._minWeekdaysParse,g),-1!==e?e:(e=od.call(this._weekdaysParse,g),-1!==e?e:(e=od.call(this._shortWeekdaysParse,g),-1!==e?e:null)))}function hc(a,b,c){var d,e,f;if(this._weekdaysParseExact)return gc.call(this,a,b,c);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;7>d;d++){if(e=j([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}function ic(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=cc(a,this.localeData()),this.add(a-b,"d")):b}function jc(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function kc(a){return this.isValid()?null==a?this.day()||7:this.day(this.day()%7?a:a-7):null!=a?this:NaN}function lc(a){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||oc.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex}function mc(a){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||oc.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}function nc(a){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||oc.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}function oc(){function a(a,b){return b.length-a.length}var b,c,d,e,f,g=[],h=[],i=[],k=[];for(b=0;7>b;b++)c=j([2e3,1]).day(b),d=this.weekdaysMin(c,""),e=this.weekdaysShort(c,""),f=this.weekdays(c,""),g.push(d),h.push(e),i.push(f),k.push(d),k.push(e),k.push(f);for(g.sort(a),h.sort(a),i.sort(a),k.sort(a),b=0;7>b;b++)h[b]=_(h[b]),i[b]=_(i[b]),k[b]=_(k[b]);this._weekdaysRegex=new RegExp("^("+k.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+g.join("|")+")","i")}function pc(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function qc(){return this.hours()%12||12}function rc(){return this.hours()||24}function sc(a,b){T(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function tc(a,b){return b._meridiemParse}function uc(a){return"p"===(a+"").toLowerCase().charAt(0)}function vc(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function wc(a,b){b[Ud]=t(1e3*("0."+a))}function xc(){return this._isUTC?"UTC":""}function yc(){return this._isUTC?"Coordinated Universal Time":""}function zc(a){return Ma(1e3*a)}function Ac(){return Ma.apply(null,arguments).parseZone()}function Bc(a,b,c){var d=this._calendar[a];return y(d)?d.call(b,c):d}function Cc(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function Dc(){return this._invalidDate}function Ec(a){return this._ordinal.replace("%d",a)}function Fc(a){return a}function Gc(a,b,c,d){var e=this._relativeTime[c];return y(e)?e(a,b,c,d):e.replace(/%d/i,a)}function Hc(a,b){var c=this._relativeTime[a>0?"future":"past"];return y(c)?c(b):c.replace(/%s/i,b)}function Ic(a,b,c,d){var e=J(),f=j().set(d,b);return e[c](f,a)}function Jc(a,b,c){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return Ic(a,b,c,"month");var d,e=[];for(d=0;12>d;d++)e[d]=Ic(a,d,c,"month");return e}function Kc(a,b,c,d){"boolean"==typeof a?("number"==typeof b&&(c=b,b=void 0),b=b||""):(b=a,c=b,a=!1,"number"==typeof b&&(c=b,b=void 0),b=b||"");var e=J(),f=a?e._week.dow:0;if(null!=c)return Ic(b,(c+f)%7,d,"day");var g,h=[];for(g=0;7>g;g++)h[g]=Ic(b,(g+f)%7,d,"day");return h}function Lc(a,b){return Jc(a,b,"months")}function Mc(a,b){return Jc(a,b,"monthsShort")}function Nc(a,b,c){return Kc(a,b,c,"weekdays")}function Oc(a,b,c){return Kc(a,b,c,"weekdaysShort")}function Pc(a,b,c){return Kc(a,b,c,"weekdaysMin")}function Qc(){var a=this._data;return this._milliseconds=Ne(this._milliseconds),this._days=Ne(this._days),this._months=Ne(this._months),a.milliseconds=Ne(a.milliseconds),a.seconds=Ne(a.seconds),a.minutes=Ne(a.minutes),a.hours=Ne(a.hours),a.months=Ne(a.months),a.years=Ne(a.years),this}function Rc(a,b,c,d){var e=fb(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function Sc(a,b){return Rc(this,a,b,1)}function Tc(a,b){return Rc(this,a,b,-1)}function Uc(a){return 0>a?Math.floor(a):Math.ceil(a)}function Vc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*Uc(Xc(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=s(f/1e3),i.seconds=a%60,b=s(a/60),i.minutes=b%60,c=s(b/60),i.hours=c%24,g+=s(c/24),e=s(Wc(g)),h+=e,g-=Uc(Xc(e)),d=s(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function Wc(a){return 4800*a/146097}function Xc(a){return 146097*a/4800}function Yc(a){var b,c,d=this._milliseconds;if(a=M(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+Wc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(Xc(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function Zc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*t(this._months/12)}function $c(a){return function(){return this.as(a)}}function _c(a){return a=M(a),this[a+"s"]()}function ad(a){return function(){return this._data[a]}}function bd(){return s(this.days()/7)}function cd(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function dd(a,b,c){var d=fb(a).abs(),e=bf(d.as("s")),f=bf(d.as("m")),g=bf(d.as("h")),h=bf(d.as("d")),i=bf(d.as("M")),j=bf(d.as("y")),k=e<cf.s&&["s",e]||1>=f&&["m"]||f<cf.m&&["mm",f]||1>=g&&["h"]||g<cf.h&&["hh",g]||1>=h&&["d"]||h<cf.d&&["dd",h]||1>=i&&["M"]||i<cf.M&&["MM",i]||1>=j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,cd.apply(null,k)}function ed(a,b){return void 0===cf[a]?!1:void 0===b?cf[a]:(cf[a]=b,!0)}function fd(a){var b=this.localeData(),c=dd(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function gd(){var a,b,c,d=df(this._milliseconds)/1e3,e=df(this._days),f=df(this._months);a=s(d/60),b=s(a/60),d%=60,a%=60,c=s(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var hd,id;id=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;c>d;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var jd=c.momentProperties=[],kd=!1,ld={};c.suppressDeprecationWarnings=!1,c.deprecationHandler=null;var md;md=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)h(a,b)&&c.push(b);return c};var nd,od,pd={},qd={},rd=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,sd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,td={},ud={},vd=/\d/,wd=/\d\d/,xd=/\d{3}/,yd=/\d{4}/,zd=/[+-]?\d{6}/,Ad=/\d\d?/,Bd=/\d\d\d\d?/,Cd=/\d\d\d\d\d\d?/,Dd=/\d{1,3}/,Ed=/\d{1,4}/,Fd=/[+-]?\d{1,6}/,Gd=/\d+/,Hd=/[+-]?\d+/,Id=/Z|[+-]\d\d:?\d\d/gi,Jd=/Z|[+-]\d\d(?::?\d\d)?/gi,Kd=/[+-]?\d+(\.\d{1,3})?/,Ld=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Md={},Nd={},Od=0,Pd=1,Qd=2,Rd=3,Sd=4,Td=5,Ud=6,Vd=7,Wd=8;od=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1},T("M",["MM",2],"Mo",function(){return this.month()+1}),T("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),T("MMMM",0,0,function(a){return this.localeData().months(this,a)}),L("month","M"),Y("M",Ad),Y("MM",Ad,wd),Y("MMM",function(a,b){return b.monthsShortRegex(a)}),Y("MMMM",function(a,b){return b.monthsRegex(a)}),aa(["M","MM"],function(a,b){b[Pd]=t(a)-1}),aa(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[Pd]=e:l(c).invalidMonth=a});var Xd=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Yd="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Zd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),$d=Ld,_d=Ld,ae=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,be=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ce=/Z|[+-]\d\d(?::?\d\d)?/,de=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ee=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],fe=/^\/?Date\((\-?\d+)/i;c.createFromInputFallback=w("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),T("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a}),T(0,["YY",2],0,function(){return this.year()%100}),T(0,["YYYY",4],0,"year"),T(0,["YYYYY",5],0,"year"),T(0,["YYYYYY",6,!0],0,"year"),L("year","y"),Y("Y",Hd),Y("YY",Ad,wd),Y("YYYY",Ed,yd),Y("YYYYY",Fd,zd),Y("YYYYYY",Fd,zd),aa(["YYYYY","YYYYYY"],Od),aa("YYYY",function(a,b){b[Od]=2===a.length?c.parseTwoDigitYear(a):t(a)}),aa("YY",function(a,b){b[Od]=c.parseTwoDigitYear(a)}),aa("Y",function(a,b){b[Od]=parseInt(a,10)}),c.parseTwoDigitYear=function(a){return t(a)+(t(a)>68?1900:2e3)};var ge=O("FullYear",!0);c.ISO_8601=function(){};var he=w("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Ma.apply(null,arguments);return this.isValid()&&a.isValid()?this>a?this:a:n()}),ie=w("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Ma.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:n()}),je=function(){return Date.now?Date.now():+new Date};Sa("Z",":"),Sa("ZZ",""),Y("Z",Jd),Y("ZZ",Jd),aa(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ta(Jd,a)});var ke=/([\+\-]|\d\d)/gi;c.updateOffset=function(){};var le=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,me=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;fb.fn=Qa.prototype;var ne=kb(1,"add"),oe=kb(-1,"subtract");c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",c.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var pe=w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});T(0,["gg",2],0,function(){return this.weekYear()%100}),T(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Rb("gggg","weekYear"),Rb("ggggg","weekYear"),Rb("GGGG","isoWeekYear"),Rb("GGGGG","isoWeekYear"),L("weekYear","gg"),L("isoWeekYear","GG"),Y("G",Hd),Y("g",Hd),Y("GG",Ad,wd),Y("gg",Ad,wd),Y("GGGG",Ed,yd),Y("gggg",Ed,yd),Y("GGGGG",Fd,zd),Y("ggggg",Fd,zd),ba(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=t(a)}),ba(["gg","GG"],function(a,b,d,e){b[e]=c.parseTwoDigitYear(a)}),T("Q",0,"Qo","quarter"),L("quarter","Q"),Y("Q",vd),aa("Q",function(a,b){b[Pd]=3*(t(a)-1)}),T("w",["ww",2],"wo","week"),T("W",["WW",2],"Wo","isoWeek"),L("week","w"),L("isoWeek","W"),Y("w",Ad),Y("ww",Ad,wd),Y("W",Ad),Y("WW",Ad,wd),ba(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=t(a)});var qe={dow:0,doy:6};T("D",["DD",2],"Do","date"),L("date","D"),Y("D",Ad),Y("DD",Ad,wd),Y("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),aa(["D","DD"],Qd),aa("Do",function(a,b){b[Qd]=t(a.match(Ad)[0],10)});var re=O("Date",!0);T("d",0,"do","day"),T("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),T("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),T("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),T("e",0,0,"weekday"),T("E",0,0,"isoWeekday"),L("day","d"),L("weekday","e"),L("isoWeekday","E"),Y("d",Ad),Y("e",Ad),Y("E",Ad),Y("dd",function(a,b){return b.weekdaysMinRegex(a)}),Y("ddd",function(a,b){return b.weekdaysShortRegex(a)}),Y("dddd",function(a,b){return b.weekdaysRegex(a)}),ba(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:l(c).invalidWeekday=a}),ba(["d","e","E"],function(a,b,c,d){b[d]=t(a)});var se="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),te="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ue="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ve=Ld,we=Ld,xe=Ld;T("DDD",["DDDD",3],"DDDo","dayOfYear"),L("dayOfYear","DDD"),Y("DDD",Dd),Y("DDDD",xd),aa(["DDD","DDDD"],function(a,b,c){c._dayOfYear=t(a)}),T("H",["HH",2],0,"hour"),T("h",["hh",2],0,qc),T("k",["kk",2],0,rc),T("hmm",0,0,function(){return""+qc.apply(this)+S(this.minutes(),2)}),T("hmmss",0,0,function(){return""+qc.apply(this)+S(this.minutes(),2)+S(this.seconds(),2)}),T("Hmm",0,0,function(){return""+this.hours()+S(this.minutes(),2)}),T("Hmmss",0,0,function(){return""+this.hours()+S(this.minutes(),2)+S(this.seconds(),2)}),sc("a",!0),sc("A",!1),L("hour","h"),Y("a",tc),Y("A",tc),Y("H",Ad),Y("h",Ad),Y("HH",Ad,wd),Y("hh",Ad,wd),Y("hmm",Bd),Y("hmmss",Cd),Y("Hmm",Bd),Y("Hmmss",Cd),aa(["H","HH"],Rd),aa(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),aa(["h","hh"],function(a,b,c){b[Rd]=t(a),l(c).bigHour=!0}),aa("hmm",function(a,b,c){var d=a.length-2;b[Rd]=t(a.substr(0,d)),b[Sd]=t(a.substr(d)),l(c).bigHour=!0}),aa("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[Rd]=t(a.substr(0,d)),b[Sd]=t(a.substr(d,2)),b[Td]=t(a.substr(e)),l(c).bigHour=!0}),aa("Hmm",function(a,b,c){var d=a.length-2;b[Rd]=t(a.substr(0,d)),b[Sd]=t(a.substr(d))}),aa("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[Rd]=t(a.substr(0,d)),b[Sd]=t(a.substr(d,2)),b[Td]=t(a.substr(e))});var ye=/[ap]\.?m?\.?/i,ze=O("Hours",!0);T("m",["mm",2],0,"minute"),L("minute","m"),Y("m",Ad),Y("mm",Ad,wd),aa(["m","mm"],Sd);var Ae=O("Minutes",!1);T("s",["ss",2],0,"second"),L("second","s"),Y("s",Ad),Y("ss",Ad,wd),aa(["s","ss"],Td);var Be=O("Seconds",!1);T("S",0,0,function(){return~~(this.millisecond()/100)}),T(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),T(0,["SSS",3],0,"millisecond"),T(0,["SSSS",4],0,function(){return 10*this.millisecond()}),T(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),T(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),T(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),T(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),T(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),L("millisecond","ms"),Y("S",Dd,vd),Y("SS",Dd,wd),Y("SSS",Dd,xd);var Ce;for(Ce="SSSS";Ce.length<=9;Ce+="S")Y(Ce,Gd);for(Ce="S";Ce.length<=9;Ce+="S")aa(Ce,wc);var De=O("Milliseconds",!1);T("z",0,0,"zoneAbbr"),T("zz",0,0,"zoneName");var Ee=q.prototype;Ee.add=ne,Ee.calendar=mb,Ee.clone=nb,Ee.diff=ub,Ee.endOf=Gb,Ee.format=yb,Ee.from=zb,Ee.fromNow=Ab,Ee.to=Bb,Ee.toNow=Cb,Ee.get=R,Ee.invalidAt=Pb,Ee.isAfter=ob,Ee.isBefore=pb,Ee.isBetween=qb,Ee.isSame=rb,Ee.isSameOrAfter=sb,Ee.isSameOrBefore=tb,Ee.isValid=Nb,Ee.lang=pe,Ee.locale=Db,Ee.localeData=Eb,Ee.max=ie,Ee.min=he,Ee.parsingFlags=Ob,Ee.set=R,Ee.startOf=Fb,Ee.subtract=oe,Ee.toArray=Kb,Ee.toObject=Lb,Ee.toDate=Jb,Ee.toISOString=xb,Ee.toJSON=Mb,Ee.toString=wb,Ee.unix=Ib,Ee.valueOf=Hb,Ee.creationData=Qb,Ee.year=ge,Ee.isLeapYear=va,Ee.weekYear=Sb,Ee.isoWeekYear=Tb,Ee.quarter=Ee.quarters=Yb,Ee.month=ja,Ee.daysInMonth=ka,Ee.week=Ee.weeks=ac,Ee.isoWeek=Ee.isoWeeks=bc,Ee.weeksInYear=Vb,Ee.isoWeeksInYear=Ub,Ee.date=re,Ee.day=Ee.days=ic,Ee.weekday=jc,Ee.isoWeekday=kc,Ee.dayOfYear=pc,Ee.hour=Ee.hours=ze,Ee.minute=Ee.minutes=Ae,Ee.second=Ee.seconds=Be,Ee.millisecond=Ee.milliseconds=De,Ee.utcOffset=Wa,Ee.utc=Ya,Ee.local=Za,Ee.parseZone=$a,Ee.hasAlignedHourOffset=_a,Ee.isDST=ab,Ee.isDSTShifted=bb,Ee.isLocal=cb,Ee.isUtcOffset=db,Ee.isUtc=eb,Ee.isUTC=eb,Ee.zoneAbbr=xc,Ee.zoneName=yc,Ee.dates=w("dates accessor is deprecated. Use date instead.",re),Ee.months=w("months accessor is deprecated. Use month instead",ja),Ee.years=w("years accessor is deprecated. Use year instead",ge),Ee.zone=w("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Xa);var Fe=Ee,Ge={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},He={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ie="Invalid date",Je="%d",Ke=/\d{1,2}/,Le={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Me=C.prototype;Me._calendar=Ge,Me.calendar=Bc,Me._longDateFormat=He,Me.longDateFormat=Cc,Me._invalidDate=Ie,Me.invalidDate=Dc,Me._ordinal=Je,Me.ordinal=Ec,Me._ordinalParse=Ke,Me.preparse=Fc,Me.postformat=Fc,Me._relativeTime=Le,Me.relativeTime=Gc,Me.pastFuture=Hc,Me.set=A,Me.months=ea,Me._months=Yd,Me.monthsShort=fa,Me._monthsShort=Zd,Me.monthsParse=ha,Me._monthsRegex=_d,Me.monthsRegex=ma,Me._monthsShortRegex=$d,Me.monthsShortRegex=la,Me.week=Zb,Me._week=qe,Me.firstDayOfYear=_b,Me.firstDayOfWeek=$b,Me.weekdays=dc,Me._weekdays=se,Me.weekdaysMin=fc,Me._weekdaysMin=ue,Me.weekdaysShort=ec,Me._weekdaysShort=te,Me.weekdaysParse=hc,Me._weekdaysRegex=ve,Me.weekdaysRegex=lc,Me._weekdaysShortRegex=we,Me.weekdaysShortRegex=mc,Me._weekdaysMinRegex=xe,Me.weekdaysMinRegex=nc,Me.isPM=uc,Me._meridiemParse=ye,Me.meridiem=vc,G("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===t(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),c.lang=w("moment.lang is deprecated. Use moment.locale instead.",G),c.langData=w("moment.langData is deprecated. Use moment.localeData instead.",J);var Ne=Math.abs,Oe=$c("ms"),Pe=$c("s"),Qe=$c("m"),Re=$c("h"),Se=$c("d"),Te=$c("w"),Ue=$c("M"),Ve=$c("y"),We=ad("milliseconds"),Xe=ad("seconds"),Ye=ad("minutes"),Ze=ad("hours"),$e=ad("days"),_e=ad("months"),af=ad("years"),bf=Math.round,cf={s:45,m:45,h:22,d:26,M:11},df=Math.abs,ef=Qa.prototype;ef.abs=Qc,ef.add=Sc,ef.subtract=Tc,ef.as=Yc,ef.asMilliseconds=Oe,ef.asSeconds=Pe,ef.asMinutes=Qe,ef.asHours=Re,ef.asDays=Se,ef.asWeeks=Te,ef.asMonths=Ue,ef.asYears=Ve,ef.valueOf=Zc,ef._bubble=Vc,ef.get=_c,ef.milliseconds=We,ef.seconds=Xe,ef.minutes=Ye,ef.hours=Ze,ef.days=$e,ef.weeks=bd,ef.months=_e,ef.years=af,ef.humanize=fd,ef.toISOString=gd,ef.toString=gd,ef.toJSON=gd,ef.locale=Db,ef.localeData=Eb,ef.toIsoString=w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",gd),ef.lang=pe,T("X",0,0,"unix"),T("x",0,0,"valueOf"),Y("x",Hd),Y("X",Kd),aa("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),aa("x",function(a,b,c){c._d=new Date(t(a))}),c.version="2.13.0",d(Ma),c.fn=Fe,c.min=Oa,c.max=Pa,c.now=je,c.utc=j,c.unix=zc,c.months=Lc,c.isDate=f,c.locale=G,c.invalid=n,c.duration=fb,c.isMoment=r,c.weekdays=Nc,c.parseZone=Ac,c.localeData=J,c.isDuration=Ra,c.monthsShort=Mc,c.weekdaysMin=Pc,c.defineLocale=H,c.updateLocale=I,c.locales=K,c.weekdaysShort=Oc,c.normalizeUnits=M,c.relativeTimeThreshold=ed,c.prototype=Fe;var ff=c;return ff})},{}],46:[function(a,b,c){"use strict";b.exports=a("./lib")},{"./lib":51}],47:[function(a,b,c){"use strict";function d(){}function e(a){try{return a.then}catch(b){return r=b,s}}function f(a,b){try{return a(b)}catch(c){return r=c,s}}function g(a,b,c){try{a(b,c)}catch(d){return r=d,s}}function h(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,a!==d&&p(a,this)}function i(a,b,c){return new a.constructor(function(e,f){var g=new h(d);g.then(e,f),j(a,new o(b,c,g))})}function j(a,b){for(;3===a._81;)a=a._65;return h._10&&h._10(a),0===a._81?0===a._45?(a._45=1,void(a._54=b)):1===a._45?(a._45=2,void(a._54=[a._54,b])):void a._54.push(b):void k(a,b)}function k(a,b){q(function(){var c=1===a._81?b.onFulfilled:b.onRejected;if(null===c)return void(1===a._81?l(b.promise,a._65):m(b.promise,a._65));var d=f(c,a._65);d===s?m(b.promise,r):l(b.promise,d)})}function l(a,b){if(b===a)return m(a,new TypeError("A promise cannot be resolved with itself."));if(b&&("object"==typeof b||"function"==typeof b)){var c=e(b);if(c===s)return m(a,r);if(c===a.then&&b instanceof h)return a._81=3,a._65=b,void n(a);if("function"==typeof c)return void p(c.bind(b),a)}a._81=1,a._65=b,n(a)}function m(a,b){a._81=2,a._65=b,h._97&&h._97(a,b),n(a)}function n(a){if(1===a._45&&(j(a,a._54),a._54=null),2===a._45){for(var b=0;b<a._54.length;b++)j(a,a._54[b]);a._54=null}}function o(a,b,c){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.promise=c}function p(a,b){var c=!1,d=g(a,function(a){c||(c=!0,l(b,a))},function(a){c||(c=!0,m(b,a))});c||d!==s||(c=!0,m(b,r))}var q=a("asap/raw"),r=null,s={};b.exports=h,h._10=null,h._97=null,h._61=d,h.prototype.then=function(a,b){if(this.constructor!==h)return i(this,a,b);var c=new h(d);return j(this,new o(a,b,c)),c}},{"asap/raw":2}],48:[function(a,b,c){"use strict";var d=a("./core.js");b.exports=d,d.prototype.done=function(a,b){var c=arguments.length?this.then.apply(this,arguments):this;c.then(null,function(a){setTimeout(function(){throw a},0)})}},{"./core.js":47}],49:[function(a,b,c){"use strict";function d(a){var b=new e(e._61);return b._81=1,b._65=a,b}var e=a("./core.js");b.exports=e;var f=d(!0),g=d(!1),h=d(null),i=d(void 0),j=d(0),k=d("");e.resolve=function(a){if(a instanceof e)return a;if(null===a)return h;if(void 0===a)return i;if(a===!0)return f;if(a===!1)return g;if(0===a)return j;if(""===a)return k;if("object"==typeof a||"function"==typeof a)try{var b=a.then;if("function"==typeof b)return new e(b.bind(a))}catch(c){return new e(function(a,b){b(c)})}return d(a)},e.all=function(a){var b=Array.prototype.slice.call(a);return new e(function(a,c){function d(g,h){if(h&&("object"==typeof h||"function"==typeof h)){if(h instanceof e&&h.then===e.prototype.then){for(;3===h._81;)h=h._65;return 1===h._81?d(g,h._65):(2===h._81&&c(h._65),void h.then(function(a){d(g,a)},c))}var i=h.then;if("function"==typeof i){var j=new e(i.bind(h));return void j.then(function(a){d(g,a)},c)}}b[g]=h,0===--f&&a(b)}if(0===b.length)return a([]);for(var f=b.length,g=0;g<b.length;g++)d(g,b[g])})},e.reject=function(a){return new e(function(b,c){c(a)})},e.race=function(a){return new e(function(b,c){a.forEach(function(a){e.resolve(a).then(b,c)})})},e.prototype["catch"]=function(a){return this.then(null,a)}},{"./core.js":47}],50:[function(a,b,c){"use strict";var d=a("./core.js");b.exports=d,d.prototype["finally"]=function(a){return this.then(function(b){return d.resolve(a()).then(function(){return b})},function(b){return d.resolve(a()).then(function(){throw b})})}},{"./core.js":47}],51:[function(a,b,c){"use strict";b.exports=a("./core.js"),
a("./done.js"),a("./finally.js"),a("./es6-extensions.js"),a("./node-extensions.js"),a("./synchronous.js")},{"./core.js":47,"./done.js":48,"./es6-extensions.js":49,"./finally.js":50,"./node-extensions.js":52,"./synchronous.js":53}],52:[function(a,b,c){"use strict";function d(a,b){for(var c=[],d=0;b>d;d++)c.push("a"+d);var e=["return function ("+c.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(c).concat([h]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],e)(f,a)}function e(a){for(var b=Math.max(a.length-1,3),c=[],d=0;b>d;d++)c.push("a"+d);var e=["return function ("+c.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+b+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+h+";","var res;","switch (argLength) {",c.concat(["extra"]).map(function(a,b){return"case "+b+":res = fn.call("+["self"].concat(c.slice(0,b)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],e)(f,a)}var f=a("./core.js"),g=a("asap");b.exports=f,f.denodeify=function(a,b){return"number"==typeof b&&b!==1/0?d(a,b):e(a)};var h="function (err, res) {if (err) { rj(err); } else { rs(res); }}";f.nodeify=function(a){return function(){var b=Array.prototype.slice.call(arguments),c="function"==typeof b[b.length-1]?b.pop():null,d=this;try{return a.apply(this,arguments).nodeify(c,d)}catch(e){if(null===c||"undefined"==typeof c)return new f(function(a,b){b(e)});g(function(){c.call(d,e)})}}},f.prototype.nodeify=function(a,b){return"function"!=typeof a?this:void this.then(function(c){g(function(){a.call(b,null,c)})},function(c){g(function(){a.call(b,c)})})}},{"./core.js":47,asap:1}],53:[function(a,b,c){"use strict";var d=a("./core.js");b.exports=d,d.enableSynchronous=function(){d.prototype.isPending=function(){return 0==this.getState()},d.prototype.isFulfilled=function(){return 1==this.getState()},d.prototype.isRejected=function(){return 2==this.getState()},d.prototype.getValue=function(){if(3===this._81)return this._65.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._65},d.prototype.getReason=function(){if(3===this._81)return this._65.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._65},d.prototype.getState=function(){return 3===this._81?this._65.getState():-1===this._81||-2===this._81?0:this._81}},d.disableSynchronous=function(){d.prototype.isPending=void 0,d.prototype.isFulfilled=void 0,d.prototype.isRejected=void 0,d.prototype.getValue=void 0,d.prototype.getReason=void 0,d.prototype.getState=void 0}},{"./core.js":47}],"aggregated_link.js":[function(a,b,c){"use strict";function d(a,b){return{selected:a.selected,loop:a.loop,type:a.type,coefficient:a.coefficient,timelag:a.timelag,bidirectional:a.bidirectional,debugNode:b[a.node1].selected,x1:b[a.node1].x,y1:b[a.node1].y,x2:b[a.node2].x,y2:b[a.node2].y,width:parseFloat(a.width),fromRadius:parseFloat(b[a.node1].radius),targetRadius:parseFloat(b[a.node2].radius)}}b.exports=d},{}],"algorithms/algorithms.js":[function(a,b,c){"use strict";b.exports={sort:a("./sort.js")}},{"./sort.js":"algorithms/sort.js"}],"algorithms/package.json":[function(a,b,c){b.exports={name:"algorithms",main:"./algorithms.js"}},{}],"algorithms/sort.js":[function(a,b,c){"use strict";function d(a,b,c){var d=a[c];a[c]=a[b],a[b]=d}function e(a,b,c){if(c>b){var d=f(a,b,c);e(a,b,d-1),e(a,d+1,c)}}function f(a,b,c){for(var e=a[c],f=b,g=b;c>g;g++)a[g]<=e&&(d(a,f,g),f+=1);return d(a,f,c),f}function g(a,b,c,e){for(var f=a[c],g=b,h=b;c>h;h++)e(a[h],f)<=0&&(d(a,g,h),g+=1);return d(a,g,c),g}function h(a,b,c,d){if(c>b){var e=g(a,b,c,d);h(a,b,e-1,d),h(a,e+1,c,d)}}function i(a,b){return b&&"function"==typeof b?h(a,0,a.length-1,b):void e(a,0,a.length-1)}function j(a,b){if(b>=a[a.length-1])return a.length;if(b<=a[0])return 0;for(var c=0,d=a.length;d>=c;){var e=parseInt((c+d)/2);if(a[e]===b)return e;a[e]<b?d=e-1:c=e+1}return-1}b.exports={quicksort:e,quicksortArray:i,sortedGetInsertIndex:j}},{}],"async_middleware.js":[function(a,b,c){function d(){var a=Array.apply(null,arguments);return function(){for(var b=[],c=[],d=0;d<arguments.length;d++){if("function"!=typeof arguments[d])throw"Not a function given to asyncMiddleware";if(arguments[d].length===a.length+1)b.push(arguments[d]);else{if(arguments[d].length!==a.length+2)throw console.error(arguments[d].length,a,a.length),"Invalid amount of parameters to middleware.";c.push(arguments[d])}}return function(){var d=-1,e=-1,f=function(g){if(g)return e++,d=a.length,c[e].apply(null,[g].concat(a));if(d++,!(d>=b.length)){var h=b[d];return h.length===a.length+1?h.apply(null,a.concat(f)):void 0}};f()}}}b.exports=d},{}],"breakout.js":[function(a,b,c){"use strict";b.exports={nodes:function(a){var b=a.nodeData,c=a.nodeGui,d=[];return Object.keys(b).forEach(function(a){if(c[a]){var e=b[a];Object.keys(c[a]).forEach(function(b){e[b]=c[a][b]}),d.push(e)}}),d},links:function(a){var b=a.links,c=[];return Object.keys(b).forEach(function(a){c.push(b[a])}),c}}},{}],"canvas/arithmetics.js":[function(a,b,c){"use strict";b.exports={mouseToCanvas:function(a,b){for(var c=0,d=0,e=b.offsetParent;e;)e.offsetLeft&&(c+=e.offsetLeft),e.offsetTop&&(d+=e.offsetTop),e=e.offsetParent;c+=b.offsetLeft,d+=b.offsetTop;var f=a.x-c+(b.panX||0),g=a.y-d+(b.panY||0);return{x:f,y:g}},canvasToMouse:function(a,b){for(var c=0,d=0,e=b.offsetParent;e;)e.offsetLeft&&(c+=e.offsetLeft),e.offsetTop&&(d+=e.offsetTop),e=e.offsetParent;c+=b.offsetLeft,d+=b.offsetTop;var f=a.x+c-(b.panX||0),g=a.y+d-(b.panY||0);return{x:f,y:g}}}},{}],"canvas/canvas.js":[function(a,b,c){"use strict";b.exports=function(a,b){b.width=a.offsetWidth,b.height=.5*(a.offsetHeight-20);return b.onmousedown=function(a){a.preventDefault()},b}},{}],"canvas/package.json":[function(a,b,c){b.exports={name:"s4u_canvas",main:"./canvas.js"}},{}],"collisions.js":[function(a,b,c){"use strict";var d=a("./object-helper.js"),e=function(a){return a.x1>a.x2&&(a=d.merge.call(a,{x1:a.x2,x2:a.x1})),a.y1>a.y2&&(a=d.merge.call(a,{y1:a.y2,y2:a.y1})),{x:a.x1-a.width/2,y:a.y1-a.width/2,width:a.x2-a.x1+a.width/2,height:a.y2-a.y1+a.width/2}},f={pointCircle:function(a,b){var c=Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2));return c<=b.radius},pointRect:function(a,b){return a.x>=b.x&&a.x<=b.x+b.width&&a.y>=b.y&&a.y<=b.y+b.height},circleCircle:function(a,b){var c=Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2));return c<=a.radius+b.radius},pointLine:function(a,b){if(!f.pointRect(a,e(b)))return!1;var c={x1:a.x,y1:a.y,x2:b.x2,y2:b.y2},d=Math.atan2(b.y2-b.y1,b.x2-b.x1),g=Math.atan2(c.y2-c.y1,c.x2-c.x1),h=d-g,i=Math.sqrt(Math.pow(c.x1-c.x2,2)+Math.pow(c.y1-c.y2,2)),j=i*Math.sin(h),k=j<=b.width/2&&j>=-b.width/2;return k},hitTest:function(a,b){var c={};return c.circles=[],c.lines=[],c.points=[],a.radius?c.circles.push(a):a.x1&&a.x2&&a.y1&&a.y2?c.lines.push(a):c.points.push(a),b.radius?c.circles.push(b):b.x1&&b.x2&&b.y1&&b.y2?c.lines.push(b):c.points.push(b),2===c.circles.length?f.circleCircle(c.circles[0],c.circles[1]):1===c.points.length&&1===c.lines.length?f.pointLine(c.points[0],c.lines[0]):1===c.circles.length&&1===c.points.length?f.pointCircle(c.points[0],c.circles[0]):(console.error("UNDEFINED"),void console.error(a))}};b.exports=f},{"./object-helper.js":"object-helper.js"}],"curry.js":[function(a,b,c){"use strict";function d(a){var b=Array.prototype.splice.call(arguments,1);return function(){var c=Array.prototype.splice.call(arguments,0),e=b.concat(c);return a.length>e.length?d(a,e):a.apply(this,e)}}b.exports=d},{}],"floating_window/floating_window.js":[function(a,b,c){"use strict";function d(a,b,c,d,e){this.container,this.body,this.title,this.x=a,this.y=b,this.w=c,this.h=d,this.className=e,this.createWindow(a,b,c,d,e)}var e=a("./../menu_builder");d.prototype={createWindow:function(a,b,c,d){if(!this.container){!a&&this.x&&!b&&this.y&&!c&&this.w&&!d&&this.h&&(a=this.x,b=this.y,c=this.w,d=this.h),this.container=e.div("mb-floating-window");var f=this.container,g=this;this.container.style.left=a+"px",this.container.style.top=b+"px",this.container.style.width=c+"px",this.container.style.height=d+20+"px",this.title=e.div("title"),this.clear=e.div("clear"),this.killButton=e.div("kill-button"),this.body=e.div(this.className),this.body.style.height=d+"px",this.title.appendChild(this.killButton),this.title.appendChild(this.clear),this.container.appendChild(this.title),this.container.appendChild(this.body),this.killCallback=function(){g.destroyWindow()},this.killButton.addEventListener("click",this.killCallback);var h=0,i=0;this.initializeMove=function(a){h=a.clientX,i=a.clientY,document.body.addEventListener("mousemove",j),document.body.addEventListener("mouseup",g.deactivateMove)},this.deactivateMove=function(){document.body.removeEventListener("mousemove",j),document.body.removeEventListener("mouseup",g.deactivateMove)};var j=function(a){var b=a.clientX-h,c=a.clientY-i;h=a.clientX,i=a.clientY,g.x=g.x+b,g.y=g.y+c,f.style.left=g.x+"px",f.style.top=g.y+"px"};this.title.addEventListener("mousedown",this.initializeMove)}},destroyWindow:function(){null!==this.container&&(this.killButton.removeEventListener("click",this.killCallback),this.title.removeEventListener("mousedown",this.initializeMove),document.body.removeEventListener("mouseup",this.deactivateMove),document.body.removeChild(this.container),this.container=null,this.body=null,this.title=null,this.clear=null,this.killButton=null,this.span=null,this.killCallback=null,this.initializeMove=null)}},b.exports=d},{"./../menu_builder":"menu_builder/menu_builder.js"}],"floating_window/package.json":[function(a,b,c){b.exports={name:"floating_window",main:"./floating_window.js"}},{}],"generate_id.js":[function(a,b,c){"use strict";var d=0,e=function(){return d++,d};b.exports=e},{}],"graphics/draw_actor.js":[function(a,b,c){"use strict";function d(a,b,c,d){var e=d.nodeGui[c.node1],f=d.nodeGui[c.node2],g=e.x,h=f.x,i=e.y,j=f.y,k=e.radius+8,l=f.radius+8*b;e.color&&(a.strokeStyle=e.color,a.lineWidth=4,a.beginPath(),a.arc(g,i,k,0,360),a.stroke(),a.beginPath(),a.arc(h,j,l,0,360),a.stroke())}b.exports=d},{}],"graphics/draw_change.js":[function(a,b,c){"use strict";var d=a("./value_colors.js");b.exports=function(a,b,c,e,f){if(a.fillStyle=d.neutral,f>0)a.fillStyle=d.positive;else if(0>f)a.fillStyle=d.negative;else if(isNaN(f))return;a.textBaseline="top",a.font="22px Monospace";var g=f+"%",h=e/g.length,i=h/.6;a.font=i+"px Monospace";var j=a.measureText(g);a.fillText(g,b-j.width/2,c+4-i/2)}},{"./value_colors.js":"graphics/value_colors.js"}],"graphics/draw_circle.js":[function(a,b,c){"use strict";b.exports=function(a,b,c){a.fillStyle=c,a.beginPath(),a.arc(b.get("x"),b.get("y"),b.get("radius"),0,360),a.fill()}},{}],"graphics/draw_coordinate.js":[function(a,b,c){"use strict";function d(a,b,c,d){a.strokeStyle=d,a.lineJoin="miter",a.lineCap="square",a.lineWidth=6,a.beginPath(),a.moveTo(0,c),a.lineTo(b,c),a.lineTo(b,0),a.stroke()}b.exports=d},{}],"graphics/draw_line_graph.js":[function(a,b,c){"use strict";function d(a,b,c,d,f,g){function h(b,c,d,e){var f=o-o*(c-j)/(i-j),g=E*b;return void 0!==d&&void 0!==e&&(a.beginPath(),a.moveTo(d,e),a.lineTo(g,f),a.stroke()),a.beginPath(),a.arc(g,f,D,0,2*Math.PI),a.fill(),{x:g,y:f}}var i=0,j=!1,k=0;e.forEach.call(g,function(a){a.values.forEach(function(a,b){a>i&&(i=a),(j===!1||j>a)&&(j=a),b>k&&(k=b)})});var l=(d+f)/2*.05,m=b+40+l,n=c,o=f-40-l,p=d-40-l;a.strokeStyle="#000000",a.beginPath(),a.moveTo(b+40,c),a.lineTo(b+40,c+f-40),a.lineTo(b+d,c+f-40),a.stroke();var q=c+f-36,r=14;a.font=r+"px Arial",a.textBaseline="top",a.fillText(0,b+36+l,q);var s=Math.round(k/2);a.measureText(s).width;a.fillText(s,b+40+(d-40)/2,q);var t=a.measureText(k).width;a.fillText(k,b+d-t,q);var u="Timestep",v=a.measureText(u).width;a.fillText("Timestep",b+40+(d-40)/2-v/2,c+f-16),a.textBaseline="middle";var w=c+f-44-l/2,x=a.measureText(i).width;a.fillText(i,b+36-x,c);var y=(i-j)/2+j,z=a.measureText(y).width;a.fillText(y,b+36-z,(c+w)/2);var A=a.measureText(j).width;a.fillText(j,b+36-A,w);var B="Value",C=a.measureText(B).width;a.save(),a.translate(b,(c+f-40)/2),a.rotate(Math.PI/2),a.fillText(B,0-C/2,0),a.restore();var D=5,E=p/k;e.forEach.call(g,function(b){var c,d=void 0,e=void 0,f=0;a.save(),a.translate(m,n),a.fillStyle=b.color,a.strokeStyle=b.color,a.lineWidth=4,a.lineCap="round",b.values.forEach(function(a,b){c=h(b,a,d,e),f=a,d=c.x,e=c.y}),a.restore()}),console.log("Linegraph drawn.")}var e=a("./../object-helper.js");b.exports=d},{"./../object-helper.js":"object-helper.js"}],"graphics/draw_link.js":[function(a,b,c){"use strict";var d=a("./value_colors.js");a("./draw_coordinate.js");b.exports=function(a,b){var c=b.x1,e=b.y1,f=b.x2,g=b.y2,h=f-c,i=g-e,j=Math.sqrt(h*h+i*i),k=Math.atan2(i,h),l=b.fromRadius+8,m=b.targetRadius+8,n=b.width,o=.8*n,p=25,q=c+Math.cos(k)*l,r=e+Math.sin(k)*l,s=c+Math.cos(k)*(j-(m+o)),t=e+Math.sin(k)*(j-(m+o)),u=q+Math.cos(k)*((j-l-m)/2),v=r+Math.sin(k)*((j-l-m)/2),w=c+Math.cos(k)*(j-(m+p)),x=e+Math.sin(k)*(j-(m+p)),y=Math.PI/2,z=10,A=k+y,B=k-y,C=w+Math.cos(A)*z,D=x+Math.sin(A)*z,E=w+Math.cos(B)*z,F=x+Math.sin(B)*z;u+20*Math.cos(A),v+20*Math.sin(A);if(!(l+m>j)){if(a.lineJoin="miter",a.lineCap="square",b.selected===!0?a.strokeStyle="rgba(0,0,0, 0.6)":b.loop===!0?a.strokeStyle="rgba(220, 30, 140, 0.8)":b.coefficient>0?a.strokeStyle=d.positive:b.coefficient<0?a.strokeStyle=d.negative:a.strokeStyle="rgba(0,0,0, 0.6)",a.lineWidth=1.2*b.width,a.beginPath(),b.bidirectional){var G=q+Math.cos(k)*o,H=r+Math.sin(k)*o,q=q+Math.cos(k)*p,r=r+Math.sin(k)*p,I=q+Math.cos(A)*z,J=r+Math.sin(A)*z,K=q+Math.cos(B)*z,L=r+Math.sin(B)*z;a.moveTo(q,r),a.lineTo(I,J),a.lineTo(G,H),a.lineTo(K,L),a.lineTo(q,r)}if(a.moveTo(q,r),a.lineTo(w,x),a.lineTo(C,D),a.lineTo(s,t),a.lineTo(E,F),a.lineTo(w,x),a.closePath(),a.stroke(),"halfchannel"===b.type&&(a.strokeStyle="rgba(255, 255, 255, 1)",a.lineWidth=b.width,a.lineJoin="miter",a.lineCap="square",a.beginPath(),a.moveTo(q,r),a.lineTo(w,x),a.lineTo(C,D),a.lineTo(s,t),a.lineTo(E,F),a.lineTo(w,x),a.closePath(),a.stroke()),void 0!==b.coefficient){var M=14,N=8;a.font=M+"px Arial";var O=b.coefficient;O>0?a.fillStyle=d.positive:0>O?a.fillStyle=d.negative:a.fillStyle=d.neutral;var P=a.measureText(O),Q=O,R=b.timelag;void 0!==R&&(Q+=", T: "+R);var S=a.measureText(Q);a.textBaseline="middle";var T=S.width/2,U=M/2,V=T+N,W=U+N,X=u-T+Math.cos(k+y)*V,Y=v+U+Math.sin(k+y)*W;a.fillText(O,X,Y),void 0!==R&&(a.fillStyle=d.neutral,a.fillText(", T: "+b.timelag,X+P.width,Y))}}}},{"./draw_coordinate.js":"graphics/draw_coordinate.js","./value_colors.js":"graphics/value_colors.js"}],"graphics/draw_linker.js":[function(a,b,c){"use strict";b.exports=function(a,b,c){a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=10,a.shadowColor="rgba(0, 0, 0, 0.5)",a.fillStyle="red",a.beginPath();var d=b(c);a.arc(d.x,d.y,d.radius,0,360),a.fill(),a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0,a.shadowColor="rgba(0, 0, 0, 1)"}},{}],"graphics/draw_node.js":[function(a,b,c){"use strict";var d=a("./draw_picture"),e=a("./draw_circle"),f=[{color:"rgba(255, 85, 85, 1)",conditions:[function(a){return"actor"===a.type},function(a){return a.selected===!0}]},{color:"rgba(255, 75, 75, 0.9)",conditions:[function(a){return"actor"===a.type}]},{color:"rgba(195, 85, 255, 1)",conditions:[function(a){return"origin"===a.type},function(a){return a.selected===!0}]},{color:"rgba(175, 75, 255, 0.9)",conditions:[function(a){return"origin"===a.type}]},{color:"rgba(255, 195, 85, 1)",conditions:[function(a){return a.selected===!0}]},{color:"rgba(255, 175, 75, 0.9)",conditions:[]}];b.exports=function g(b,c){var h=f.filter(function(a){for(var b=0;b<a.conditions.length;b++)if(!a.conditions[b](c))return!1;return!0});if(c.avatar?d(b,c.avatar,c,function(a,d,e,f){g(b,c)}):(b.fillStyle=h[0].color,b.beginPath(),b.arc(c.x,c.y,c.radius,0,360),b.fill()),c.linegraph&&c.color&&(b.strokeStyle=c.color,b.lineWidth=4,b.beginPath(),b.arc(c.x,c.y,c.radius+8,0,360),b.stroke()),c.icon){var i=a("../icon")(c);e(b,i,h[0].color),d(b,c.icon,i,function(){g(b,c)})}return}},{"../icon":"icon.js","./draw_circle":"graphics/draw_circle.js","./draw_picture":"graphics/draw_picture.js"}],"graphics/draw_picture.js":[function(a,b,c){"use strict";function d(a,b,c){a.globalCompositeOperation="source-over",a.save(),a.beginPath(),a.arc(c.x,c.y,c.radius+2,0,360),a.clip(),a.drawImage(b,c.x-c.radius,c.y-c.radius,2*c.radius,2*c.radius),a.restore(),a.globalCompositeOperation="source-over"}function e(a,b,c,i){i=i||e;var j=null;if(f.hasOwnProperty(b)){if(j=f[b],j.isLoading===!0)return void j.nodesWaiting.push(c);try{d(a,j,c)}catch(k){a.restore(),console.error(k),f[b]=c.url+"/"+h}}else j=new Image,f[b]=j,j.src=c.url+"/"+b,j.isLoading=!0,j.nodesWaiting=[c],j.onload=function(){j.isLoading=!1,j.nodesWaiting.forEach(function(b){d(a,j,b)}),j.nodesWaiting=void 0},j.onerror=function(e){f[b]=h,h.src?h.isLoading?h.nodesWaiting.push(c):d(a,h,c):(h.src=c.url+"/"+g,h.isLoading=!0,h.nodesWaiting=[c],h.onload=function(){h.nodesWaiting.forEach(function(b){d(a,h,b)}),h.isLoading=!1,delete h.nodesWaiting})}}var f={},g="img/not-found.png",h=new Image;b.exports=e},{}],"graphics/draw_text.js":[function(a,b,c){"use strict";b.exports=function(a,b,c,d,e,f,g,h,i){var j=g||"18",k=h||"sans-serif",l=c||0,m=d||0,n=e||"rgba(80,80,80,1)",o=i||"top";a.textBaseline=o,a.fillStyle=n,a.font=j+"px "+k,f&&(l-=a.measureText(b).width/2),a.fillText(b,l,m)}},{}],"graphics/draw_time_table.js":[function(a,b,c){"use strict";var d=(a("../menu_builder"),a("./../object-helper.js")),e=a("./value_colors.js");b.exports=function(a,b,c){var f=c.steps,g=24,h=b.y-g/2-g*d.size.call(f)/2,i=0,j=0,k=0,l=[];a.font=g+"px Arial",d.forEach.call(f,function(b,c){b=Math.round(100*b)/100;var d=" ";b>0?d="+":0>b&&(d="-");var e=("T"+c+", "+d+" "+Math.abs(b)+"%",a.measureText("T"+c+", ").width),f=a.measureText(d+" ").width,g=a.measureText(Math.abs(b)+"%").width;e>i&&(i=e),f>j&&(j=f),g>k&&(k=g),l.push({step:c,symbol:d,value:b})});var m=b.x-b.radius-k-8,n=m-j,o=n-i;l.forEach(function(b,c){var d="T"+b.step+", ",f=b.symbol+" ",i=Math.abs(b.value)+"%";a.textBaseline="top";var j=h+g*c;a.fillStyle="rgba(30, 50, 100, 1.0)",a.fillText(d,o,j);var k=e.neutral;b.value>0?k=e.positive:b.value<0&&(k=e.negative),a.fillStyle=k,a.fillText(f,n,j),a.fillStyle=k,a.fillText(i,m,j)})}},{"../menu_builder":"menu_builder/menu_builder.js","./../object-helper.js":"object-helper.js","./value_colors.js":"graphics/value_colors.js"}],"graphics/value_colors.js":[function(a,b,c){"use strict";b.exports={neutral:"rgba(80, 80, 80, 1.0)",positive:"rgba(20, 150, 40, 1.0)",negative:"rgba(150, 20, 40, 1.0)"}},{}],"icon.js":[function(a,b,c){"use strict";function d(a){var b=a.x,c=a.y;if(void 0!==a.iconXOffset&&void 0!==a.iconYOffset){var d=Math.atan2(a.iconYOffset,a.iconXOffset);b+=Math.cos(d)*a.radius,c+=Math.sin(d)*a.radius}else b-=.707*a.radius,c-=.707*a.radius;return{x:b,y:c,radius:30}}b.exports=d},{}],"information_tree/information_tree.js":[function(a,b,c){"use strict";function d(a){for(var b=this.nextElementSibling;b;)"keyword"===b.className?("none"===b.style.display?b.style.display="block":b.style.display="none",b=b.nextElementSibling):b=b.nextElementSibling}function e(a){a.preventDefault()}function f(){var a=document.createElement("div");return a.className="category",a}function g(a){var b=document.createElement("div");return b.className="header",b.innerHTML=a,b.addEventListener("click",d),b.addEventListener("mousedown",e,!1),b}function h(a,b){var c=document.createElement("div");c.className="keyword";var d=i(a),e=j(b),f=document.createElement("div");return f.style.clear="both",c.appendChild(d),c.appendChild(e),c.appendChild(f),c}function i(a){var b=document.createElement("div");return b.className="span",b.innerHTML=a,b}function j(a){var b=document.createElement("div");b.className="import-button";var c=function(){b.removeEventListener("click",c),k(b,b.parentElement.parentElement,a),a.appendChild(b.parentElement)};return b.addEventListener("click",c),b}function k(a,b,c){var d=function(){a.removeEventListener("click",d),k(a,c,b),b.appendChild(a.parentElement)};a.addEventListener("click",d)}function l(){var a=document.createElement("div");return a.className="save-button",a.innerHTML="Import selected keywords",a.addEventListener("mousedown",e,!1),a}var m=null;b.exports={addStrings:function(a,b){var c={},d=[],e=f(),i=g("To be imported");e.appendChild(i),b.forEach(function(a){m.Map.isMap(a)?(c[a.get("header")]||(c[a.get("header")]=[]),a.get("keys").forEach(function(b){c[a.get("header")].push(b)})):d.push(a)}),Object.keys(c).forEach(function(b){var d=c[b],i=f(),j=g(b);i.appendChild(j),d.forEach(function(a){i.appendChild(h(a,e))}),a.appendChild(i)});var j=f(),k=g("Unsorted");return j.appendChild(k),d.forEach(function(a){var b=h(a,e);j.appendChild(b)}),a.appendChild(j),a.appendChild(e),a.appendChild(l()),a}}},{}],"information_tree/package.json":[function(a,b,c){b.exports={name:"information_tree",main:"./information_tree.js"}},{}],"input/hotkey_e.js":[function(a,b,c){"use strict";var d=a("../canvas/arithmetics.js");a("./../collisions.js").hitTest,a("./../linker.js"),a("../structures/create_link");b.exports={keyCode:69,onDown:function(a,b,c){if(a.removeHotkeyEListeners&&a.removeHotkeyEListeners(),document.body===document.activeElement){var e=b.selected;if(e&&void 0!==e.x&&void 0!==e.y){b.nodeGui[e.id].linking=!0;var f=function(c){var f=d.mouseToCanvas({x:c.pageX,y:c.pageY},a);b.nodeGui[e.id].linkerX=f.x,b.nodeGui[e.id].linkerY=f.y,b.emit("refresh")},g=function(){a.removeHotkeyEListeners()};a.removeHotkeyEListeners=function(){a.removeEventListener("mousemove",f),a.removeEventListener("mouseup",g),delete a.removeHotkeyEListeners},a.addEventListener("mousemove",f),a.addEventListener("mouseup",g)}}},onUp:function(a,b,c){}}},{"../canvas/arithmetics.js":"canvas/arithmetics.js","../structures/create_link":"structures/create_link.js","./../collisions.js":"collisions.js","./../linker.js":"linker.js"}],"input/hotkey_esc.js":[function(a,b,c){"use strict";a("../canvas/arithmetics.js"),a("./../collisions.js").hitTest,a("./../linker.js"),a("../structures/create_link");b.exports={keyCode:27,onDown:function(a,b){var c=b.selected;if(c&&void 0!==c.x&&void 0!==c.y&&b.nodeGui[c.id].linking){var d=b.nodeGui[c.id];delete d.linkerX,delete d.linkerY,delete d.linking,document.body.removeHotkeyEListeners(),b.emit("refresh")}},onUp:function(a,b){}}},{"../canvas/arithmetics.js":"canvas/arithmetics.js","../structures/create_link":"structures/create_link.js","./../collisions.js":"collisions.js","./../linker.js":"linker.js"}],"input/hotkey_v.js":[function(a,b,c){"use strict";b.exports={keyCode:86,global:!0,onDown:function(a,b,c){-1!==b["static"].modifiers.indexOf(18)&&c.preventDefault()},onUp:function(a,b,c){-1!==b["static"].modifiers.indexOf(18)&&(b.emit("invertSidebar"),c.preventDefault())}}},{}],"input/hotkey_y.js":[function(a,b,c){"use strict";var d=17;b.exports={keyCode:89,onDown:function(a,b,c){-1!==b["static"].modifiers.indexOf(d)&&b.redo()},onUp:function(a,b,c){}}},{}],"input/hotkey_z.js":[function(a,b,c){"use strict";var d=17;b.exports={keyCode:90,onDown:function(a,b,c){-1!==b["static"].modifiers.indexOf(d)&&b.undo()},onUp:function(a,b,c){}}},{}],"input/mleft_down.js":[function(a,b,c){"use strict";function d(a,b,c){var d={env:b.environment,pos:c,nodeGui:b.nodeGui,links:b.links,linegraph:b.settings.linegraph};document.activeElement.blur();var g=e(d);return f.forEach.call(g.nodeGui,function(a,c){f.forEach.call(a,function(a,d){b.nodeGui[c][d]=a})}),f.forEach.call(g.links,function(a,c){f.forEach.call(a,function(a,d){b.links[c][d]=a})}),!0}var e=a("./../mouse_handling/handle_down.js"),f=a("./../object-helper.js");b.exports=d},{"./../mouse_handling/handle_down.js":"mouse_handling/handle_down.js","./../object-helper.js":"object-helper.js"}],"input/mleft_drag.js":[function(a,b,c){"use strict";var d=a("./mleft_down.js"),e=a("./mleft_move.js"),f=a("./mleft_up.js");b.exports={button:0,mouseDown:d,mouseMove:e,mouseUp:f}},{"./mleft_down.js":"input/mleft_down.js","./mleft_move.js":"input/mleft_move.js","./mleft_up.js":"input/mleft_up.js"}],"input/mleft_move.js":[function(a,b,c){"use strict";function d(a,b,c,d){var g={pos:c,deltaPos:d,settings:b.settings,nodeGui:b.nodeGui,links:b.links},h=e(g);f.forEach.call(h.nodeGui,function(a,c){f.forEach.call(a,function(a,d){b.nodeGui[c][d]=a})}),f.forEach.call(h.links,function(a,c){f.forEach.call(a,function(a,d){b.links[c][d]=a})}),b.settings.offsetX=h.settings.offsetX,b.settings.offsetY=h.settings.offsetY}var e=a("./../mouse_handling/handle_drag.js"),f=a("./../object-helper.js");b.exports=d},{"./../mouse_handling/handle_drag.js":"mouse_handling/handle_drag.js","./../object-helper.js":"object-helper.js"}],"input/mleft_up.js":[function(a,b,c){"use strict";function d(a,b,c){var d={pos:c,loadedModel:b,nodeData:b.nodeData,nodeGui:b.nodeGui,links:b.links,didDrag:b.didDrag,selected:b.selected,linegraph:b.settings.linegraph},g=e(d);f.forEach.call(g.nodeGui,function(a,c){f.forEach.call(a,function(a,d){b.nodeGui[c][d]=a})}),f.forEach.call(g.links,function(a,c){f.forEach.call(a,function(a,d){b.links[c][d]=a})}),b.selected!==g.selected&&(b.selected=g.selected),g.resetUI&&b.emit("resetUI"),g.refreshLinegraph&&b.emit("refreshLinegraph"),b.emit("select"),a.panX=-b.settings.offsetX,a.panY=-b.settings.offsetY}var e=a("./../mouse_handling/handle_up.js"),f=a("./../object-helper.js");b.exports=d},{"./../mouse_handling/handle_up.js":"mouse_handling/handle_up.js","./../object-helper.js":"object-helper.js"}],"input/mright_drag.js":[function(a,b,c){"use strict";function d(a,b,c){var d=b.nodeGui,e=i.filter.call(d,function(a){return g(a,c)});return e=i.slice.call(e,-1),i.forEach.call(e,function(a){a.offsetX=c.x-(a.x||0),a.offsetY=c.y-(a.y||0),a.linking=!0}),0!==Object.keys(e).length}function e(a,b,c,d){var e=b.nodeGui,f=i.filter.call(e,function(a){return a.linking});i.forEach.call(f,function(a){a.linkerX=c.x,a.linkerY=c.y})}function f(a,b,c){h(b);var d=b.nodeGui,e=i.filter.call(d,function(a){return a.linking});i.forEach.call(e,function(a){a.linking=!1,a.linkerX=0,a.linkerY=0})}var g=(a("../canvas/arithmetics.js"),a("./../collisions.js").hitTest),h=a("./../util/generate_link.js"),i=a("./../object-helper.js");b.exports={button:2,mouseDown:d,mouseMove:e,mouseUp:f}},{"../canvas/arithmetics.js":"canvas/arithmetics.js","./../collisions.js":"collisions.js","./../object-helper.js":"object-helper.js","./../util/generate_link.js":"util/generate_link.js"}],"linker.js":[function(a,b,c){"use strict";var d=function(a){return{x:a.linkerX||a.x+.9*a.radius,y:a.linkerY||a.y+.9*a.radius,radius:a.radius/10}};b.exports=d},{}],"main.js":[function(a,b,c){"use strict";function d(a){try{return a instanceof HTMLElement}catch(b){return"object"==typeof a&&1===obj.nodeType&&"object"==typeof obj.style&&"object"==typeof obj.ownerDocument}}function e(b,c,e,f){function g(a,c,d,e,f){var g=d.settings.linegraph;g&&S!==g?(F.height=Math.ceil(.5*(b.offsetHeight-20)),G.height=Math.floor(.5*(b.offsetHeight-20)),console.log("Shown again."),S!==g&&o()):g||(F.height=b.offsetHeight,G.height=0),S=g,f()}function h(a,b){var c=new C.MenuItem(300);return c.child.clicks=[],C.Button.prototype.click.call(c.child,function(a){if(a.target.groupOwner){var b=a.target.groupOwner;b.constructor(J,{name:b.name,role:b.role.toUpperCase()},{avatar:b.nodeImageSrc})}}),b.forEach(function(a){var b=c.addIconGroup(a.header);a.images.forEach(function(c){var d=b.addIcon(w.url+"/"+c.src);d.root.groupOwner=d,d.image.root.groupOwner=d,d.image.root.style["border-radius"]="50%",d.name=c.header,d.role=a.header,d.constructor=a.callback,d.nodeImageSrc=c.src})}),a.addItem(c),c}function i(a,b){var c=new C.MenuItem(300),d={};return b.forEach(function(a){switch(a.type){case"BUTTON":var b=c.addButton(a.header,function(){a.callback(J)});a.id&&(d[a.id]=b);break;case"CHECKBOX":var e=c.addCheckbox(a.header);e.onCheck(function(){a.onCheck(J)}),e.onUncheck(function(){a.onUncheck(J)}),a.id&&(d[a.id]=b);break;case"DROPDOWN":var f=c.addDropdown(a.header,a.values);f.defaultValue(function(){return a.defaultValue(J,a.values)}),f.onChange(function(){a.onChange(J,f.getValue())}),a.id&&(d[a.id]=f);break;case"SLIDER":var g=a.range(J),h=c.addSlider(a.header,g[0],g[1]);h.defaultValue(function(){var b=a.range(J);return h.setMin(b[0]),h.setMax(b[1]),a.defaultValue(J)}),a.onSlide&&h.onInput(function(){a.onSlide(J,h.getValue())}),h.onChange(function(){a.onChange(J,h.getValue())}),a.id&&(d[a.id]=h);break;case"INPUT":var i=c.addInput(a.header);i.defaultValue(function(){return a.defaultValue(J)}),i.onChange(function(){var b=i.getValue();"iterations"===a.id&&d.timestep.setMax(b),a.onChange(J,b)}),a.id&&(d[a.id]=i)}}),a.addItem(c),c}function j(a){var b=new C.MenuItem(300);b.setLabel("Load model"),b.child.clicks=[],aa.prototype.click.call(b.child,function(a){var b=a.target.modelButton,c=a.target.deleteModel;return b?void J.loadModel(b.syncId||b.id):c?void J.deleteModel(c.syncId||c.id):void 0});var c=[],d=function(a){var d;return a<c.length?d=c[a]:(d=b.addButton(),d.root.modelButton=d,c.push(d),d.label.root.modelButton=d),d},e=!1;return b.refresh=function(){J.getAllModels().then(function(a){var b=0;c.length;a=a.map(function(a,b,c){return c[c.length-(b+1)]}),a.forEach(function(a){if(!K.synced[a.id]||!K.local[K.synced[a.id].id]){var c=d(b);K.synced[a.id]?c.setLabel(K.synced[a.id].settings.name):c.setLabel(a.name),c.syncId=a.id,c.id=a.id,J.syncId===a.id&&(e&&e.setBackground(D.buttonBackground),c.setBackground(D.buttonCheckedBackground),e=c),b++}}),x.forEach.call(K.local,function(a){var c=d(b);c.setLabel(a.settings.name),c.syncId=a.syncId||!1,c.id=a.id,J.id===a.id&&(e&&e.setBackground(D.buttonBackground),c.setBackground(D.buttonCheckedBackground),e=c),b++});var f=x.size.call(K.local);if(a.length+f<c.length){var g=c.splice(a.length+f,c.length-a.length);g.forEach(function(a){a.destroy()})}})["catch"](function(a){console.error(a)})},b.refresh(),a.addItem(b),b}function k(a){this.id=J.generateId(),this.syncId=a,this.name="New scenario",this.data={},this.measurement="Week",this.measurementAmount=1,this.maxIterations=4,this.timeStepN=0}function l(a){var b=new C.MenuItem(340);b.setLabel("Scenario Editor");var c=[];x.forEach.call(J.scenarios,function(a){c.push({value:a.id,label:a.name})});var d=function(a){var b=new k;b.data=x.copy.call(J.loadedScenario.data),J.scenarios[b.id]=b,a(b.name,b.id)},e=function(a,b){var c=J.scenarios[a];c&&(c.name=b)},f=function(a){J.scenarios[a]&&delete J.scenarios[a]},g=function(a,c){J.loadedScenario=J.scenarios[a],x.forEach.call(i,function(a){a.foldable.destroy()}),i={},b.refresh(),J.emit("refresh")},h=b.addEditableDropdown("Scenario",c,d,e,f,g);b.addLabel("Output Nodes");var i={},j={},l=function(a,b,c,d){if(J.loadedScenario){var e=J.loadedScenario.data[d.id];if(!e)return J.loadedScenario.data[d.id]={id:J.generateId(),scenario:J.loadedScenario,node:d,steps:{}},e=J.loadedScenario.data[d.id],void(e.steps[b]=c);if(void 0!==e.steps[b])return!0;var f=i[d.id].foldable;e.steps[b]=c,j[d.id][b]=j[d.id][a],delete e.steps[a],delete j[d.id][a];var g=Object.keys(j[d.id]),h=g.indexOf(b);h+1<g.length?f.child.root.insertBefore(j[d.id][g[h]].root,j[d.id][g[h+1]].root):f.child.root.appendChild(j[d.id][g[h]].root),J.emit("refresh")}},m=function(a,b,c){if(J.loadedScenario){var d=J.loadedScenario.data[c.id];d||(J.loadedScenario.data[c.id]={id:J.generateId(),steps:{}},d=J.loadedScenario.data[c.id]),d.steps[a]=b,J.emit("refresh")}},n=function(a,b,c){if(J.loadedScenario){
var d=J.loadedScenario.data[c.id];d&&(delete d.steps[a],J.emit("refresh"))}},o=function(a){var b=a.target.node||a.target.parentElement.node,c=a.target.foldable||a.target.parentElement.foldable;if(b&&c){var d=J.loadedScenario.data[b.id];if(d){var e=parseInt(x.lastKey.call(d.steps));isNaN(e)&&(e=-1),e+=1;var f=c.addTimeRow(e,0,b,l,m,n);d.steps[e]=0,j[b.id][e]=f}else{var f=c.addTimeRow(0,0,b,l,m,n);J.loadedScenario.data[b.id]={id:J.generateId(),steps:{0:0}},j[b.id][0]=f}J.emit("refresh")}};return b.refresh=function(){x.forEach.call(J.nodeData,function(a){if("origin"===a.type&&!i[a.id]){var c=b.addFoldable(a.name),d=c.addButton("Add Step",o);if(d.root.node=a,d.root.foldable=c,i[a.id]={node:a,foldable:c,addStep:d},j[a.id]||(j[a.id]={}),!J.loadedScenario.data[a.id]||!J.loadedScenario.data[a.id].steps)return;x.forEach.call(J.loadedScenario.data[a.id].steps,function(b,d){var e=c.addTimeRow(d,b,a,l,m,n);j[a.id][d]=e})}})},J.addListener("dataModified",function(a,b,c){i[c.id]&&i[c.id].foldable.setLabel(a)}),J.addListener("deletedNode",function(a,b){i[a.id]&&(i[a.id].foldable.destroy(),delete i[a.id])}),J.addListener("modelLoaded",function(a,c,d,e){if(!(c===!1&&a===d||c!==!1&&c===e)){x.forEach.call(i,function(a){a.foldable.destroy()});var f=[];x.forEach.call(J.scenarios,function(a){f.push({value:a.id,label:a.name})}),h.replaceValues(f),j={},i={},b.refresh(),J.emit("refresh")}}),a.addItem(b),b}function m(){for(var a=G.getContext("2d"),b=[],c=0;c<=J.loadedScenario.maxIterations;c++)b.push(""+c);var d=x.filter.call(J.nodeGui,function(a){return a.linegraph}),e=J.nodeData,f=J.nodeGui,g=Object.keys(d).map(function(a){var b=f[a],c=e[a];return{label:c.name,data:c.simulateChange,fill:!1,lineTension:.1,backgroundColor:b.color,pointBorderColor:b.color,borderColor:b.color}});ea.Line(a,{data:{labels:b,datasets:g},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}function n(){window.requestAnimationFrame(X)}function o(){window.requestAnimationFrame(m)}if(!d(b))throw new Error("Not an element given to inflateModel");b.className="mb-container";var p=(a("./curry.js"),a("./strict_curry.js"),null),q=a("./canvas"),r=(a("./linker.js"),a("./generate_id.js"),b.offsetWidth),s=(b.offsetHeight,b.getAttribute("data-protocol")||"http"),t=b.getAttribute("data-hostname")||"localhost",u=b.getAttribute("data-port"),v="";if(null!==u&&("http"===s&&"80"!==u?v=":"+u:"https"===s&&"443"!==u&&(v=":"+u)),"string"==typeof c&&"string"==typeof e&&void 0===f&&(f=e,e=c,c=void 0),"string"!=typeof f||"string"!=typeof e)throw new Error("Need to initialize inflateModel with a user and project id.");var w={protocol:s,hostname:t,port:parseInt(u),userFilter:e,projectFilter:f,url:s+"://"+t+v},x=a("./object-helper.js"),y=document.createElement("div"),z=document.createElement("div"),A=document.createElement("canvas"),B=document.createElement("canvas");z.style.left=r-200+"px",y.className="left main",y.style.position="relative",z.className="mb-notification-bar",A.className="main-canvas",B.className="linegraph";var C=a("./new_ui"),D=C.Colors,E=new C.Sidebar(200);E.appendTo(y),y.appendChild(z),y.appendChild(A),y.appendChild(B),b.appendChild(y);var F=q(b,A),G=q(b,B),H=(a("./graphics/value_colors.js"),a("./model_layer.js")),I=(a("./menu_builder"),a("./notification_bar"),a("./network"),a("./information_tree"),a("./ui"),{}),J=H.newModel(),K={local:{},synced:{}};J["static"]={},J["static"].width=b.offsetWidth,J["static"].height=b.offsetHeight;var L=null;window.addEventListener("resize",function(){null!==L&&clearTimeout(L),L=setTimeout(function(){F.width=b.offsetWidth,G.width=b.offsetWidth,J["static"].width=b.offsetWidth,J["static"].height=b.offsetHeight,n()},500)}),window.sense4us[b.getAttribute("id")]||(window.sense4us[b.getAttribute("id")]={}),window.sense4us.models||(window.sense4us.models={unsorted:[]}),c&&"string"==typeof c&&"unsorted"!==c?window.sense4us.models[c]=J:("unsorted"===c&&console.warn("Can't add a model with id unsorted."),window.sense4us.models.unsorted.push(J)),J.CONFIG=w;a("./settings");window.Immutable=p,window.collisions=a("./collisions.js");var M=(F.getContext("2d"),a("./mechanics/mouse_event_emitter.js"));M(F,J),b.addEventListener("mousedown",function(a){window.sense4us.lastTarget=a.target});var N=a("./mechanics/keyboard_handler.js"),O=a("./input/hotkey_e.js"),P=a("./input/hotkey_z.js"),Q=a("./input/hotkey_y.js"),R=(a("./input/hotkey_v.js"),a("./input/hotkey_esc.js"));N(document.body,F,J,[O,P,Q,R]);var S,T=(a("./aggregated_link.js"),a("./refresh")),U=a("./async_middleware"),V=F.getContext("2d"),W=U(V,F,J,I),X=W(g,T.clearCanvasAndTransform,T.drawNodes,T.drawLinks,T.drawNodeDescriptions,T._drawLinker,T.drawLinkingLine),Y=a("./settings/modelling.js"),Z=h(E,Y);Z.setLabel("Modelling");var $=a("./settings/simulate.js"),_=i(E,$);_.setLabel("Simulate");var aa=(E.addButton("file",function(){J.emit("storeModel"),J.emit([J.id,J.syncId],"preNewModel"),J.emit("newModel")}),E.addButton("floppy-disk",function(){J.emit([J.id,J.syncId],"preSaveModel"),J.emit([J.id,J.syncId],"saveModel")}),E.addButton("trash",function(){J.emit({description:"Do you really want to delete this model?",buttons:[{background:D.warningRed,callback:function(a){J.emit([J.id,J.syncId],"deleteModel"),a.destroy()},label:"Confirm"},{callback:function(a){a.destroy()},label:"Cancel"}]},"popup")}),E.addButton("alert",function(){console.log(J)}),C.Button);j(E);var ba=a("./algorithms");ba.sort;l(E),J.addListener("invertSidebar",function(){E.invert()}),a("./model/listeners/popup.js")(b,J),a("./model/listeners/notification.js")(z,J),a("./model/listeners/mouse_down.js")(J),a("./model/listeners/mouse_move.js")(J),a("./model/listeners/mouse_up.js")(J),a("./model/listeners/delete.js")(J),J.addListener("resetUI",function(){E.foldable.menuItems.forEach(function(a){a.refresh()})}),J.addListener("settings",n),J.addListener("refresh",n);var ca=a("./scenario").ScenarioEditor;J.addListener("newWindow",function(a){switch(a.toUpperCase()){case"SCENARIO":J.floatingWindows.forEach(function(a){a.destroyWindow()}),new ca(J,b.offsetLeft+208,b.offsetTop+28)}}),a("./model/listeners/selected.js")(E,J),a("./model/listeners/store_model.js")(K,J),a("./model/listeners/load_model.js")(K,J),a("./model/listeners/new_model.js")(K,J),a("./model/listeners/delete_model.js")(K,J),a("./model/listeners/save_model.js")(K,J);var da=J.id;J.emit("storeModel"),J.emit([da,!1],"loadModel"),a("./model/listeners/settings.js")(J),J.addListener("settings",function(){J.settings.linegraph&&o()}),J.addListener("refreshLinegraph",function(){J.settings.linegraph&&(console.log("Refreshing linegraph."),o())}),J.emit(null,"refresh","resetUI","settings","sidebar"),J.emit("Initialized","notification");var ea=a("chart.js");a("./graphics/draw_line_graph.js");return o(),E.foldButton.root.click(),J}window.sense4us=window.sense4us||{},window.sense4us.lastTarget=!1,window.sense4us.inflateModel=e,window.sense4us.inflateTool=e,window.sense4us.NewUI=a("./new_ui")},{"./aggregated_link.js":"aggregated_link.js","./algorithms":"algorithms/algorithms.js","./async_middleware":"async_middleware.js","./canvas":"canvas/canvas.js","./collisions.js":"collisions.js","./curry.js":"curry.js","./generate_id.js":"generate_id.js","./graphics/draw_line_graph.js":"graphics/draw_line_graph.js","./graphics/value_colors.js":"graphics/value_colors.js","./information_tree":"information_tree/information_tree.js","./input/hotkey_e.js":"input/hotkey_e.js","./input/hotkey_esc.js":"input/hotkey_esc.js","./input/hotkey_v.js":"input/hotkey_v.js","./input/hotkey_y.js":"input/hotkey_y.js","./input/hotkey_z.js":"input/hotkey_z.js","./linker.js":"linker.js","./mechanics/keyboard_handler.js":"mechanics/keyboard_handler.js","./mechanics/mouse_event_emitter.js":"mechanics/mouse_event_emitter.js","./menu_builder":"menu_builder/menu_builder.js","./model/listeners/delete.js":"model/listeners/delete.js","./model/listeners/delete_model.js":"model/listeners/delete_model.js","./model/listeners/load_model.js":"model/listeners/load_model.js","./model/listeners/mouse_down.js":"model/listeners/mouse_down.js","./model/listeners/mouse_move.js":"model/listeners/mouse_move.js","./model/listeners/mouse_up.js":"model/listeners/mouse_up.js","./model/listeners/new_model.js":"model/listeners/new_model.js","./model/listeners/notification.js":"model/listeners/notification.js","./model/listeners/popup.js":"model/listeners/popup.js","./model/listeners/save_model.js":"model/listeners/save_model.js","./model/listeners/selected.js":"model/listeners/selected.js","./model/listeners/settings.js":"model/listeners/settings.js","./model/listeners/store_model.js":"model/listeners/store_model.js","./model_layer.js":"model_layer.js","./network":"network/network.js","./new_ui":"new_ui/new_ui.js","./notification_bar":"notification_bar/notification_bar.js","./object-helper.js":"object-helper.js","./refresh":"refresh.js","./scenario":"scenario/scenario_index.js","./settings":"settings/settings.js","./settings/modelling.js":"settings/modelling.js","./settings/simulate.js":"settings/simulate.js","./strict_curry.js":"strict_curry.js","./ui":"ui/ui.js","chart.js":3}],"mechanics/drag_handler.js":[function(a,b,c){"use strict";var d=a("../canvas/arithmetics.js");b.exports=function(a,b,c,e,f,g){var h=!1,i={x:0,y:0},j={x:0,y:0},k={x:0,y:0},l={x:0,y:0},m=function(a){return a.preventDefault(),a.stopPropagation(),!1};a.addEventListener("contextmenu",m);var n=function(j){h=!0,i=d.mouseToCanvas({x:j.clientX,y:j.clientY},a),k={x:i.x,y:i.y},b.didDrag=!1;var l=c(a,b,i);l?(e&&window.addEventListener("mousemove",o),f&&window.addEventListener("mouseup",p)):g&&g(a,b,i)};a.addEventListener("mousedown",n);var o=function(c){h=!0,j=d.mouseToCanvas({x:c.clientX,y:c.clientY},a),l.x=k.x-j.x,l.y=k.y-j.y,i.x=j.x,i.y=j.y,b.didDrag=!0,e(a,b,j,l),b.propagate(),k={x:j.x,y:j.y}},p=function(c){h=!1,j=d.mouseToCanvas({x:c.clientX,y:c.clientY},a),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",p),f(a,b,j),b.propagate()}}},{"../canvas/arithmetics.js":"canvas/arithmetics.js"}],"mechanics/keyboard_handler.js":[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e={},f={};d.forEach(function(a){e[a.keyCode]||(e[a.keyCode]=[]),e[a.keyCode].push(a),a.global===!0&&(f[a.keyCode]||(f[a.keyCode]=[]),f[a.keyCode].push(a))});var g=16,h=17,i=18,j=225;c["static"].modifiers||(c["static"].modifiers=[]),a.addEventListener("keydown",function(a){switch(a.keyCode){case h:c["static"].modifiers.push(h);break;case i:c["static"].modifiers.push(i);break;case j:c["static"].modifiers.push(j);break;case g:c["static"].modifiers.push(g)}return window.sense4us.lastTarget!==b?(f[a.keyCode]&&f[a.keyCode].forEach(function(d){d.onDown&&"function"==typeof d.onDown&&d.onDown(b,c,a)}),!0):(c.emit(a.keyCode,"keyDown"),e[a.keyCode]?void e[a.keyCode].forEach(function(d){d.onDown&&"function"==typeof d.onDown&&d.onDown(b,c,a)}):!0)}),a.addEventListener("keyup",function(a){switch(a.keyCode){case h:var d=c["static"].modifiers.indexOf(h);c["static"].modifiers.splice(d,1);break;case i:var d=c["static"].modifiers.indexOf(i);c["static"].modifiers.splice(d,1);break;case j:var d=c["static"].modifiers.indexOf(j);c["static"].modifiers.splice(d,1);break;case g:var d=c["static"].modifiers.indexOf(g);c["static"].modifiers.splice(d,1)}return window.sense4us.lastTarget!==b?(f[a.keyCode]&&f[a.keyCode].forEach(function(d){d.onUp&&"function"==typeof d.onUp&&d.onUp(b,c,a)}),!0):(c.emit(a.keyCode,"keyUp"),e[a.keyCode]?void e[a.keyCode].forEach(function(d){d.onUp&&"function"==typeof d.onUp&&d.onUp(b,c,a)}):!0)})}},{}],"mechanics/mouse_event_emitter.js":[function(a,b,c){"use strict";var d=a("../canvas/arithmetics.js");b.exports=function(a,b,c){var e=!1,f={x:0,y:0},g={x:0,y:0},h={x:0,y:0},i={x:0,y:0},j=function(a){return a.preventDefault(),a.stopPropagation(),!1};a.addEventListener("contextmenu",j);var k=function(c){var g=c.button;e=!0,f=d.mouseToCanvas({x:c.pageX,y:c.pageY},a),h={x:f.x,y:f.y},b.didDrag=!1,b.emit([a,g,f,h,l,m],"mouseDown")};a.addEventListener("mousedown",k);var l=function(c){var j=c.button;e=!0,g=d.mouseToCanvas({x:c.pageX,y:c.pageY},a),i.x=h.x-g.x,i.y=h.y-g.y,b.didDrag=!0,h={x:g.x,y:g.y},b.emit([a,j,f,h,g,i],"mouseMove")},m=function(c){var f=c.button;e=!1,g=d.mouseToCanvas({x:c.pageX,y:c.pageY},a),window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",m),b.emit([a,f,g],"mouseUp")}}},{"../canvas/arithmetics.js":"canvas/arithmetics.js"}],"menu_builder/dropdown.js":[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))throw new Error("Option accessed as generic method.");this.element=document.createElement("div"),this.callback=null,this.parent=a}function e(a,b,c){if(!(this instanceof e))throw new Error("Dropdown accessed as generic method.");this.element=document.createElement("div"),this.headerElement=document.createElement("h4"),this.container=document.createElement("div"),this.headerElement.className="mb-dropdown-header",this.container.className="mb-dropdown-container",this.container.style.display="none",this.element.appendChild(this.headerElement),this.element.appendChild(this.container),this.element.className="mb-dropdown";var d=this,f=function(){d.toggle()},g=function(a){if("h4"!==a.target.tagName.toLowerCase()){var b=d.options[a.target.getAttribute("data-id")];b.update=function(){d.update.call(d)},d.onselect.call(b)}},h=function(a){d.visible()&&d.toggle()};this.deleteEvents=function(){d.element.removeEventListener("mouseenter",f),d.element.removeEventListener("click",g),d.element.removeEventListener("click",h)},this.element.addEventListener("mouseenter",f),this.element.addEventListener("click",g),this.element.addEventListener("mouseleave",h),this.header=a,this.headerElement.innerHTML=this.header,this.options=[],this.occupied={},this.selected=!1,this.onselect=b,this.update=c,this.update()}d.prototype={setValue:function(a){this.value=a,this.element.setAttribute("data-value",a)},setText:function(a){this.text=a,this.element.innerHTML=a},setId:function(a){this.id=a,this.element.setAttribute("data-id",a)},setCallback:function(a){this.callback=a},select:function(){this.element.className="mb-dropdown-selected"},deselect:function(){this.element.className=""}},e.prototype={addOption:function(a,b,c){if(!this.occupied[a]){var e=new d(this);e.setValue(a),e.setText(b),e.setId(this.options.length),c&&"function"==typeof c&&e.setCallback(c),this.options.push(e),this.occupied[a]=this.options.length}},resetOptions:function(){this.occupied={},this.options=[]},refreshList:function(){for(;this.container.firstChild;)this.container.removeChild(this.container.firstChild);this.options.forEach(function(a){this.container.appendChild(a.element)},this)},select:function(a){void 0===a?(this.selected&&this.selected.deselect(),this.selected=this.options[this.options.length-1],this.selected.select()):"number"==typeof a&&(this.selected&&this.selected.deselect(),this.selected=this.options[a],this.selected.select())},toggle:function(){"none"===this.container.style.display?(this.container.style.display="block",this.container.className+=" mb-dropdown-container-animation"):(this.container.style.display="none",this.container.className="mb-dropdown-container")},visible:function(){return"block"===this.container.style.display}},b.exports=e},{}],"menu_builder/menu_builder.js":[function(a,b,c){"use strict";function d(){if(!(this instanceof d))throw new Error("Accessing MenuBuilder as a generic method.");this.refreshable=[]}var e=a("./dropdown.js");d.prototype={updateAll:function(){this.refreshable.forEach(function(a){a.update&&a.update()})},slider:function(a,b,c,d,e){var f=this.div("mb-sidebar-slider"),g=this.div("value");g.innerHTML=a;var h=this.div("max-value");h.innerHTML=c;var i=document.createElement("input");i.type="range",i.min=b,i.max=c,i.value=a,i.addEventListener("change",function(){d(parseInt(i.value))});var j=function(a){g.innerHTML=i.value,e&&e(parseInt(i.value))};return i.addEventListener("input",j),i.deleteCallbacks=function(){i.removeEventListener("change",d),i.removeEventListener("input",j)},f.appendChild(g),f.appendChild(i),f.appendChild(h),f},div:function(a){var b=document.createElement("div");return a&&(b.className=a),b},button:function(a,b){var c=document.createElement("button");return c.addEventListener("click",b),c.deleteEvents=function(){c.removeEventListener("click",b)},c.appendChild(document.createTextNode(a)),c},dropdown:function(a,b,c){var d=new e(a,b,c);return this.refreshable.push(d),d},select:function(a,b){var c=document.createElement("select");return c.name=a,c.addEventListener("change",b),c.deleteEvents=function(){c.removeEventListener("click",b)},c},option:function(a,b){var c=document.createElement("option");return c.value=a,c.innerHTML=b,c},addValueCallback:function(a,b,c){c=c||"change";var d=function(c){b(a.name,a.value)};a.addEventListener(c,d),a.deleteEvents=function(){a.removeEventListener(c,d)}},input:function(a,b,c){var e=document.createElement("input");return d.prototype.addValueCallback(e,c),e.setAttribute("value",b),e.type="text",e.name=a,e.value=b,e},label:function(a){var b=document.createElement("label");return b.appendChild(document.createTextNode(a)),b.htmlFor=a,b},p:function(){var a=document.createElement("p");return a},img:function(){var a=document.createElement("img");return a},span:function(a){var b=document.createElement("span");return a&&"string"==typeof a&&(b.innerHTML=a),b},menu:function(a,b){var c=document.createElement("input");return c.setAttribute("type","button"),c.setAttribute("value",a),c.addEventListener("click",b),c.deleteEvents=function(){c.removeEventListener("click",b)},c.className="button",c},h2:function(a){var b=document.createElement("h2");return b.innerHTML=a,b}},b.exports=new d},{"./dropdown.js":"menu_builder/dropdown.js"}],"menu_builder/package.json":[function(a,b,c){b.exports={name:"s4u_menu_builder",main:"./menu_builder.js"}},{}],"middleware.js":[function(a,b,c){"use strict";var d=function(a,b,c){void 0===b&&(b=function(a){throw new Error(a)}),c=function(a){return a.done=!0,a};var d=function(e){var f=this.call(this,e,b,c),g=a.indexOf(this);if(-1===g&&e.done!==!0)throw new Error("something pooped");return g+1===a.length||e.done===!0?e:d.call(a[g+1],f)};return function(b){if(null===a||0===a.length)throw new Error("callbacks is not containing anything");return d.call(a[0],b)}};b.exports=d},{}],"mode_layer.js":[function(a,b,c){"use strict";function d(){if(!(this instanceof d))throw new Error("Accessing ModeLayer as a generic method.");this.currentMode=!1,this.modes={},this.refresh}d.prototype={addMode:function(a,b){if(this.modes[a])throw new Error("Mode already exists");if(!b||"function"!=typeof b)throw new Error("Callback invalid.");this.modes[a]=b},setMode:function(a){if(this.modes[a])throw new Error("Mode does not exist. Can't set "+a);this.currentMode=this.modes[a],this.refresh&&this.refresh()},iterateModes:function(a){var b=this;Object.keys(this.modes).forEach(function(c){a(c,b.modes[c])})}},b.exports=new d},{}],"model/listeners/delete.js":[function(a,b,c){"use strict";function d(a){a.addListener("deleteNode",function(b){a.selected=!1;var c=a.nodeData[b],d=a.nodeGui[b];delete a.nodeData[c.id],a.emit(c,"deletedNodeData"),d.links&&d.links.forEach(function(b,c){var e=a.links[b],f=a.nodeGui[e.node1],g=a.nodeGui[e.node2],h=f.links.indexOf(e.id);-1!==h&&f.id!==d.id&&f.links.splice(h,1),h=g.links.indexOf(e.id),-1!==h&&g.id!==d.id&&g.links.splice(h,1),delete a.links[b],a.emit(e,"deletedLink")}),d.links=[],delete a.nodeGui[d.id],a.emit(d,"deletedNodeGui"),a.emit([c,d],"deletedNode")}),a.addListener("deleteLink",function(b){a.selected=!1;var c=a.links[b],d=a.nodeGui[c.node1],e=a.nodeGui[c.node2],f=d.links.indexOf(c.id);-1!==f&&d.links.splice(f,1);var f=e.links.indexOf(c.id);-1!==f&&e.links.splice(f,1),delete a.links[c.id],a.emit(c,"deletedLink")}),a.addListener("deleteSelected",function(){var b=a.selected;if("nodeData"===b.objectId||"nodeGui"===b.objectId){var c={action:"deleteNode",data:{data:a.nodeData[b.id],gui:a.nodeGui[b.id],links:[]}};console.log(a.nodeGui[b.id]),c.data.gui.links.forEach(function(b){c.data.links.push(a.links[b])}),a.history.push(c),a.emit(b.id,"deleteNode")}else"link"===b.objectId&&(a.history.push({action:"deleteLink",data:{link:b}}),a.emit(b.id,"deleteLink"));a.revertedHistory=[],a.selected=!1,a.emit(null,"refresh","resetUI","select")})}b.exports=d},{}],"model/listeners/delete_model.js":[function(a,b,c){"use strict";function d(a,b){b.addListener("deleteModel",function(c,d){e.deleteModel(b.CONFIG.url,b.CONFIG.userFilter,b.CONFIG.projectFilter,d||c,a,function(e){if(b.id===c||b.syncId===d){var g=f.first.call(a.local);!g||g.id!==b.id&&g.syncId!==b.syncId||(delete a.local[g.id],g=void 0),void 0===g?b.emit("newModel"):f.forEach.call(g,function(a,c){b[c]=a})}b.emit(e||"Deleted local model: "+c,"notification"),b.emit([c,d],"modelDeleted"),b.emit(null,"refresh","resetUI")})})}var e=a("./../../model_layer.js"),f=a("./../../object-helper.js");b.exports=d},{"./../../model_layer.js":"model_layer.js","./../../object-helper.js":"object-helper.js"}],"model/listeners/delete_selected.js":[function(a,b,c){"use strict";function d(a){a.addListener("deleteSelected",function(){var b=a.selected;if("nodeData"===b.objectId||"nodeGui"===b.objectId){var c=a.nodeData[b.id],d=a.nodeGui[b.id];delete a.nodeData[c.id],a.emit(c,"deletedNodeData"),d.links&&d.links.forEach(function(b,c){var e=a.links[b],f=a.nodeGui[e.node1],g=a.nodeGui[e.node2],h=f.links.indexOf(e.id);-1!==h&&f.id!==d.id&&f.links.splice(h,1),h=g.links.indexOf(e.id),-1!==h&&g.id!==d.id&&g.links.splice(h,1),delete a.links[b],a.emit(e,"deletedLink")}),delete a.nodeGui[d.id],a.emit(d,"deletedNodeGui")}else if("link"===b.objectId){var e=a.nodeGui[b.node1],f=a.nodeGui[b.node2],g=e.links.indexOf(b.id);-1!==g&&e.links.splice(g,1);var g=f.links.indexOf(b.id);-1!==g&&f.links.splice(g,1),delete a.links[b.id],a.emit(b,"deletedLink")}a.selected=!1,a.emit(null,"refresh","resetUI","select")})}b.exports=d},{}],"model/listeners/load_model.js":[function(a,b,c){"use strict";function d(a,b){b.addListener("loadModel",function(c,d){c=d||c;var g=b.id,h=b.syncId;if(void 0===a.local[c])if("string"==typeof a.synced[c]||void 0===a.synced[c])e.loadSyncModel(b.CONFIG.url,b.CONFIG.userFilter,b.CONFIG.projectFilter,c,function(d){return"number"==typeof d?(b.syncId=d,b.id=d,b.emit({delay:1e4,message:"Model with id "+modelId+" is corrupt. Its id is loaded and may be deleted from running 'Delete current'. Otherwise, contact sysadmin."},"notification"),void b.emit(null,"refresh","resetUI")):d instanceof Error?(b.emit(d,"notification"),void b.emit([c,c],"errorLoadingModel")):(b.nodeGui={},b.nodeData={},d.selected=!1,b.floatingWindows.forEach(function(a){a.destroyWindow(),a.hide&&a.hide()}),a.synced[c]=d,f.forEach.call(d,function(a,c){b[c]=a}),f.forEach.call(b.scenarios,function(a){f.forEach.call(a.data,function(a){a.onChange=function(){b.emit(null,"refresh","resetUI")}})}),b.emit([b.id,b.syncId,g,h],"modelLoaded"),void b.emit(null,"refresh","resetUI"))});else{b.nodeGui={},b.nodeData={};var i=a.synced[c];b.id!==i.id&&b.syncId!==i.syncId&&(i.selected=!1,b.floatingWindows.forEach(function(a){a.destroyWindow(),a.hide&&a.hide()})),f.forEach.call(i,function(a,c){b[c]=a}),b.emit([b.id,b.syncId,g,h],"modelLoaded"),b.emit(null,"refresh","resetUI")}else{b.nodeGui={},b.nodeData={};var i=a.local[c];b.id!==i.id&&b.syncId!==i.syncId&&(i.selected=!1,b.floatingWindows.forEach(function(a){a.destroyWindow(),a.hide&&a.hide()})),f.forEach.call(i,function(a,c){b[c]=a}),b.emit([b.id,b.syncId,g,h],"modelLoaded"),b.emit(null,"refresh","resetUI")}}),b.addListener("errorLoadingModel",function(){return 0===f.size.call(a.local)?b.emit("newModel"):void b.emit(f.first.call(a.local).id,"loadModel")})}var e=a("./../../model_layer.js"),f=a("./../../object-helper.js");b.exports=d},{"./../../model_layer.js":"model_layer.js","./../../object-helper.js":"object-helper.js"}],"model/listeners/mouse_down.js":[function(a,b,c){"use strict";function d(a){a.addListener("mouseDown",function(b,c,d,e,f,h){var i=g.filter(function(a){return a.button===c}),j=!1,k=!1;i.forEach(function(c){var e=c.mouseDown,f=c.mouseMove,g=c.mouseUp,h=c.miss,i=e(b,a,d);i?(f&&(j=!0),g&&(k=!0)):h&&h(b,a,d)}),j&&window.addEventListener("mousemove",f),k&&window.addEventListener("mouseup",h),this.emit("refresh")})}var e=a("./../../input/mleft_drag.js"),f=a("./../../input/mright_drag.js"),g=[e,f];b.exports=d},{"./../../input/mleft_drag.js":"input/mleft_drag.js","./../../input/mright_drag.js":"input/mright_drag.js"}],"model/listeners/mouse_move.js":[function(a,b,c){"use strict";function d(a){a.addListener("mouseMove",function(b,c,d,e,f,h){var i=g.filter(function(a){return a.button===c});i.forEach(function(c){c.mouseMove(b,a,f,h)}),this.emit("refresh")})}var e=a("./../../input/mleft_drag.js"),f=a("./../../input/mright_drag.js"),g=[e,f];b.exports=d},{"./../../input/mleft_drag.js":"input/mleft_drag.js","./../../input/mright_drag.js":"input/mright_drag.js"}],"model/listeners/mouse_up.js":[function(a,b,c){"use strict";function d(a){a.addListener("mouseUp",function(b,c,d){var e=g.filter(function(a){return a.button===c});e.forEach(function(c){c.mouseUp(b,a,d)}),this.emit("refresh")})}var e=a("./../../input/mleft_drag.js"),f=a("./../../input/mright_drag.js"),g=[e,f];b.exports=d},{"./../../input/mleft_drag.js":"input/mleft_drag.js","./../../input/mright_drag.js":"input/mright_drag.js"}],"model/listeners/new_model.js":[function(a,b,c){"use strict";function d(a,b){b.addListener("newModel",function(){var c=e.newModel();f.forEach.call(c,function(a,c){b[c]=a}),a.local[b.id]=c,b.emit([c.id,c.syncId],"modelLoaded"),b.emit(null,"refresh","resetUI")})}var e=a("./../../model_layer.js"),f=a("./../../object-helper.js");b.exports=d},{"./../../model_layer.js":"model_layer.js","./../../object-helper.js":"object-helper.js"}],"model/listeners/node_modified.js":[function(a,b,c){},{}],"model/listeners/notification.js":[function(a,b,c){"use strict";function d(a,b){b.addListener("notification",function(b){var c=4e3;"object"==typeof b&&(c=b.delay,b=b.message),e.notify(a,b)})}var e=a("./../../notification_bar");b.exports=d},{"./../../notification_bar":"notification_bar/notification_bar.js"}],"model/listeners/popup.js":[function(a,b,c){"use strict";function d(a){if(!a||"object"!=typeof a)return!1;if(!(a.description&&"string"==typeof a.description||a.buttons&&a.buttons.forEach))return!1;var b=new f("div");b.root.style.display="flex",b.root.style.position="absolute",b.root.style.top="0px",b.root.style.left="0px",b.root.style["z-index"]="4",b.setWidth("100%"),b.setHeight("100%"),b.setBackground("rgba(0,0,0,0.5)");var c=new f("div");c.setBackground("#fafafa"),c.setWidth("300px"),c.root.style.display="flex",c.root.style["align-items"]="stretch",c.root.style["flex-direction"]="column",c.root.style.margin="auto",b.appendChild(c);var d=new f("div"),e=new f("div");return a.description&&(d.setLabel(a.description),d.root.style.padding="14px",d.root.style.margin="auto",d.root.style["text-align"]="center"),d.root.style.display="flex",e.root.style.display="flex",e.root.style["align-items"]="stretch",e.root.style["flex-direction"]="row","function"==typeof a.buttons&&(a.buttons=[a.buttons]),a.buttons.forEach(function(a){if(a.callback){a.label||(a.label="");var c=new g;c.setLabel(a.label),c.click(function(){a.callback(b)}),a.background&&c.setBackground(a.background),c.root.style.display="flex",c.label.root.style.margin="auto",c.root.style.padding="14px",c.root.style["flex-grow"]="1",e.appendChild(c)}}),c.appendChild(d),c.appendChild(e),b}var e=a("./../../new_ui"),f=e.Element,g=e.Button;b.exports=function(a,b){a.style.position="relative",b.addListener("popup",function(b){var c=d(b);return c===!1?void console.error(b,"given to popup event."):void a.insertBefore(c.root,a.firstChild)})}},{"./../../new_ui":"new_ui/new_ui.js"}],"model/listeners/reset_ui.js":[function(a,b,c){"use strict";function d(a,b,c,d){d.addListener("resetUI",function(){a.setEnvironment(d.environment),a.addSidebar(d.sidebar,d),b.resetMenu(d,c),d.floatingWindows.forEach(function(a){a.refresh()}),d.emit("select")})}b.exports=d},{}],"model/listeners/save_model.js":[function(a,b,c){"use strict";function d(a,b){b.addListener("saveModel",function(c,d){var f=a.synced[d]||a.local[c];if(!f||"string"==typeof f)throw b.emit("Model was not stored in correct location. Saving failed.","notification"),new Error("Couldn't save model.");e.saveModel(b.CONFIG.url,b.CONFIG.userFilter,b.CONFIG.projectFilter,f,function(){a.synced[f.syncId]=f,c===b.id&&(b.syncId=f.syncId),b.emit([f.id,f.syncId,f],"modelSaved")})}),b.addListener("modelSaved",function(c,d){var e=a.synced[d]||a.local[c];if(!e||"string"==typeof e)throw b.emit("Model was not stored in correct location. Saving probably finished, but wut.","notification"),new Error("Model data corrupted.");b.emit("Model '"+e.settings.name+"' saved.","notification")})}var e=a("./../../model_layer.js");a("./../../object-helper.js");b.exports=d},{"./../../model_layer.js":"model_layer.js","./../../object-helper.js":"object-helper.js"}],"model/listeners/selected.js":[function(a,b,c){"use strict";function d(a,b,c,d){var e;return d<c.length?e=c[d]:(e=b.addInput(),c.push(e),e.defaultValue(function(){return e.changeProperty?e.changeObject[e.changeProperty]:""}),e.onChange(function(){var b=e.getValue();return e.changeCheck(b)?(e.setObjectValue?e.changeObject[e.changeProperty]=e.setObjectValue.call(e,b):e.changeObject[e.changeProperty]=b,a.floatingWindows.forEach(function(a){a.refresh()}),a.emit([b,e.changeProperty,e.changeObject],"dataModified"),void a.emit("refresh")):void e.setValue(e.changeObject[e.changeProperty])})),e}function e(a,b,c,d){var e;return d<c.length?(e=c[d],e.removeEvents()):(e=b.addButton(),c.push(e)),e}function f(a,b,c,d){var e;return d<c.length?e=c[d]:(e=b.addDropdown(),c.push(e),e.defaultValue(function(){return e.changeProperty?e.changeObject[e.changeProperty]:""}),e.onChange(function(){var b=e.getValue();e.changeObject[e.changeProperty]=b,a.emit([b,e.changeProperty,e.changeObject],"dataModified"),a.emit("refresh")})),e}function g(a,b,c,d){var e;return d<c.length?e=c[d]:(e=b.addCheckbox(),c.push(e),e.onCheck(function(){if(e.setObjectValue){var b=e.setObjectValue(!0);e.changeObject[e.changeProperty]=b,a.emit([b,dropdown.changeProperty,dropdown.changeObject],"dataModified")}else e.changeObject[e.changeProperty]=!0,a.emit([!0,dropdown.changeProperty,dropdown.changeObject],"dataModified")}),e.onUncheck(function(){if(e.setObjectValue){var b=e.setObjectValue(!1);e.changeObject[e.changeProperty]=b,a.emit([b,dropdown.changeProperty,dropdown.changeObject],"dataModified")}else e.changeObject[e.changeProperty]=!1,a.emit([!1,dropdown.changeProperty,dropdown.changeObject],"dataModified")})),e}function h(a,b,c,d){var e;return d<c.length?(e=c[d],e.invalidate()):(e=b.addIconGroup(),c.push(e),e.clicks=[],t.Button.prototype.click.call(e,function(b){var c=b.target.clickedIcon;if(c&&e.changeObject){if(e.lastActive){var d=e.lastActive.image.root;d.style.border="none"}e.lastActive=c,c.image.root.style.border="4px solid "+u.activeAvatar,e.changeObject[e.changeProperty]=c.currentImage.src,a.emit("refresh")}})),e}function i(a,b,c,d,e,f){a.forEach(function(a){a.hide()}),b.forEach(function(a){a.buttonContainer.hide()}),c.forEach(function(a){a.hide()}),d.forEach(function(a){a.hide()}),e.forEach(function(a){a.hide()}),f.forEach(function(a){a.hide()})}function j(a,b,c,e,f,g){var h=d(a,b,c,e);return h.changeProperty=f.property,h.changeObject=g,h.changeCheck=f.check,h.setObjectValue=!1,f.set&&(h.setObjectValue=f.set),h.setLabel(f.property),h.refresh(),f.showCondition&&!f.showCondition(g)?h.hide():h.show(),h}function k(a,b,c,d,e,f,g){var i=h(a,b,c,d);i.changeProperty=e.property,i.changeObject=g,i.setLabel(e.property);var j=0;return e.groups[f.role]&&e.groups[f.role].forEach(function(b){var c=i.reuseIcon(a.CONFIG.url+"/"+b.src,j);c.root.clickedIcon=c,c.image.root.clickedIcon=c,c.currentImage=b,c.image.root.style.border="none",c.image.root.style["border-radius"]="50%",
g[e.property]===b.src&&(c.image.root.style.border="4px solid "+u.activeAvatar,i.lastActive=c),j++}),e.showCondition&&!e.showCondition(item)?i.hide():i.show(),i}function l(a,b,c,d,e,g){var h=f(a,b,c,d);return h.changeProperty=e.property,h.changeObject=g,h.setLabel(e.property),h.replaceValues(e.values),h.refresh(),e.showCondition&&!e.showCondition(g)?h.hide():h.show(),h}function m(a,b,c,d,e,f){var h=g(a,b,c,d);return h.changeProperty=e.property,h.changeObject=f,f[e.property]?h.check():h.uncheck(),h.setLabel(e.property),h.refresh(),e.showCondition&&!e.showCondition(f)?h.hide():h.show(),h}function n(a,b,c,d,f,g,h,l,m,n){var o=0,p=0,q=0;i(c,d,f,g,h,l);var r=e(a,b,d,p);r.setLabel("Delete selected"),r.click(function(){a.emit("deleteSelected")}),r.buttonContainer.show();var s=[];return y.forEach(function(d){switch(d.type.toUpperCase()){case"INPUT":var e=j(a,b,c,o,d,m);d.showCondition&&s.push({element:e,callback:d.showCondition}),o++}}),z.forEach(function(d){switch(d.type.toUpperCase()){case"INPUT":var e=j(a,b,c,o,d,n);d.showCondition&&s.push({element:e,callback:d.showCondition}),o++;break;case"ICONGROUP":k(a,b,l,q,d,m,n);d.showCondition&&s.push({element:e,callback:d.showCondition}),q++}}),s}function o(a,b,c,d,f,g,h,k,n){var o=0,p=0,q=0,r=0;i(c,d,f,g,h,k);var s=e(a,b,d,p);s.setLabel("Delete selected"),s.click(function(){a.emit("deleteSelected")}),s.buttonContainer.show();var t=[];return x.forEach(function(d){switch(d.type.toUpperCase()){case"INPUT":var e=j(a,b,c,o,d,n);d.showCondition&&t.push({element:e,callback:d.showCondition}),o++;break;case"DROPDOWN":var h=l(a,b,f,q,d,n);d.showCondition&&t.push({element:h,callback:d.showCondition}),q++;break;case"CHECKBOX":m(a,b,g,r,d,n);d.showCondition&&t.push({element:h,callback:d.showCondition}),r++}}),t}function p(a,b){var c=new t.MenuItem(300);c.setLabel("Selected"),c.root.style.display="none";var d=[],e=[],f=[],g=[],h=[],j=[],k=!1,l=null;c.refresh=function(){if(k===b.selected)return void(l&&l.length>0&&l.forEach(function(a){a.callback(k)?a.element.show():a.element.hide()}));if(b.selected===!1)return b.emit("deselect");l=null,k=b.selected;var a=b.selected;if(!a||!a.objectId)return void i(d,e,f,g,h,j);if("nodeGui"===a.objectId||"nodeData"===a.objectId){var m=b.nodeData[a.id],p=b.nodeGui[a.id];if(!m||!p)return b.emit("deselect");n(b,c,d,e,f,g,h,j,m,p)}else if("link"===a.objectId){var q=b.links[a.id];if(!q)return b.emit("deselect");l=o(b,c,d,e,f,g,h,j,q)}},c.refresh(),a.addItem(c);var m=a.root.parentElement;return m.insertBefore(c.child.root,a.root.nextSibling),c.child.root.style.right="0",c.child.root.style.top="0",c.child.setHeight("100%"),c.child.root.style["max-height"]="100%",c}function q(a,b){var c=new t.MenuItem(300);c.setLabel("Settings");var d=c.addInput("Name");return d.defaultValue(function(){return b.settings.name}),d.onChange(function(){b.settings.name=d.getValue(),b.emit("resetUI")}),a.addItem(c),c}function r(a,b){var c=p(a,b);q(a,b);b.addListener("deselect",function(){s.forEach.call(this.nodeGui,function(a,b){a.selected=!1}),c.child.fold(),b.emit("deselected")}),b.addListener("selectableObjectUpdated",function(){c.refresh()});var d=!1;b.addListener("select",function(){d!==b.selected&&(c.refresh(),d=b.selected,b.selected===!1?b.emit("deselect"):(c.child.unfold(),b.emit(this.selected,"selected")))})}var s=a("./../../object-helper.js"),t=a("./../../new_ui"),u=t.Colors,v=a("./../../settings/modelling.js"),w={};v.forEach(function(a){a.header=a.header.toUpperCase(),w[a.header]||(w[a.header]=[]),w[a.header]=w[a.header].concat(a.images)});var x=[{property:"type",type:"dropdown",values:["halfchannel","fullchannel"]},{property:"threshold",type:"input",check:function(a){var b=a.match(/^-?\d+\.?\d*$/);return null!==b},set:function(a){return parseFloat(a)}},{property:"coefficient",type:"input",check:function(a){var b=a.match(/^-?\d+\.?\d*$/);return null!==b},set:function(a){return parseFloat(a)}},{property:"timelag",type:"input",check:function(a){var b=a.match(/^\d+$/);return null!==b},set:function(a){return parseInt(a)}},{property:"bidirectionalTimelag",type:"input",check:function(a){var b=a.match(/^\d+$/);return null!==b},set:function(a){return parseInt(a)},showCondition:function(a){return console.log(a),a.bidirectional}}],y=[{property:"name",type:"input",check:function(){return!0}},{property:"description",type:"input",check:function(){return!0}},{property:"baseline",type:"input",check:function(a){var b=a.match(/^-?\d+$/);return null!==b},set:function(a){return parseFloat(a)}}],z=[{property:"color",type:"input",check:function(a){var b=a.match(/^#[0-9a-fA-F]{3}$|^#[0-9a-fA-F]{6}$/);return null!==b}},{property:"avatar",type:"iconGroup",groups:w}];b.exports=r},{"./../../new_ui":"new_ui/new_ui.js","./../../object-helper.js":"object-helper.js","./../../settings/modelling.js":"settings/modelling.js"}],"model/listeners/settings.js":[function(a,b,c){"use strict";function d(a){}b.exports=d},{}],"model/listeners/store_model.js":[function(a,b,c){"use strict";function d(a,b){b.addListener("storeModel",function(){var c;b.synced===!0?(c=e.moveModel(b),a.synced[b.syncId]=c,a.local[c.id]&&(a.local[c.id]=c)):(c=e.moveModel(b),a.local[b.id]=c)})}var e=a("./../../model_layer.js");a("./../../object-helper.js");b.exports=d},{"./../../model_layer.js":"model_layer.js","./../../object-helper.js":"object-helper.js"}],"model_layer.js":[function(a,b,c){"use strict";function d(a,b){this.changed={},this.timestamps={},this.id=a,this.syncId=!1,this.saved=!1,this.synced=!1,this.nextId=0,this.nodeData={},this.nodeGui={},this.links={},this.history=[],this.revertedHistory=[],this.selected=!1,this.environment="modelling",this.sidebar=l.sidebar,this.floatingWindows=[],this.settings={name:"New Model",offsetX:0,offsetY:0,zoom:1,linegraph:!1,objectId:"modelSettings",id:0},this.scenarios={};var c=new h(this);this.scenarios[c.id]=c,this.loadedScenario=c,b&&Object.keys(b).forEach(function(a){this[a]=b[a]},this),this.objectId="model"}function e(a){var b=this.CONFIG.userFilter,c=this.CONFIG.projectFilter,d=this.CONFIG.url;return new i(function(a,e){f(d,"/models/"+b+"/"+c+"/all",function(b,c){return c||200!==b.status?e(c,b):void a(b.response)})})}var f=a("./network"),g=a("./breakout.js"),h=a("./scenario").Scenario,i=(a("./structures/timetable.js"),a("./menu_builder"),a("promise")),j=a("./structures/create_node.js"),k=(a("./structures/create_link.js"),a("./object-helper")),l=a("./settings"),m=-1;d.prototype={pushHistory:function(a){a.action&&(this.history.push(a),this.revertedHistory=[])},undo:function(){if(0!==this.history.length){var a=this.history.splice(this.history.length-1,1)[0];switch(this.revertedHistory.push(a),a.action.toUpperCase()){case"NEWNODE":var b=a.data;this.emit(b.data.id,"deleteNode");break;case"NEWLINK":var c=a.data.link;this.emit(c.id,"deleteLink");break;case"DELETENODE":var b=a.data;this.nodeData[b.data.id]=b.data,this.nodeGui[b.gui.id]=b.gui,b.links.forEach(function(a){this.nodeGui[a.node1].links.push(a.id),this.nodeGui[a.node2].links.push(a.id),this.links[a.id]=a},this);break;case"DELETELINK":var c=a.data.link;this.links[c.id]=c,this.nodeGui[c.node1].links.push(c.id),this.nodeGui[c.node2].links.push(c.id)}this.emit("undone"),this.selected=!1,this.emit(null,"select","refresh","resetUI")}},deleteSelected:function(){this.emit("deleteSelected"),this.selected=!1,this.emit(null,"select","refresh","resetUI")},deleteNode:function(a){this.emit(a,"deleteNode"),this.selected=!1,this.emit(null,"select","refresh","resetUI")},deleteLink:function(a){this.emit(a,"deleteLink"),this.selected=!1,this.emit(null,"select","refresh","resetUI")},createNode:function(a,b,c,d){if("string"!=typeof a||"string"!=typeof b||"string"!=typeof c)throw new Error("Couldn't create node since information is lacking. Requires strings: name, type, role.");j(this,{name:a,prototypeId:d,role:c.toUpperCase()},{},b||"template")},createNodeByStructure:function(a,b){b.selected=!1,j(this,a,b)},redo:function(){if(0!==this.revertedHistory.length){var a=this.revertedHistory.splice(this.revertedHistory.length-1,1)[0];switch(this.history.push(a),a.action.toUpperCase()){case"NEWNODE":var b=a.data;this.nodeData[b.data.id]=b.data,this.nodeGui[b.gui.id]=b.gui;break;case"NEWLINK":var c=a.data.link;this.links[c.id]=c,this.nodeGui[c.node1].links.push(c.id),this.nodeGui[c.node2].links.push(c.id);break;case"DELETENODE":var b=a.data;this.emit(b.data.id,"deleteNode");break;case"DELETELINK":var c=a.data.link;this.emit(c.id,"deleteLink")}this.emit("redone"),this.selected=!1,this.emit(null,"select","refresh","resetUI")}},emit:function(){if(!this.listeners)return void console.log("No listeners?");var a,b=[];if(1!==arguments.length){a=arguments[0];for(var c=1;c<arguments.length;c++){var d=arguments[c];if("string"!=typeof d)throw new Error("Listener id must be a string.");b.push(d)}}else b=[arguments[0]];a&&a.forEach||(a=[a]),b.forEach(function(b){this.listeners[b]&&this.listeners[b].forEach(function(c){c.apply(this,a.concat([b]))},this)},this)},selectNode:function(a,b){if(void 0!==a&&void 0!==b)throw new Error("Can't select a node from id and name at the same time.");if(void 0!==a&&void 0!==this.nodeData[a]){this.emit("deselect");var c=this.nodeData[a];return this.nodeGui[a].selected=!0,this.selected=c,void this.emit(null,"refresh","resetUI","select")}k.forEach.call(this.nodeData,function(a){return a.name===b?(this.emit("deselect"),this.nodeGui[a.id].selected=!0,this.selected=a,this.emit(null,"refresh","resetUI","select"),!1):void 0},this)},selectNodeByPrototypeId:function(a){if("string"!=typeof a)throw new Error("Prototype id given is not of string type.");k.forEach.call(this.nodeData,function(b){return b.prototypeId===a?(this.emit("deselect"),this.nodeGui[b.id].selected=!0,this.selected=b,this.emit(null,"refresh","resetUI","select"),!1):void 0},this)},selectNodeById:function(a){this.selectNode(a,void 0)},selectNodeByName:function(a){this.selectNode(void 0,a)},getAllModels:e,loadModel:function(a){var b=this,c=a,d=a;return("number"!=typeof a||isNaN(parseInt(a)))&&(c=this.id,d=this.syncId),new i(function(e,f){(void 0===a||null===a||isNaN(parseInt(a)))&&f(new Error("Id must be a valid number."));var g=function(a,h,i){return a===c||h===d?(b.removeListener("modelLoaded",g),b.removeListener("errorLoadingModel",g),"errorLoadingModel"===i?f():void e()):void 0};b.addListener("modelLoaded",g),b.addListener("errorLoadingModel",g),b.emit("storeModel"),b.emit([c,d],"preLoadModel"),b.emit([c,d],"loadModel")})},saveModel:function(a){var b=this,c=a,d=a;return("number"!=typeof a||isNaN(parseInt(a)))&&(a=!1,c=this.id,d=this.syncId),new i(function(e,f){var g=function(a,b,g){return a===c||b===d?"errorSavingModel"===g?f(a):void e(b):void 0};return b.addListener("modelSaved",g),!a||"string"!=typeof a&&"integer"!=typeof a?(b.emit("storeModel"),a||b.emit([c,d],"loadModel"),b.emit([c,d],"preSaveModel"),void b.emit([c,d],"saveModel")):(b.emit([a,a],"preSaveModel"),void b.emit([a,a],"saveModel"))}).then(function(){b.emit("refresh","resetUI")})["catch"](function(a){console.error(a)})},deleteModel:function(a){var b=this,c=a||this.id,d=a||this.syncId;return new i(function(e,f){(void 0===a||null===a||isNaN(parseInt(a)))&&f(new Error("Id must be a valid number."));var g=function(h,i,j){return h===c||i===d?(b.removeListener("modelDeleted",g),"errorDeletingModel"===j?f(a):void e(a)):void 0};return b.addListener("modelDeleted",g),!a||"string"!=typeof a&&"number"!=typeof a?(b.emit("storeModel"),void b.emit([b.id,b.syncId],"deleteModel")):void b.emit([a,a],"deleteModel")})},generateId:function(){return this.nextId++,this.nextId},addListener:function(a,b){this.listeners||(this.listeners={}),this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(b)},removeListener:function(a,b){if(this.listeners[a]){var c=this.listeners[a].indexOf(b);return-1===c?void console.log("Didn't find listener."):void this.listeners[a].splice(c,1)}},removeListeners:function(a){this.listeners[a]=[]},propagate:function(){var a=[];Object.keys(this.changed).forEach(function(b){var c=this[b];if(c){var e=d.prototype.listeners[b];e&&0!==e.length&&e.forEach(function(b){-1===a.indexOf(b)&&a.push(b)})}},this),this.changed={},a.forEach(function(a){a.call(this)},this)},scenariosToJson:function(){var a=[];return k.forEach.call(this.scenarios,function(b){var c={id:b.id,syncId:b.syncId,name:b.name,maxIterations:b.maxIterations,measurement:b.measurement,measurementAmount:b.measurementAmount,timeStepN:b.timeStepN};c.tables=k.map.call(b.data,function(a){return{id:a.id,syncId:a.syncId,timetable:a.steps}}),a.push(c)}),a}},b.exports={newModel:function(a){return m++,new d(m,a)},moveModel:function(a){var b=this.newModel();b.CONFIG=a.CONFIG,b.id=a.id,b.environment=a.environment,b.sidebar=a.sidebar,b.floatingWindows=a.floatingWindows,b.saved=a.saved,b.synced=a.synced,b.syncId=a.syncId,b.nextId=a.nextId,delete b.selected,b.nodeData=a.nodeData,b.nodeGui=a.nodeGui,b.links=a.links,b.settings=a.settings,b.treeSettings=a.treeSettings,b.loadedScenario=a.loadedScenario,b.scenarios=a.scenarios,b.listeners=a.listeners,b["static"]=a["static"],b.history=a.history,a.nodeData={},a.nodeGui={},a.links={},a.treeSettings={};var c=new h(a);return a.scenarios={},a.scenarios[c.id]=c,a.loadedScenario=c,a.settings={},a.history=[],b},getAllModels:function(a){return e.call(a)},saveModel:function(a,b,c,d,e){var h={modelId:d.syncId,settings:d.settings,nodes:g.nodes(d),links:g.links(d),scenarios:d.scenariosToJson()};console.log(h),f(a,"/models/"+b+"/"+c+"/save",h,function(a,b){if(b)return console.error(b.stack),void d.emit("Couldn't save model: "+b.message,"notification");if(200!==a.status)return void d.emit("Couldn't save model: "+(a.errors||"null"),"notification");try{d.synced=!0,d.syncId=a.response.model.id,d.settings.saved=!0;var c=a.response.nodes,f=a.response.links,g=a.response.scenarios,h=a.response.timetables,i=(a.response.timesteps,{});c.forEach(function(a){try{d.nodeData[a.id].syncId=a.syncId,d.nodeGui[a.id].syncId=a.syncId,i[a.syncId]=d.nodeData[a.id]}catch(b){}}),f.forEach(function(a){try{d.links[a.id].syncId=a.syncId}catch(b){}});var j={};g.forEach(function(a){d.scenarios[a.id].syncId=a.syncId,j[a.syncId]=d.scenarios[a.id]});var k={};h.forEach(function(a){j[a.scenario].data[i[a.node].id].syncId=a.syncId,k[a.syncId]=j[a.scenario].data[i[a.node]]})}catch(l){throw console.error(l),l}e()})},deleteModel:function(a,b,c,d,e,g){void 0===e.local[d]?f(a,"/models/"+b+"/"+c+"/"+d,{},function(a,b){return b?(console.error(a),void console.error(b)):(delete e.synced[d],void g(a.response.message))},"DELETE"):(delete e.local[d],g())},loadSyncModel:function(a,b,c,d,e){var g=this;f(a,"/models/"+b+"/"+c+"/bundle/"+d,function(a,b){if(b)return console.error(a),void console.error(b);if(200!==a.status)return a.response||(a.response={}),void e(new Error(a.response.message||"Error loading model"));var c=a.response.model,d=a.response.nodes,f=a.response.links,h=a.response.scenarios,i=a.response.timetables,j=a.response.timesteps,k=g.newModel();k.synced=!0,k.syncId=c.id,delete k.scenarios;var l=0;k.scenarios={},k.settings.name=c.name,k.settings.offsetX=c.pan_offset_x,k.settings.offsetY=c.pan_offset_y,k.settings.zoom=c.zoom,d.forEach(function(a){k.nodeData[a.id]={id:a.id,syncId:a.id,name:a.name,description:a.description,type:a.type,prototypeId:a.prototype_id,role:a.role,simulateChange:0,objectId:"nodeData"},k.nodeGui[a.id]={id:a.id,syncId:a.id,radius:a.radius,x:a.x,y:a.y,avatar:a.avatar,color:a.color,links:[],objectId:"nodeGui"},l<a.id&&(l=a.id)}),f.forEach(function(a){return a.downstream&&a.upstream?(k.links[a.id]={id:a.id,syncId:a.id,coefficient:a.coefficient,node1:a.upstream,node2:a.downstream,threshold:a.threshold,timelag:a.timelag,type:a.type||"fullchannel",width:8,bidirectional:a.bidirectional||!1,bidirectionalTimelag:a.bidirectional_timelag||1,objectId:"link"},k.nodeGui[a.downstream].links.push(a.id),k.nodeGui[a.upstream].links.push(a.id),void(l<a.id&&(l=a.id))):e(c.id)}),h.forEach(function(a,b){var c={id:a.id,syncId:a.id,name:a.name,maxIterations:a.max_iterations,timeStepN:a.timestep_n,measurement:a.measurement,measurementAmount:a.measurement_amount,data:{}};k.scenarios[c.id]=c,0===b&&(k.loadedScenario=k.scenarios[a.id]),l<a.id&&(l=a.id)});var m={};console.log(i,j),i.forEach(function(a){var b=k.nodeData[a.node],c={id:a.id,syncId:a.id,steps:{}};return k.scenarios[a.scenario].data[b.id]=c,void(m[c.id]=c);var b}),j.forEach(function(a){if(!m[a.timetable])return void console.log(a,"didn't have a timetable?");var b=m[a.timetable].steps;return void(b[a.step]=a.value)}),k.nextId=++l,e(k)})}}},{"./breakout.js":"breakout.js","./menu_builder":"menu_builder/menu_builder.js","./network":"network/network.js","./object-helper":"object-helper.js","./scenario":"scenario/scenario_index.js","./settings":"settings/settings.js","./structures/create_link.js":"structures/create_link.js","./structures/create_node.js":"structures/create_node.js","./structures/timetable.js":"structures/timetable.js",promise:46}],"mouse_handling/handle_down.js":[function(a,b,c){"use strict";function d(a,b,c,d){var e=m.filter.call(a.nodeGui,function(a){return a.clicked});e=m.map.call(e,function(a){return delete a.clicked,a});var f=m.filter.call(a.links,function(a){return a.clicked});f=m.map.call(f,function(a){return delete a.clicked,a}),a.nodeGui=m.merge.call(a.nodeGui,e),a.links=m.merge.call(a.links,f);var g=m.filter.call(a.nodeGui,function(b){return i(b,a.pos)});if(g=m.slice.call(g,-1),g=m.map.call(g,function(b){return b=m.merge.call(b,{offsetX:a.pos.x-(b.x||0),offsetY:a.pos.y-(b.y||0),clicked:!0})}),a.nodeGui=m.merge.call(a.nodeGui,g),Object.keys(g).length>0)return c(a);var j=m.filter.call(a.links,function(b){return i(k(b,a.nodeGui),a.pos)});if(j=m.slice.call(j,-1),j=m.map.call(j,function(b){return m.merge.call(b,{offsetX:a.pos.x-(b.x||0),offsetY:a.pos.y-(b.y||0),clicked:!0})}),a.links=m.merge.call(a.links,j),Object.keys(j).length>0)return c(a);if("simulate"!==a.env)return a;var l=m.filter.call(a.nodeGui,function(b){var c=b.tableWidth,d=b.tableHeight,e=b.x-b.radius-c-8,f=b.y-d/2;return h(a.pos,{x:e,y:f,width:c,height:d})});return l=m.map.call(l,function(b){return b.concat({offsetX:a.pos.x-(b.x||0),offsetY:a.pos.y-(b.y||0),clicked:!0})}),a.nodeGui=m.merge.call(a.nodeGui,l),m.size.call(l)>0?c(a):a}function e(a,b,c){var d=m.filter.call(a.nodeGui,function(a){return a.selected===!0});return d=m.filter.call(d,function(b){return i(a.pos,j(b))}),d=m.map.call(d,function(a){return a.linking=!0,a}),a.nodeGui=m.merge.call(a.nodeGui,d),m.size.call(d)>0?c(a):a}function f(a,b,c){var d=m.filter.call(a.nodeGui,function(a){return a.selected===!0&&a.linking!==!0&&void 0!==a.icon});return d=m.filter.call(d,function(b){return i(a.pos,l(b))}),d=m.map.call(d,function(a){return a.set("movingIcon",!0)}),a.nodeGui=m.merge.call(a.nodeGui,d),m.size.call(d)>0?c(a):a}var g=a("./../middleware.js"),h=a("./../collisions.js").pointRect,i=a("./../collisions.js").hitTest,j=a("./../linker.js"),k=a("./../aggregated_link.js"),l=a("../icon"),m=a("./../object-helper.js"),n=g([e,f,d]);b.exports=n},{"../icon":"icon.js","./../aggregated_link.js":"aggregated_link.js","./../collisions.js":"collisions.js","./../linker.js":"linker.js","./../middleware.js":"middleware.js","./../object-helper.js":"object-helper.js"}],"mouse_handling/handle_drag.js":[function(a,b,c){"use strict";function d(a){return a.settings.offsetX=(a.settings.offsetX||0)-a.deltaPos.x,a.settings.offsetY=(a.settings.offsetY||0)-a.deltaPos.y,a}function e(a,b,c){var d=i.filter.call(a.nodeGui,function(a){return a.clicked===!0});return d=i.map.call(d,function(b){return i.merge.call(b,{x:a.pos.x-b.offsetX,y:a.pos.y-b.offsetY})}),a.nodeGui=i.merge.call(a.nodeGui,d),Object.keys(d).length>0?c(a):a}function f(a,b,c){var d=i.filter.call(a.nodeGui,function(a){return a.linking===!0});return d=i.map.call(d,function(b){return i.merge.call(b,{linkerX:a.pos.x,linkerY:a.pos.y})}),a.nodeGui=i.merge.call(a.nodeGui,d),Object.keys(d).length>0?c(a):a}function g(a,b,c){var d=i.filter.call(a.nodeGui,function(a){return a.movingIcon===!0});return d=i.map.call(d,function(b){return b.merge({iconXOffset:a.pos.x-b.x,iconYOffset:a.pos.y-b.y})}),a.nodeGui=i.merge.call(a.nodeGui,d),Object.keys(d).length>0?c(a):a}var h=a("./../middleware.js"),i=a("./../object-helper.js"),j=h([f,g,e,d]);b.exports=j},{"./../middleware.js":"middleware.js","./../object-helper.js":"object-helper.js"}],"mouse_handling/handle_up.js":[function(a,b,c){"use strict";function d(){var a=Math.round(255*Math.random()).toString(16);return 1===a.length&&(a="0"+a),a}function e(){return"#"+d()+d()+d()}function f(a){return l(a.loadedModel),a}function g(a){var b=m.filter.call(a.nodeGui,function(a){return a.linking===!0});return b=m.map.call(b,function(a){return delete a.linkerX,delete a.linkerY,delete a.linking,a.clicked=!0,a}),a.nodeGui=m.merge.call(a.nodeGui),a}function h(a){var b=m.filter.call(a.nodeGui,function(a){return a.movingIcon===!0});return b=m.map.call(b,function(a){return a["delete"]("movingIcon")}),a.nodeGui=m.merge.call(a.nodeGui,b),a}function i(a){if(a.didDrag)return a;var b=m.filter.call(a.nodeGui,function(a){return a.selected===!0&&!a.clicked&&!a.linking});b=m.map.call(b,function(b){return a.selected=!1,delete b.selected,delete b.offsetX,delete b.offsetY,b}),a.nodeGui=m.merge.call(a.nodeGui,b);var c=m.filter.call(a.links,function(a){return a.selected===!0&&!a.clicked});return c=m.map.call(c,function(b){return a.selected=!1,delete b.selected,delete b.offsetX,delete b.offsetY,b}),a.links=m.merge.call(a.links,c),a}function j(a,b,c){var d=m.filter.call(a.nodeGui,function(a){return a.clicked});d=m.map.call(d,function(b){return void 0!==b.msSinceClicked&&b.msSinceClicked+300>Date.now()?(a.selected=b,b.selected=!0,delete b.msSinceClicked,b):(a.didDrag||(b.linegraph=a.linegraph?!b.linegraph:!1,a.refreshLinegraph=!0,b.color||(b.color=e())),b.msSinceClicked=Date.now(),b)});var f=m.filter.call(a.links,function(a){return a.clicked});return f=m.map.call(f,function(b){return void 0!==b.msSinceClicked&&b.msSinceClicked+300>Date.now()?(a.selected=b,b.selected=!0,delete b.msSinceClicked,b):(b.msSinceClicked=Date.now(),b)}),a.nodeGui=m.merge.call(a.nodeGui,d),a.links=m.merge.call(a.links,f),a}var k=a("./../middleware.js"),l=(a("./../collisions.js").hitTest,a("./../linker.js"),a("./../model_layer.js"),a("./../util/generate_link.js")),m=a("./../object-helper.js"),n=(a("../structures/create_link"),k([f,i,g,h,j]));b.exports=n},{"../structures/create_link":"structures/create_link.js","./../collisions.js":"collisions.js","./../linker.js":"linker.js","./../middleware.js":"middleware.js","./../model_layer.js":"model_layer.js","./../object-helper.js":"object-helper.js","./../util/generate_link.js":"util/generate_link.js"}],"network/network.js":[function(a,b,c){"use strict";function d(a){var b=a.match(/^(http[s]?):\/\/([a-zA-Z0-9\.]+)\/?.*$|^(http[s]?):\/\/([a-zA-Z0-9\.]+):(\d+)\/?.*$/);if(null===b)throw console.error(a),new Error("Domain of invalid structure!");return a}function e(a,b,c,e,f){if("string"!=typeof a)throw new Error("sendData got invalid type for domain or port!");if(c&&"function"==typeof c&&(e&&"string"==typeof e&&(f=e),e=c,c=null),c){if("object"!=typeof c)throw new Error("Expected JS object as jsonData.");c=JSON.stringify(c,null,4)}var g=new XMLHttpRequest;return d(a),g?(g.onreadystatechange=function(){if(4===g.readyState)try{if(0===g.status)throw new Error("Connection refused.");var a=JSON.parse(g.responseText);a.status=g.status,200!==a.status&&console.error(a);try{e?e(a):console.warn("No callback was sent with the query against "+b)}catch(c){console.warn(g),e(a,c)}}catch(c){console.warn(g),e(void 0,c)}},f||(f=c&&"function"!=typeof c?"POST":"GET"),"/"===a.charAt(a.length-1)&&(a=a.slice(0,a.length-1)),"/"!==b.charAt(0)&&(b="/"+b),g.open(f,a+b),g.setRequestHeader("Content-Type","application/json"),void(c&&"function"!=typeof c?g.send(c):g.send())):(console.error("Giving up :( Cannot create an XMLHTTP instance"),!1)}b.exports=e},{}],"network/package.json":[function(a,b,c){b.exports={name:"s4u_network",main:"./network.js"}},{}],"new_ui/lib/button.js":[function(a,b,c){"use strict";function d(){e.call(this,"div"),this.root.style.cursor="pointer",this.label=new e("div"),this.appendChild(this.label),this.clicks=[]}var e=a("./element.js");d.prototype={setLabel:function(a){this.label.setLabel(a)},simulateClick:function(){this.clicks.forEach(function(a){a()})},click:function(a){a&&"function"==typeof a&&(this.clicks.push(a),this.root.addEventListener("click",a))},removeClick:function(a){var b=this.clicks.indexOf(a);this.clicks.splice(b,1),this.root.removeEventListener("click",a)},removeEvents:function(){this.clicks.forEach(function(a){this.root.removeEventListener("click",a)},this),this.clicks=[]},replaceClick:function(a,b){var c=this.clicks.indexOf(a);-1!==c?(this.root.removeEventListener("click",this.clicks[c]),this.clicks[c]=b):this.clicks.push(b),this.root.addEventListener("click",b)},__proto__:e.prototype},b.exports=d},{"./element.js":"new_ui/lib/element.js"}],"new_ui/lib/checkbox.js":[function(a,b,c){"use strict";function d(){g.call(this),this.checked=!1,this.uncheck,this.check;var a=this;this.click(function(){a.checked?a.uncheck():a.check(),a.checked=!a.checked})}var e=a("./input.js"),f=a("./colors.js"),g=a("./button.js");d.prototype={setBackground:function(a){this.nonHighlightBackground=a,e.prototype.setBackground.call(this,a)},onUncheck:function(a){var b=this;b.uncheck=function(){e.prototype.setBackground.call(b,b.nonHighlightBackground),a()}},onCheck:function(a){var b=this;b.check=function(){e.prototype.setBackground.call(b,f.buttonCheckedBackground),a()}},removeEvents:function(){g.prototype.removeEvents.call(this)},__proto__:g.prototype},b.exports=d},{"./button.js":"new_ui/lib/button.js","./colors.js":"new_ui/lib/colors.js","./input.js":"new_ui/lib/input.js"}],"new_ui/lib/colors.js":[function(a,b,c){"use strict";var d="#303040",e="#f7b8dd",f="#c7b7f7",g="#AA6EEB",h="#b197ba",i="#A3779D",j="#b7caf7",k="#7C6CE6",l="#3643A3",m="#446A96",n="#395585",o="#314973",p="#2A3D66",q="#D7F1F7",r="#3F2191",s="#E61953",t="#D99B4A",u="#CF743C",v="#572211",w="#63E07C",x="#27AB5E",y="#fafafa",z=n,A="30px",B="14px",C=q,D=m,E=5,F=30,G="1.2em",H=q,I=m,J=5,K="12px",L=q,M=n,N=o,O="12px",P=q,Q=o,R=p,S=q,T=u,U=t;b.exports={lightBlack:d,lightPink:e,lightPurple:f,palePurple:g,darkPurple:h,darkerPurple:i,lightBlue:j,paleBlue:k,blue:l,darkTeal:m,darkerTeal:n,darkererTeal:o,darkerererTeal:p,tealFont:q,almostBlue:r,lightOrange:t,warningRed:s,lightGreen:w,darkOrange:u,darkerLightGreen:x,darkDarkOrange:v,white:y,sidebarBackground:z,sidebarFoldButtonSize:A,sidebarFoldButtonFontSize:B,sidebarFoldButtonFontColor:C,sidebarFoldButtonBackground:D,sidebarFoldButtonPaddingtop:E,menuButtonHeight:F,menuButtonIconSize:G,menuButtonFontColor:H,menuButtonBackground:I,menuButtonPaddingTop:J,menuItemFontSize:K,menuItemFontColor:L,menuItemBackground:M,menuItemActiveBackground:N,itemFontSize:O,itemFontColor:P,itemBackground:Q,inputBackground:R,inputFontColor:S,buttonBackground:R,buttonFontColor:S,buttonCheckedBackground:T,activeAvatar:U}},{}],"new_ui/lib/dropdown.js":[function(a,b,c){"use strict";function d(a,b){e.call(this,"div"),this.header=new e("div"),this.select=new e("select"),this.root.style.padding="0px 8px",this.select.setWidth("100%"),this.header.root.style["margin-bottom"]="8px",this.header.root.style["font-weight"]="700",this.select.root.style.padding="4px 0px",this.select.setBackground(f.buttonBackground),this.select.root.style.color=f.buttonFontColor,this.select.root.style.border="none",this.rawValues=[],this.values=[],a&&a.forEach&&a.forEach(function(a){return"object"==typeof a?a.label&&a.value?void this.addValue(a.label,a.value):void console.error("Invalid value given to dropdown"):void this.addValue(a)},this),this.changes=[],b&&"function"==typeof b&&this.onChange(b),this.appendChild(this.header),this.appendChild(this.select)}var e=a("./element.js"),f=a("./colors.js");d.prototype={refresh:function(){this.updateValue&&this.updateValue()},defaultValue:function(a){if(!a&&"function"!=typeof a)throw new Error("Trying to set callback which is not a function");var b=this;this.updateValue=function(){b.setSelectedByValue(a())},this.updateValue()},onChange:function(a){this.select.root.addEventListener("change",a),this.changes.push(a)},removeChange:function(a){var b=this.changes.indexOf(a);-1!==b&&(this.select.root.removeEventListener("change",a),this.changes.splice(b,1))},removeEvents:function(){this.changes.forEach(function(a){this.select.root.removeEventListener("change",a)},this)},setLabel:function(a){e.prototype.setLabel.call(this.header,a)},setSelectedByIndex:function(a){this.values.length<=a||(this.select.root.selectedIndex=a)},setSelectedByValue:function(a){var b=this.rawValues.indexOf(a);-1!==b&&(this.select.root.selectedIndex=b)},setValue:this.setSelectedByValue,getValue:function(){return this.select.root.value},getValueAtIndex:function(a){return this.values[a].root.value},getCurrentLabel:function(){var a=this.getIndex();return 0>a?"":this.values[a].getLabel()},getIndex:function(){return this.select.root.selectedIndex},deleteCurrent:function(){var a=this.getIndex();0>a||(this.select.removeChild(this.values[a]),this.values.splice(a,1),this.rawValues.splice(a,1),a>=this.values.length&&(a=this.values.length-1),0>a||this.setSelectedByIndex(a))},addValue:function(a,b){var c=new e("option");this.values.push(c),c.setLabel(a),b||(b=a),c.root.value=b,this.rawValues.push(b),this.select.appendChild(c)},changeValue:function(a,b){this.values[b]&&(this.values[b].root.value=a,this.values[b].setLabel(a),this.rawValues[b]=a)},changeLabel:function(a,b){this.values[b]&&this.values[b].setLabel(a)},replaceValues:function(a){for(var b=this.getIndex();this.select.root.firstChild;)this.select.root.removeChild(this.select.root.firstChild);this.values=[],this.rawValues=[],a.forEach(function(a){return"object"==typeof a?a.label&&a.value?void this.addValue(a.label,a.value):void console.error("Invalid value given to dropdown"):void this.addValue(a)},this),b>=this.values.length||this.setSelectedByIndex(b)},__proto__:e.prototype},b.exports=d},{"./colors.js":"new_ui/lib/colors.js","./element.js":"new_ui/lib/element.js"}],"new_ui/lib/element.js":[function(a,b,c){"use strict";function d(a){this.root=document.createElement(a||"div")}d.prototype={appendTo:function(a){return a instanceof d?a.appendChild(this):void a.appendChild(this.root)},setLabel:function(a){this.root.innerHTML=a},getLabel:function(){return this.root.innerHTML},appendChild:function(a){return this.children||(this.children=[]),a instanceof d&&this.children.push(a),a.root?this.root.appendChild(a.root):void this.root.appendChild(a)},removeChild:function(a){if(this.children){var b=this.children.indexOf(a);if(-1!==b)this.children.splice(b,1),this.root.removeChild(a.root);else try{this.root.removeChild(a)}catch(c){console.error(c)}}else try{a.root?this.root.removeChild(a.root):this.root.removeChild(a)}catch(c){console.error(c)}},createFoldButton:function(){this.buttons||(this.buttons=[]);var a=new FoldButton;return this.buttons.push(a),a},createButton:function(){this.buttons||(this.buttons=[]);var a=new Button;return this.buttons.push(a),a},deleteAllButtons:function(){this.buttons&&this.buttons.forEach(function(a){a.removeEventListener()})},setWidth:function(a){"string"==typeof a?this.root.style.width=a:"number"==typeof a&&(this.root.style.width=a+"px"),this.width=parseInt(a)},getWidth:function(){return this.root.offsetWidth||this.width||0},setHeight:function(a){"string"==typeof a?this.root.style.height=a:"number"==typeof a&&(this.root.style.height=a+"px",this.height=parseInt(a))},getHeight:function(){return this.root.offsetHeight||this.height||0},setBackground:function(a){this.root.style["background-color"]=a,this.background=a},getBackground:function(){return this.background},setLeft:function(a){"string"==typeof a?this.root.style.left=a:"number"==typeof a&&(this.root.style.left=a+"px"),this.left=parseInt(a)},getLeft:function(){return this.left||0},setTop:function(a){
"string"==typeof a?this.root.style.top=a:"number"==typeof a&&(this.root.style.top=a+"px"),this.top=parseInt(a)},getTop:function(){return this.top||0},hide:function(){"none"!==this.root.style.display&&(this.currentStyle=this.root.style.display),this.root.style.display="none"},show:function(){this.root.style.display=this.currentStyle||"block"},destroy:function(){this.removeEvents&&this.removeEvents(),this.children&&this.children.forEach(function(a){a.destroy()}),this.root.parentElement&&this.root.parentElement.removeChild(this.root)}},b.exports=d},{}],"new_ui/lib/foldable.js":[function(a,b,c){"use strict";function d(a,b){if(!a)throw new Error("Creating foldable without width.");if("number"!=typeof a)throw new Error("Width given must be a number.");this.root=document.createElement("div"),b?this.setWidth(a):this.setWidth(0),this.folded=!0,this.foldableWidth=a,this.children=[]}var e=a("./element.js"),f=a("./tween.js"),g=f.easeOutCirc;d.prototype={fold:function(a){this.children.forEach(function(a){a instanceof d&&a.fold()}),this.currentTween&&this.currentTween.stop();var b=this.getWidth(),c=b,e=this;this.currentTween=g(c,250,function(a){e.setWidth(b-a)},a),this.folded=!0},unfold:function(a){this.children.forEach(function(a){a instanceof d&&a.wasUnfolded&&a.unfold()}),this.currentTween&&this.currentTween.stop();var b=this.getWidth(),c=this.foldableWidth-b,e=this;this.currentTween=g(c,250,function(a){e.setWidth(b+a)},a),this.folded=!1},positionalFold:function(){this.children.forEach(function(a){a instanceof d&&a.fold()}),this.currentTween&&this.currentTween.stop();var a=this.getLeft(),b=a;if(0===b)return void(this.folded=!0);var c=this;this.currentTween=g(b,250,function(b){c.setLeft(a-b)}),this.folded=!0},positionalUnfold:function(){this.children.forEach(function(a){a instanceof d&&a.unfold()}),this.currentTween&&this.currentTween.stop();var a=this.getLeft(),b=this.foldableWidth-a,c=this;this.currentTween=g(b,250,function(b){c.setLeft(a+b)}),this.folded=!1},positionalInvert:function(){this.folded?this.positionalUnfold():this.positionalFold()},invert:function(a){this.folded?this.unfold(a):this.fold(a)},__proto__:e.prototype},b.exports=d},{"./element.js":"new_ui/lib/element.js","./tween.js":"new_ui/lib/tween.js"}],"new_ui/lib/icon_group.js":[function(a,b,c){"use strict";function d(a){e.call(this,"div"),this.groupLabel=new e("div"),this.groupLabel.setLabel(a),this.groupLabel.root.style.margin="16px 0px",this.groupLabel.root.style["text-align"]="center",this.groupLabel.root.style["font-weight"]="700",this.iconContainer=new e("div"),this.iconContainer.root.style["text-align"]="center",this.appendChild(this.groupLabel),this.appendChild(this.iconContainer),this.icons=[]}var e=a("./element.js"),f=a("./colors.js"),g=a("./button.js");d.prototype={invalidate:function(){this.icons.forEach(function(a){a.hide()})},reuseIcon:function(a,b){var c;return b<this.icons.length?(c=this.icons[b],c.show(),a&&(c.image.root.src=a)):c=this.addIcon(a),c},addIcon:function(a){var b=new g,c=new e("div");b.appendChild(c);var d=new e("img");return a?d.root.src=a:d.setBackground(f.buttonBackground),c.appendChild(d),b.setWidth(50),b.setHeight(50),b.root.style.display="inline-block",d.setWidth(50),d.setHeight(50),d.root.style.border="none",b.root.style.margin="6px 6px",b.image=d,this.icons.push(b),this.iconContainer.appendChild(b),b},setLabel:function(a){this.groupLabel.setLabel(a)},__proto__:e.prototype},b.exports=d},{"./button.js":"new_ui/lib/button.js","./colors.js":"new_ui/lib/colors.js","./element.js":"new_ui/lib/element.js"}],"new_ui/lib/input.js":[function(a,b,c){"use strict";function d(){this.changes=[],this.inputs=[],e.call(this),this.input=new e("input"),this.label=new e("div"),this.inputDiv=new e("div"),this.inputDiv.appendChild(this.input),this.input.setWidth("100%"),this.input.setBackground(f.inputBackground),this.input.root.style.border="none",this.input.root.style.color=f.inputFontColor,this.input.root.style["text-align"]="center",this.label.root.style["margin-bottom"]="8px";var a=this;this.onChange(function(){a.input.root.blur()}),this.appendChild(this.label),this.appendChild(this.inputDiv)}var e=a("./element.js"),f=a("./colors.js");d.prototype={refresh:function(){this.updateValue&&this.updateValue()},defaultValue:function(a){if(!a&&"function"!=typeof a)throw new Error("Trying to set callback which is not a function");var b=this;this.updateValue=function(){b.setValue(a())},this.updateValue()},setLabel:function(a){this.label.root.innerHTML=a},setValue:function(a){this.input.root.value=a},getValue:function(){return this.input.root.value},onChange:function(a){this.changes.push(a),this.input.root.addEventListener("change",a)},onInput:function(a){this.inputs.push(a),this.input.root.addEventListener("input",a)},replaceChange:function(a,b){var c=changes.indexOf(a);this.input.root.removeEventListener("change",changes[c]),this.input.root.addEventListener("change",b),changes[c]=b},replaceInput:function(a,b){var c=inputs.indexOf(a);this.input.root.removeEventListener("input",inputs[c]),this.input.root.addEventListener("input",b),inputs[c]=b},removeEvents:function(){this.inputs.forEach(function(a){this.input.root.removeEventListener("input",a)},this),this.changes.forEach(function(a){this.input.root.removeEventListener("change",a)},this)},__proto__:e.prototype},b.exports=d},{"./colors.js":"new_ui/lib/colors.js","./element.js":"new_ui/lib/element.js"}],"new_ui/lib/menu.js":[function(a,b,c){"use strict";function d(a){this.menuItems=[],this.items=[],this.buttons=[],this.buttonHeight=i.menuButtonHeight,this.buttonLayer=new e,this.buttonLayer.setHeight(this.buttonHeight),this.buttonLayer.root.style.color=i.menuButtonFontColor,this.buttonLayer.setBackground(i.menuButtonBackground),this.buttonLayer.root.style.padding="0px 4px",this.menuLayer=new e,this.itemLayer=new e,this.menuLayer.root.style.position="relative",this.itemLayer.root.style.position="absolute",this.itemLayer.root.style.top="0",this.itemLayer.setHeight("100%"),f.call(this,a),this.appendChild(this.itemLayer),this.appendChild(this.buttonLayer),this.appendChild(this.menuLayer),this.activeMenuItem;var b=this;this.clicks=[],h.prototype.click.call(this,function(a){var c=a.target.owner||a.target.parentOwner;if(c){if(c===b.activeMenuItem)return b.activeMenuItem.child.invert(function(){c.setBackground(i.menuItemBackground)}),void(b.activeMenuItem=!1);if(c.refresh&&c.refresh(),b.activeMenuItem)return b.activeMenuItem.child.invert(function(){b.activeMenuItem.setBackground(i.menuItemBackground),c.setBackground(i.menuItemActiveBackground),c.child.invert(),b.activeMenuItem=c});c.setBackground(i.menuItemActiveBackground),c.child.invert(),b.activeMenuItem=c}})}var e=a("./element.js"),f=a("./foldable.js"),g=a("./tween.js"),h=a("./button.js"),i=a("./colors.js"),j=g.easeOutCirc;d.prototype={addButton:function(a){this.buttons.push(a),this.buttonLayer.appendChild(a)},addItem:function(a){a.setWidth(this.getWidth()),this.menuLayer.appendChild(a),this.itemLayer.appendChild(a.child),this.menuItems.push(a),a.child.setTop(this.buttonHeight),this.items.push(a.child)},unfold:function(){this.activeMenuItem&&this.activeMenuItem.child.invert(),this.currentTween&&this.currentTween.stop();var a=this.getWidth(),b=this.foldableWidth-a,c=this;this.currentTween=j(b,250,function(b){c.setWidth(a+b)}),this.folded=!1},fold:function(){this.activeMenuItem&&this.activeMenuItem.child.invert(),this.currentTween&&this.currentTween.stop();var a=this.getWidth(),b=a,c=this;this.currentTween=j(b,250,function(b){c.setWidth(a-b)}),this.folded=!0},setWidth:function(a){this.menuItems.forEach(function(b){b.setWidth(a)}),d.prototype.__proto__.setWidth.call(this,a),this.itemLayer.setLeft(a)},__proto__:f.prototype},b.exports=d},{"./button.js":"new_ui/lib/button.js","./colors.js":"new_ui/lib/colors.js","./element.js":"new_ui/lib/element.js","./foldable.js":"new_ui/lib/foldable.js","./tween.js":"new_ui/lib/tween.js"}],"new_ui/lib/menu_item.js":[function(a,b,c){"use strict";function d(a,b){b===!0?(h.call(this,a,!0),this.child=new h(a)):(g.call(this,a,!0),this.child=new g(a),this.child.root.style.position="absolute"),this.setBackground(j.menuItemBackground),this.maxWidth=a,this.root.style["text-align"]="center",this.root.style.color=j.menuItemFontColor,this.root.style.padding="16px 0px",this.root.owner=this,this.root.style.cursor="pointer",this.root.style.overflow="hidden",this.child.setBackground(j.itemBackground),this.child.root.style.color=j.itemFontColor,this.child.root.style["overflow-x"]="hidden",this.child.root.style["overflow-y"]="auto",this.child.root.style["white-space"]="nowrap",this.child.root.style["font-size"]=j.itemFontSize,this.child.root.style["max-height"]="80%",this.label=new k,this.label.root.style["white-space"]="normal",this.label.root.parentOwner=this,this.label.root.style["font-weight"]="700",this.label.root.style["font-size"]=j.menuItemFontSize,this.appendChild(this.label),this.items=[]}function e(a){return null!==a.match(/^\d*$/)}function f(a){return null!==a.match(/^\d*\.?\d*$/)}var g=a("./foldable.js"),h=a("./v_foldable.js"),i=a("promise"),j=a("./colors.js"),k=a("./element.js"),l=a("./input.js"),m=a("./slider.js"),n=a("./icon_group.js"),o=a("./dropdown.js"),p=a("./checkbox.js"),q=a("./button.js");d.prototype={addSeparator:function(a){var b=new k("div");return b.setHeight(a),this.child.appendChild(b),this.items.push(b),b},addIconGroup:function(a){var b=new n(a);return this.child.appendChild(b),b.root.style["white-space"]="normal",b.setWidth(this.maxWidth),this.items.push(b),b},addCheckbox:function(a,b,c){"function"==typeof a&&"function"==typeof b&&(c=b,b=a);var d=new p;a&&d.setLabel(a),b&&"function"==typeof b&&d.onCheck(b),c&&"function"==typeof c&&d.onUncheck(c);var e=new k("div");return e.root.style["white-space"]="normal",e.setWidth(this.maxWidth),e.root.style.padding="0px 8px",e.root.style.margin="8px 0px",e.appendChild(d),d.root.style.padding="8px 0px",d.setBackground(j.buttonBackground),d.root.style.color=j.buttonFontColor,d.root.style["text-align"]="center",d.setWidth("100%"),this.child.appendChild(e),this.items.push(d),d},addFoldable:function(a){var b=new d(this.maxWidth,!0);b.child.wasUnfolded=!1;var c=this.addButton(a,function(){b.child.wasUnfolded?c.setBackground(j.buttonBackground):c.setBackground(j.buttonCheckedBackground),b.child.invert(),b.child.wasUnfolded=!b.child.wasUnfolded});return b.destroy=function(){c.destroy(),b.items.forEach(function(a){a.destroy()}),b.child.destroy()},b.setLabel=function(a){c.setLabel(a)},this.items.push(b.child),this.child.appendChild(b.child),b},addEditableDropdown:function(a,b,c,d,e,f){var g=new o(b,function(){f(g.getValue(),g.getCurrentLabel())});g.setLabel(a),g.header.root.style["text-align"]="center",g.root.style["white-space"]="normal",g.setWidth("100%"),g.select.root.style.padding="4px 16px",g.root.style.padding="0px",g.root.style.margin="0px 4px",g.root.style["margin-bottom"]="4px",g.root.style["text-align"]="left",g.root.style.display="block";var h=new k("div");h.root.style["white-space"]="normal",h.setWidth(this.maxWidth),h.root.style.padding="0px 8px",h.root.style.margin="8px 0px",h.root.style["text-align"]="center";var i=new l;i.label.root.style.display="none",i.root.style["white-space"]="normal",i.setWidth("100%"),i.input.root.style.padding="4px 16px",i.input.root.style["text-align"]="left",i.root.style.display="inline-block",i.currentStyle="inline-block",i.root.style.margin="0px 4px",i.root.style["margin-bottom"]="4px",i.setValue("Rock the microphone."),i.input.setBackground(j.darkDarkOrange),i.root.style.display="none";var m=function(){var a=new q;return a.root.style.display="inline-block",a.root.style.padding="4px 4px",a.root.style["text-align"]="center",a.root.style.color=j.buttonFontColor,a.setWidth("30%"),a.root.style.margin="0px 4px",a},n=m();n.setBackground(j.darkOrange);var p=m();p.setBackground(j.warningRed);var r=m();r.setBackground(j.darkerLightGreen),r.click(function(){c(function(a,b){g.addValue(a,b)})});var s=!1;p.click(function(){var a=g.getValue();g.deleteCurrent(),e(a),s&&(i.hide(),g.show(),t.root.className="glyphicon glyphicon-pencil"),f(g.getValue(),g.getCurrentLabel()),-1===g.getIndex()&&r.simulateClick()});var t=new k("span");t.root.className="glyphicon glyphicon-pencil";var u=new k("span");u.root.className="glyphicon glyphicon-file";var v=new k("span");return v.root.className="glyphicon glyphicon-trash",n.click(function(){s?(i.hide(),g.show(),t.root.className="glyphicon glyphicon-pencil"):(i.setValue(g.getCurrentLabel()),t.root.className="glyphicon glyphicon-ok",i.show(),g.hide()),s=!s}),g.replaceValues=function(a){o.prototype.replaceValues.call(g,a);var b=g.getValue();i.setValue(b)},i.onChange(function(a){var b=i.getValue(),c=g.getIndex();g.changeLabel(b,c),d(g.getValueAtIndex(c),b)}),n.appendChild(t),r.appendChild(u),p.appendChild(v),h.appendChild(g.header),h.appendChild(g),h.appendChild(i),h.appendChild(r),h.appendChild(n),h.appendChild(p),this.child.appendChild(h),this.items.push(g),g},addTimeRow:function(a,b,c,d,g,h){var m=function(a,b){var c=new l;return c.root.style["white-space"]="normal",c.setWidth(a),c.input.root.style.padding="4px 16px",c.root.style["text-align"]="center",c.root.style.display="inline-block",c.root.style.margin="0px 4px",c.setValue(b),c},n=m("20%",a);n.previousValue=a,n.lastValue=a,n.onInput(function(){return e(n.getValue())?void(n.previousValue=n.getValue()):void n.setValue(n.previousValue)}),n.onChange(function(){var a=d(n.lastValue,n.previousValue,o.previousValue,c);a instanceof i?a.then(function(a){a&&(n.previousValue=n.lastValue,n.setValue(n.lastValue))}):a===!0?(n.previousValue=n.lastValue,n.setValue(n.lastValue)):n.lastValue=n.previousValue});var o=m("55%",b);o.previousValue=b,o.onInput(function(){return f(o.getValue())?void(o.previousValue=o.getValue()):void o.setValue(o.previousValue)}),o.onChange(function(){g(n.previousValue,o.previousValue,c)});var p=new q;p.root.style.display="inline-block",p.root.style.padding="4px 4px",p.root.style["text-align"]="center",p.setBackground(j.warningRed),p.root.style.color=j.buttonFontColor,p.setWidth("15%"),p.root.style.margin="0px 4px";var r=new k("span");r.root.className="glyphicon glyphicon-trash",p.appendChild(r);var s=new k("div");s.root.style["white-space"]="normal",s.setWidth(this.maxWidth),s.root.style.padding="0px 8px",s.root.style.margin="8px 0px",s.appendChild(n),s.appendChild(o),s.appendChild(p),s.stepInput=n,s.valueInput=o,this.child.appendChild(s);var t=this;return p.click(function(){s.destroy(),t.items.splice(s.deleteFrom,3),h(n.previousValue,o.previousValue,c)}),s.deleteFrom=this.items.length,this.items.push(n),this.items.push(o),this.items.push(p),s},addButton:function(a,b){"function"==typeof a&&(b=a,a=!1);var c=new q;a&&c.setLabel(a),b&&"function"==typeof b&&c.click(b);var d=new k("div");return d.root.style["white-space"]="normal",d.setWidth(this.maxWidth),d.root.style.padding="0px 8px",d.root.style.margin="8px 0px",d.appendChild(c),c.root.style.padding="8px 0px",c.setBackground(j.buttonBackground),c.root.style.color=j.buttonFontColor,c.root.style["text-align"]="center",c.setWidth("100%"),this.child.appendChild(d),c.buttonContainer=d,this.items.push(c),c},addDropdown:function(a,b,c){var d=new o(b,c);return d.setLabel(a),d.root.style["white-space"]="normal",d.setWidth(this.maxWidth),d.root.style.padding="16px 16px",d.root.style["text-align"]="center",this.child.appendChild(d),this.items.push(d),d},addInput:function(a){var b=new l;return a&&b.setLabel(a),b.root.style["white-space"]="normal",b.setWidth(this.maxWidth),b.root.style.padding="16px 16px",b.root.style["text-align"]="center",this.child.appendChild(b),this.items.push(b),b},addSlider:function(a,b,c){"number"==typeof a&&(c=b,b=a,a=!1);var d=new m(b,c);return a&&d.setLabel(a),d.root.style["white-space"]="normal",d.setWidth(this.maxWidth),d.root.style.padding="16px 16px",d.root.style["text-align"]="center",this.child.appendChild(d),this.items.push(d),d},addLabel:function(a){var b=new k("div"),c=new k("div");return b.root.style["white-space"]="normal",b.root.style["text-align"]="center",b.root.style.padding="16px 16px",b.setWidth(this.maxWidth),c.setLabel(a),b.appendChild(c),this.child.appendChild(b),this.items.push(b),b},setLeft:function(a){this.child.setWidth(a)},setWidth:function(a){this.child,g.prototype.setWidth.call(this,a)},hide:function(){},setLabel:function(a){this.label.root.innerHTML=a},refresh:function(){this.items.forEach(function(a){a.refresh&&a.refresh()})},__proto__:g.prototype},b.exports=d},{"./button.js":"new_ui/lib/button.js","./checkbox.js":"new_ui/lib/checkbox.js","./colors.js":"new_ui/lib/colors.js","./dropdown.js":"new_ui/lib/dropdown.js","./element.js":"new_ui/lib/element.js","./foldable.js":"new_ui/lib/foldable.js","./icon_group.js":"new_ui/lib/icon_group.js","./input.js":"new_ui/lib/input.js","./slider.js":"new_ui/lib/slider.js","./v_foldable.js":"new_ui/lib/v_foldable.js",promise:46}],"new_ui/lib/sidebar.js":[function(a,b,c){"use strict";function d(a){this.maxWidth=a,this.foldable=new j(a),this.root=document.createElement("div"),this.appendChild(this.foldable),this.unfolded=0,this.setHeight("100%"),this.root.style.position="absolute",this.foldable.setBackground(g.sidebarBackground),this.foldable.setHeight("inherit"),this.foldable.root.style.overflow="hidden",this.children=[],this.foldButton=new i,this.appendChild(this.foldButton),this.foldButton.setHeight(g.sidebarFoldButtonSize),this.foldButton.setWidth(g.sidebarFoldButtonSize),this.foldButton.setBackground(g.sidebarFoldButtonBackground),this.foldButton.root.style.position="absolute",this.foldButton.root.style.top="0",this.foldButton.root.style.color=g.sidebarFoldButtonFontColor,this.foldButton.root.style["text-align"]="center",this.foldButton.root.style["padding-top"]=g.sidebarFoldButtonPaddingtop+"px",this.foldButton.root.style["font-size"]=g.sidebarFoldButtonFontSize;var b=new e("span");b.root.className="glyphicon glyphicon-plus",this.foldButton.appendChild(b);var c=this;this.foldButton.click(function(){c.foldable.folded?b.root.className="glyphicon glyphicon-minus":b.root.className="glyphicon glyphicon-plus",c.invert()})}var e=a("./element.js"),f=a("./foldable.js"),g=a("./colors.js"),h=a("./tween.js"),i=a("./button.js"),j=a("./menu.js"),k=h.easeOutCirc;d.prototype={addButton:function(a,b){var c=new i;c.root.style.display="inline-block",c.setHeight(this.foldable.buttonHeight),c.setWidth(this.foldable.buttonHeight),c.root.style["text-align"]="center",c.root.style["padding-top"]=g.menuButtonPaddingTop+"px";var d=new e("span");return d.root.className="glyphicon glyphicon-"+a,d.root.style["font-size"]=g.menuButtonIconSize,c.appendChild(d),this.foldable.addButton(c),b&&"function"==typeof b&&c.click(b),c},addItem:function(a){this.foldable.addItem(a),a.label.setWidth(this.maxWidth)},show:function(){this.currentTween&&this.currentTween.stop();var a=this.foldable.getWidth(),b=this.foldable.foldableWidth-a;this.foldable.invert();var c=this;this.currentTween=k(b,250,function(b){c.foldButton.setLeft(a+b)})},hide:function(){this.currentTween&&this.currentTween.stop();var a=this.foldable.getWidth(),b=a;this.foldable.invert();var c=this;this.currentTween=k(b,250,function(b){c.foldButton.setLeft(a-b)})},invert:function(){this.foldable.folded?this.show():this.hide()},__proto__:f.prototype},b.exports=d},{"./button.js":"new_ui/lib/button.js","./colors.js":"new_ui/lib/colors.js","./element.js":"new_ui/lib/element.js","./foldable.js":"new_ui/lib/foldable.js","./menu.js":"new_ui/lib/menu.js","./tween.js":"new_ui/lib/tween.js"}],"new_ui/lib/slider.js":[function(a,b,c){"use strict";function d(a,b){e.call(this),this.input.root.setAttribute("type","range"),this.input.root.style.display="inline-block",this.lowestValue=a||0,this.highestValue=b||10,this.input.root.setAttribute("min",this.lowestValue),this.input.root.setAttribute("max",this.highestValue),this.input.setWidth("60%"),this.minValueDiv=new f("div"),this.maxValueDiv=new f("div"),this.minValueDiv.root.style.display="inline-block",this.maxValueDiv.root.style.display="inline-block",this.minValueDiv.root.style["margin-top"]="2px",this.maxValueDiv.root.style["margin-top"]="2px",this.minValueDiv.root.style["float"]="left",this.maxValueDiv.root.style["float"]="right",this.minValueDiv.setWidth("20%"),this.maxValueDiv.setWidth("20%"),this.minValueDiv.setLabel(this.lowestValue),this.maxValueDiv.setLabel(this.highestValue),this.setValue(this.lowestValue+2);var c=this;this.onInput(function(a){c.minValueDiv.setLabel(c.input.root.value)}),this.inputDiv.root.insertBefore(this.minValueDiv.root,this.inputDiv.root.firstChild),this.inputDiv.appendChild(this.maxValueDiv);var d=new f("div");d.root.style.clear="both",this.inputDiv.appendChild(d)}var e=a("./input.js"),f=a("./element.js");d.prototype={setMax:function(a){if(a=parseInt(a),isNaN(a))throw new Error("Not a number given to setMax.");this.input.root.setAttribute("max",a),this.maxValueDiv.setLabel(a),this.getValue()>=a&&this.setValue(a)},setMin:function(a){if(a=parseInt(a),isNaN(a))throw new Error("Not a number given to setMin.");this.input.root.setAttribute("min",a),this.minValueDiv.setLabel(a),this.getValue()<=a&&this.setValue(a)},setValue:function(a){if(a=parseInt(a),isNaN(a))throw new Error("Value given is not a number");e.prototype.setValue.call(this,a),this.minValueDiv.setLabel(a)},__proto__:e.prototype},b.exports=d},{"./element.js":"new_ui/lib/element.js","./input.js":"new_ui/lib/input.js"}],"new_ui/lib/tween.js":[function(a,b,c){"use strict";function d(a,b,c,d,e){if(!f[a])throw new Error("Trying tweening with non existent tween");var g=f[a],h=1e3/60,i=Date.now();this.stopTween=!1;var j=this,k=function(){if(j.stopTween)return void(j.isDone=!0);var a=Date.now()-i;return d(g(a,0,b,c)),a>c?(j.isDone=!0,d(b),void(e&&e())):void setTimeout(k,h)};k()}function e(a,b,c,e){return new d("easeOutCirc",a,b,c,e)}var f={easeInQuad:function(a,b,c,d){return a/=d,c*a*a+b},easeOutCirc:function(a,b,c,d){return a/=d,a--,c*Math.sqrt(1-a*a)+b}};d.prototype={stop:function(){this.stopTween=!0}},b.exports={easeOutCirc:e}},{}],"new_ui/lib/v_foldable.js":[function(a,b,c){"use strict";function d(a,b){if(!a)throw new Error("Creating vertical foldable without height.");if("number"!=typeof a)throw new Error("Width given must be a number.");this.root=document.createElement("div"),this.setHeight(0),this.folded=!0,this.foldableHeight=a,this.children=[]}var e=(a("./element.js"),a("./foldable.js")),f=a("./tween.js"),g=f.easeOutCirc;d.prototype={fold:function(a){this.children.forEach(function(a){a instanceof e&&a.fold()}),this.currentTween&&this.currentTween.stop();var b=this.getHeight(),c=b;this.root.style["overflow-y"]="hidden";var d=this;this.currentTween=g(c,250,function(a){d.setHeight(b-a)},a),this.folded=!0},unfold:function(a){this.children.forEach(function(a){a instanceof e&&a.unfold()}),this.currentTween&&this.currentTween.stop();var b=this.getHeight(),c=this.foldableHeight-b,d=this;this.currentTween=g(c,250,function(a){d.setHeight(b+a)},function(b){d.root.style["overflow-y"]="auto",a&&a(b)}),this.folded=!1},invert:function(a){this.folded?this.unfold(a):this.fold(a)},__proto__:e.prototype},b.exports=d},{"./element.js":"new_ui/lib/element.js","./foldable.js":"new_ui/lib/foldable.js","./tween.js":"new_ui/lib/tween.js"}],"new_ui/new_ui.js":[function(a,b,c){"use strict";b.exports={Button:a("./lib/button.js"),Colors:a("./lib/colors.js"),Element:a("./lib/element.js"),Foldable:a("./lib/foldable.js"),IconGroup:a("./lib/icon_group.js"),Input:a("./lib/input.js"),Menu:a("./lib/menu.js"),MenuItem:a("./lib/menu_item.js"),Sidebar:a("./lib/sidebar.js"),Slider:a("./lib/slider.js"),Tween:a("./lib/tween.js")}},{"./lib/button.js":"new_ui/lib/button.js","./lib/colors.js":"new_ui/lib/colors.js","./lib/element.js":"new_ui/lib/element.js","./lib/foldable.js":"new_ui/lib/foldable.js","./lib/icon_group.js":"new_ui/lib/icon_group.js","./lib/input.js":"new_ui/lib/input.js","./lib/menu.js":"new_ui/lib/menu.js","./lib/menu_item.js":"new_ui/lib/menu_item.js","./lib/sidebar.js":"new_ui/lib/sidebar.js","./lib/slider.js":"new_ui/lib/slider.js","./lib/tween.js":"new_ui/lib/tween.js"}],"new_ui/package.json":[function(a,b,c){b.exports={main:"./new_ui.js",name:"new_ui"}},{}],"node/node.js":[function(a,b,c){"use strict";b.exports={}},{}],"node/package.json":[function(a,b,c){b.exports={name:"sense4us-node",main:"./node.js"}},{}],"notification_bar/notification_bar.js":[function(a,b,c){"use strict";var d=a("./popup.js");b.exports={notify:function(a,b,c){if(null===a)return!1;var e=new d(b);a.appendChild(e.element),setTimeout(function(){e.fadeOut(function(){a.removeChild(e.element)})},c||4e3)}}},{"./popup.js":"notification_bar/popup.js"}],"notification_bar/package.json":[function(a,b,c){b.exports={name:"s4u_notification_bar",main:"./notification_bar.js"}},{}],"notification_bar/popup.js":[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))throw new Error("Accessing Popup as a generic method.");if(!a||"string"!=typeof a)throw new Error("Popup constructor parameters given are invalid.");this.element=document.createElement("div"),this.element.innerHTML=a,this.text=a,this.element.className="fade-in"}d.prototype={fadeOut:function(a){this.element.className="fade-out",setTimeout(function(){a()},1e3)}},b.exports=d},{}],"object-helper.js":[function(a,b,c){"use strict";function d(a,b){for(var c=Object.keys(this),d=c.length,e=0;d>e;e++){var f=c[e];if(a.call(b,this[f],f,e,c)===!1)break}}function e(a){var b={},c=this;return Object.keys(this).forEach(function(d,e,f){a(c[d],d,e,f)&&(b[d]=c[d])}),b}function f(a){var b=[];return a.forEach(function(a){Array.isArray(a)?b.push(f(a)):"object"==typeof a?b.push(g.call(a.copy)):b.push(a)}),b}function g(a){var b={},c=a||[this];return Object.keys(this).forEach(function(a){var d=this[a];if(Array.isArray(d))b[a]=f(d);else if("object"==typeof d&&d){if(-1!==c.indexOf(d))throw new Error("Circular structure.");var e=c.length;c.push(d),b[a]=g.call(d,c),c.unshift(e,1)}else b[a]=d},this),b}function h(){return Object.keys(this).length}function i(a){var b={},c=this;return Object.keys(this).forEach(function(d,e,f){b[d]=a(c[d],d,e,f)}),b}function j(){var a={},b=this;Object.keys(this).forEach(function(c){a[c]=b[c]});for(var c=0;c<arguments.length;c++){if("object"!=typeof arguments[c])return;var d=arguments[c];Object.keys(d).forEach(function(b){a[b]=d[b]})}return a}function k(a,b){var c={},d=this,e=Object.keys(this).slice(a,b);return e.forEach(function(a){c[a]=d[a]}),c}function l(){var a=Object.keys(this),b=a.length;return 0!==b?this[a[0]]:void 0}function m(){var a=Object.keys(this),b=a.length;return 0!==b?this[a[a.length-1]]:void 0}function n(){var a=Object.keys(this),b=a.length;return 0!==b?a[a.length-1]:void 0}b.exports={filter:e,slice:k,first:l,last:m,size:h,lastKey:n,merge:j,map:i,forEach:d,copy:g}},{}],"refresh.js":[function(a,b,c){"use strict";function d(a,b,c,d,e){a.clearRect(-c.settings.offsetX,-c.settings.offsetY,b.width,b.height),a.setTransform(c.settings.scaleX||1,0,0,c.settings.scaleY||1,c.settings.offsetX||0,c.settings.offsetY||0),e()}function e(a,b,c,d,e){n.forEach.call(c.nodeData,function(b){var d=n.merge.call(b,c.nodeGui[b.id]);c.settings.linegraph||(d.linegraph=!1),d.url=c.CONFIG.url,o(a,d)}),e()}function f(a,b,c,d,e){var f={};n.forEach.call(c.links,function(b){var d=c.nodeData[b.node1];if("ACTOR"===d.type.toUpperCase()){f[b.node2]||(f[b.node2]=0),f[b.node2]+=1;var e=f[b.node2];u(a,e,b,c)}else r(a,l(b,c.nodeGui))}),e()}function g(a,b,c,d,e){n.forEach.call(c.nodeData,function(b){var d=n.merge.call(b,c.nodeGui[b.id]);t(a,d.name,d.x,d.y+d.radius+4,m.neutral,!0),c["static"].showSimulate&&(c.loadedScenario&&c.loadedScenario.data[d.id]?p(a,d,c.loadedScenario.data[d.id]):"ACTOR"!==d.type.toUpperCase()&&s(a,d.x,d.y+d.radius/6,d.radius,Math.round(100*b.simulateChange[c.loadedScenario.timeStepN])/100))}),e()}function h(a,b,c,d,e){var f=n.filter.call(c.nodeGui,function(a){return a.selected===!0&&a.linking!==!0});n.forEach.call(f,function(b){q(a,k,b)}),e()}function i(a,b,c,d,e){var f=n.filter.call(c.nodeGui,function(a){return a.linking===!0});n.forEach.call(f,function(b){k(b);r(a,{type:"fullchannel",x1:b.x,y1:b.y,x2:b.linkerX,y2:b.linkerY,fromRadius:b.radius,targetRadius:0,width:8})}),f=n.filter.call(c.nodeGui,function(a){return a.linking===!0}),n.forEach.call(f,function(b){q(a,k,b)}),e()}var j=a("./curry"),k=a("./linker.js"),l=a("./aggregated_link.js"),m=a("./graphics/value_colors.js"),n=a("./object-helper.js"),o=a("./graphics/draw_node.js"),p=a("./graphics/draw_time_table.js"),q=(j(a("./selected_menu").drawSelectedMenu,document.getElementById("sidebar")),a("./graphics/draw_linker.js")),r=a("./graphics/draw_link.js"),s=a("./graphics/draw_change.js"),t=a("./graphics/draw_text.js"),u=a("./graphics/draw_actor.js");a("./selected_menu").updateSelected;b.exports={clearCanvasAndTransform:d,drawNodes:e,drawLinks:f,drawNodeDescriptions:g,_drawLinker:h,drawLinkingLine:i}},{"./aggregated_link.js":"aggregated_link.js","./curry":"curry.js","./graphics/draw_actor.js":"graphics/draw_actor.js","./graphics/draw_change.js":"graphics/draw_change.js","./graphics/draw_link.js":"graphics/draw_link.js","./graphics/draw_linker.js":"graphics/draw_linker.js","./graphics/draw_node.js":"graphics/draw_node.js","./graphics/draw_text.js":"graphics/draw_text.js","./graphics/draw_time_table.js":"graphics/draw_time_table.js","./graphics/value_colors.js":"graphics/value_colors.js","./linker.js":"linker.js","./object-helper.js":"object-helper.js","./selected_menu":"selected_menu/selected_menu.js"}],"scenario/package.json":[function(a,b,c){b.exports={name:"scenario",main:"./scenario_index.js"}},{}],"scenario/scenario.js":[function(a,b,c){"use strict";function d(a,b){this.id=a.generateId(),this.syncId=b,this.name="New scenario",this.data={},this.measurement="Week",this.measurementAmount=1,this.maxIterations=4,this.timeStepN=0}a("./../floating_window/floating_window.js"),a("./../menu_builder"),a("./../object-helper.js"),a("./../structures/timetable.js");b.exports=d},{"./../floating_window/floating_window.js":"floating_window/floating_window.js","./../menu_builder":"menu_builder/menu_builder.js","./../object-helper.js":"object-helper.js","./../structures/timetable.js":"structures/timetable.js"}],"scenario/scenario_editor.js":[function(a,b,c){"use strict";function d(a,b,c){this.loadedModel=a,this.floatingWindow=new e(b||20,c||20,440,400,"mb-scenario-editor"),this.floatingWindow.killButton.removeEventListener("click",this.floatingWindow.killCallback);var d=this;this.floatingWindow.killButton.killCallback=function(){d.destroyWindow()},this.floatingWindow.killButton.addEventListener("click",this.floatingWindow.killCallback),this.container=this.floatingWindow.container,this.body=this.floatingWindow.body,this.scenarios=a.scenarios,this.currentScenario=void 0,this.options=f.div("options"),this.options.style.height="40px",this.selectedIndex=0,this.scenarioContainer=f.div("table-container"),this.scenarioContainer.style.height="360px",this.body.appendChild(this.options),this.body.appendChild(this.scenarioContainer),this.loadedModel.floatingWindows.push(this),this.generateOptions(),document.body.appendChild(this.container)}var e=a("./../floating_window/floating_window.js"),f=a("./../menu_builder"),g=a("./scenario.js"),h=a("./../object-helper.js");d.prototype={destroyWindow:function(){this.floatingWindow.destroyWindow(),this.container=null,this.body=null,this.deleteScenario.deleteEvents(),this.newScenario.deleteEvents(),this.scenarioDropdown.deleteEvents(),this.deleteScenario=null,this.newScenario=null,this.scenarioDropdown=null;var a=this.loadedModel.floatingWindows.indexOf(this);-1!==a&&this.loadedModel.floatingWindows.splice(a,1)},createWindow:function(){this.floatingWindow.createWindow(),this.container=this.floatingWindow.container,this.body=this.floatingWindow.body,this.options=f.div("options"),this.options.style.height="40px",this.scenarioContainer=f.div("table-container"),this.scenarioContainer.style.height="360px",
this.body.appendChild(this.options),this.body.appendChild(this.scenarioContainer),this.generateOptions(),document.body.appendChild(this.container)},generateOptions:function(){var a=this;if(this.scenarioDropdown=f.select("text",function(){var b=parseInt(this.value);a.scenarios[b]&&(a.setScenario(a.scenarios[b]),a.selectedIndex=b,a.loadedModel.floatingWindows.forEach(function(a){a.refresh()}))}),this.deleteScenario=f.button("Delete scenario",function(){}),this.newScenario=f.button("New scenario",function(){var b=new g(a.loadedModel);b.setName(h.size.call(a.scenarios)+": New scenario"),a.setScenario(b),a.scenarios[b.id]=b;var c=f.option(b.id,b.name);a.scenarioDropdown.appendChild(c);var d=a.scenarioDropdown.options.length-1;a.scenarioDropdown.options[d].selected=!0,a.selectedIndex=d,a.loadedModel.floatingWindows.forEach(function(a){a.refresh()})}),this.scenarioDropdown.className="scenario-select",this.deleteScenario.className="scenario-delete",this.newScenario.className="scenario-new",this.options.appendChild(this.scenarioDropdown),this.options.appendChild(this.deleteScenario),this.options.appendChild(this.newScenario),h.forEach.call(this.loadedModel.scenarios,function(a){var b=f.option(a.id,a.name);a.id===this.currentScenario&&(b.selected=!0),this.scenarioDropdown.appendChild(b)},this),0===h.size.call(this.loadedModel.scenarios)){var b=new g(this.loadedModel);b.setName(this.scenarios.size()+": New scenario"),this.setScenario(b),this.scenarios.push(b);var c=f.option(a.loadedModel.scenarios.length-1,b.name);this.scenarioDropdown.appendChild(c),this.selectedIndex=0}else this.setScenario(this.loadedModel.loadedScenario),this.loadedModel.loadedScenario.refresh(this.loadedModel)},setScenario:function(a){for(this.currentScenario=a,this.loadedModel.loadedScenario=a;this.scenarioContainer.firstChild;)this.scenarioContainer.removeChild(this.scenarioContainer.firstChild);this.scenarioContainer.appendChild(this.currentScenario.container)},refresh:function(){this.hidden||(null===this.container&&null===this.body&&this.createWindow(),this.currentScenario.refresh(this.loadedModel))}},b.exports=d},{"./../floating_window/floating_window.js":"floating_window/floating_window.js","./../menu_builder":"menu_builder/menu_builder.js","./../object-helper.js":"object-helper.js","./scenario.js":"scenario/scenario.js"}],"scenario/scenario_index.js":[function(a,b,c){"use strict";b.exports={Scenario:a("./scenario.js"),ScenarioEditor:a("./scenario_editor.js")}},{"./scenario.js":"scenario/scenario.js","./scenario_editor.js":"scenario/scenario_editor.js"}],"selected_menu/buttons.js":[function(a,b,c){"use strict";a("./../object-helper");b.exports=[{header:"Delete selected",ignoreModelSettings:!0,replacingObj:!0,callback:function(a,b){a.emit("deleteSelected")}}]},{"./../object-helper":"object-helper.js"}],"selected_menu/package.json":[function(a,b,c){b.exports={name:"s4u_selected_menu",main:"./selected_menu.js"}},{}],"selected_menu/selected_menu.js":[function(a,b,c){"use strict";function d(){return Math.round(255*Math.random()).toString(16)}function e(){return"#"+d()+d()+d()}function f(a,b,c,d){var e=k.div(),f=k.img();return e.className="avatarPreview",c===b.src&&(e.className+=" selected"),f.src=a+"/"+b.src,e.value=b.src,e.name=b.header||d,e.appendChild(f),e}function g(a,b,c,d,e){var g=k.div();return g.className="avatars",e.forEach(function(e){var h=f(a,e,c,b);k.addValueCallback(h,d,"click"),g.appendChild(h)}),g.deleteEvents=function(){for(var a=0;a<g.children.length;a++){var b=g.children[a];b.deleteEvents()}},g}function h(a,b,c){var d=k.div();return d.appendChild(k.label(a)),l.avatars.forEach(function(e){var f=g(a,b,function(a,b){var d=f.querySelectorAll(".selected")[0];d&&(d.className="avatarPreview");var e=f.querySelectorAll('[src="'+b+'"]')[0].parentElement;e.className="avatarPreview selected",c(a,b)},e.images);d.appendChild(k.label(e.header)),d.appendChild(f)}),d}function i(a,b,c){this.data=c,this.container=k.div("menu"),this.filter=b,this.loadedModel=a,this.timetable,this.timetableDiv,this.rowContainer,this.rows={},this.dropdowns={},this.inputs={}}function j(a){this.dataObjects=[],this.data=[],this.container=k.div(),this.inputs={},this.loadedModel=a,this.buttons}var k=a("./../menu_builder"),l=a("./../settings"),m=a("./buttons.js"),n=a("./../object-helper.js"),o=a("./../structures/timetable.js");i.prototype={refresh:function(){this.inputs.forEach(function(a,b){a.value=this.data[b]})},updateFilter:function(a){this.filter=a,this.createMenu()},deleteEvents:function(){n.forEach.call(this.rows,function(a,b){a.stepInput.deleteEvents(),a.valueInput.deleteEvents()}),n.forEach.call(this.dropdowns,function(a){a.deleteEvents()}),n.forEach.call(this.inputs,function(a){a.deleteEvents()})},refreshTimeTable:function(){this.timetable.refreshTimeTable()},generateDropdown:function(a,b,c){var d=this,e=k.select(a,function(b){d.data[a]=this.value,d.loadedModel.emit("refresh")});return b.forEach(function(a){var b=k.option(a,a);a===c&&(b.selected="selected"),e.appendChild(b)}),e},generateInput:function(a,b){var c=k.div(),d=this;return c.appendChild(k.label(a)),this.inputs[a]=k.input(a,b,function(a,b){d.data[a]=b,d.loadedModel.emit(null,"refresh","resetUI")}),c.appendChild(this.inputs[a]),c},createMenu:function(){for(var a=this.container;a.firstChild;)a.removeChild(a.firstChild);var b=this;if(this.data.type&&"ACTOR"===this.data.type.toUpperCase()){var c=k.button("Randomize color",function(){b.loadedModel.nodeGui[b.data.id].color=e(),b.loadedModel.emit("refresh")});a.appendChild(c);var d=this.loadedModel.nodeGui[this.data.id].links;d||(d=[]),d.forEach(function(c){if(c=this.loadedModel.links[c]){var d=this.loadedModel.nodeData[c.node2],e=k.button("Delete acting upon "+d.name,function(){delete b.loadedModel.links[c.id];var a=b.loadedModel.nodeGui[c.node1].links,d=a.indexOf(c.id);-1!==d&&a.splice(d,1),a=b.loadedModel.nodeGui[c.node2].links,d=a.indexOf(c.id),-1!==d&&a.splice(d,1),b.loadedModel.emit(null,"refresh","resetUI")});a.appendChild(e)}},this)}return n.forEach.call(this.data,function(c,d){if(-1!==this.filter.indexOf(d))if("timeTable"===d){var e=new o(this.data,function(a,c){b.loadedModel.emit(null,"refresh","resetUI")},this.loadedModel.loadedScenario.data[this.data.id].data);e.generateTimeTable(),this.timetable=e,this.timetableDiv=e.timeTableDiv,a.appendChild(this.timetableDiv)}else void 0!==this.data.coefficient&&"type"===d?a.appendChild(this.generateDropdown(d,["fullchannel","halfchannel"],c)):a.appendChild(this.generateInput(d,c))},this),a}},j.prototype={show:function(){this.container.style.display="block"},hide:function(){this.container.style.display="none"},refresh:function(){this.data.forEach(function(a){a.refresh()})},updateFilter:function(a){this.data.forEach(function(b){b.updateFilter(a)})},loopData:function(a,b){this.data.forEach(function(b,c){a.call(this,b,c)},b)},addData:function(a,b){return-1!==this.dataObjects.indexOf(b)?(console.warn("Exists"),void console.warn(this.dataObjects,b)):(this.dataObjects.push(b),this.data.push(new i(this.loadedModel,a,b)),this.buttons||(this.buttons=this.generateButtons(m),this.container.appendChild(this.buttons)),void this.container.appendChild(this.data[this.data.length-1].createMenu()))},removeData:function(a){var b=0;if(this.dataObjects=this.dataObjects.filter(function(c,d){return c===a?(b=d,!1):!0}),this.data[b]){this.data[b].deleteEvents();var c=this.data[b].container;this.container.removeChild(c),this.data=this.data.slice(0,b).concat(this.data.slice(b+1)),0===this.data.length&&0===this.dataObjects.length&&this.container.parentElement.removeChild(this.container)}},setDataFilter:function(a){this.dataFilter=a},generateButtons:function(a){var b=k.div();b.className="menu";var c=!1;this.data.forEach(function(a){a.data.maxIterations&&(c=!0)});var d=this;return a.forEach(function(a){c&&a.ignoreModelSettings===!0||a.replacingObj&&b.appendChild(k.button(a.header,function(){a.callback(d.loadedModel,d.data)}))},this),b}};var p={Data:i,SelectedMenu:j,createAvatarSelector:h,createAvatarButtons:g};b.exports=p},{"./../menu_builder":"menu_builder/menu_builder.js","./../object-helper.js":"object-helper.js","./../settings":"settings/settings.js","./../structures/timetable.js":"structures/timetable.js","./buttons.js":"selected_menu/buttons.js"}],"settings/menu.js":[function(a,b,c){"use strict";function d(a,b){var c=this;c.resetOptions(),c.addOption("modelling","Modelling"),c.addOption("simulate","Simulate"),c.refreshList()}function e(a,b){var c=this.value;switch(this.parent.toggle(),c){case"modelling":a.sidebar=h,a.environment="modelling";break;case"simulate":a.sidebar=i,a.environment="simulate"}a.selected||(a.selected=a.settings),a.emit(null,"refresh","resetUI")}function f(b,c){var d=this;d.resetOptions(),d.addOption("new","New Model"),d.addOption("save","Save Current"),d.addOption("delete","Delete Current"),k=a("./../model_layer.js"),k.getAllModels(b).then(function(a){l.forEach.call(c.local,function(a){d.addOption(a.id,a.settings.name)}),a.forEach(function(a){c.synced[a.id]||(c.synced[a.id]=a.name)}),l.forEach.call(c.synced,function(a,b){"string"==typeof a?d.addOption(b,a):d.addOption(a.syncId,a.settings.name)}),d.refreshList()},function(a,b){l.forEach.call(c.local,function(a){console.log(a),d.addOption(a.id,a.settings.name)}),l.forEach.call(c.synced,function(a,b){"string"==typeof a?d.addOption(b,a):d.addOption(a.syncId,a.settings.name)}),d.refreshList()})}function g(a,b){var c=this.value;if(void 0!==c){switch("number"==typeof c&&(c=""+c),this.parent.toggle(),c.toUpperCase()){case"NEW":a.emit("storeModel"),a.emit([a.id,a.syncId],"preNewModel"),a.emit("newModel");break;case"SAVE":a.emit([a.id,a.syncId],"preSaveModel"),a.emit([a.id,a.syncId],"saveModel");break;case"DELETE":a.emit([a.id,a.syncId],"deleteModel");break;default:a.emit("storeModel"),a.emit(c,"loadModel")}return a}}var h=a("./modelling.js"),i=a("./simulate.js"),j=a("./windows.js"),k=a("./../model_layer.js"),l=a("./../object-helper.js"),m=[{header:"Project",type:"DROPDOWN",update:f,callback:g},{header:"Mode",type:"DROPDOWN",update:d,callback:e},j];b.exports=m},{"./../model_layer.js":"model_layer.js","./../object-helper.js":"object-helper.js","./modelling.js":"settings/modelling.js","./simulate.js":"settings/simulate.js","./windows.js":"settings/windows.js"}],"settings/modelling.js":[function(a,b,c){"use strict";var d=a("../structures/create_node"),e=a("../structures/create_origin"),f=a("../structures/create_actor"),g=[{header:"Actor",callback:f,type:"LIST",images:[{src:"img/avatars/executive_actor.png",header:"Executive actor"},{src:"img/avatars/legislative_actor.png",header:"Legislative actor"},{src:"img/avatars/unofficial_actor.png",header:"Unofficial actor"}]},{header:"Policy Instrument",callback:e,type:"LIST",images:[{src:"img/avatars/instrument_financial.png",header:"Financial instrument"},{src:"img/avatars/instrument_fiscal.png",header:"Fiscal instrument"},{src:"img/avatars/instrument_market.png",header:"Market instrument"},{src:"img/avatars/instrument_regulatory.png",header:"Regulatory instrument"},{src:"img/avatars/instrument_informational.png",header:"Informational instrument"},{src:"img/avatars/instrument_capacitybuilding.png",header:"Capacity-building instrument"},{src:"img/avatars/instrument_cooperation.png",header:"Cooperation instrument"}]},{header:"External Factor",callback:e,type:"LIST",images:[{src:"img/avatars/barriers_and_forces.png",header:"Drivers and barriers"},{src:"img/avatars/constraints.png",header:"External factors and constraints"},{src:"img/avatars/social_change.png",header:"Social, demographic, and behavioural change"}]},{header:"Policy Impact",callback:d,type:"LIST",images:[{src:"img/avatars/Impact_node1.png",header:"Impact of change"},{src:"img/avatars/Impact_node2.png",header:"Impact of change"},{src:"img/avatars/Impact_node3.png",header:"Impact of change"},{src:"img/avatars/Impact_node4.png",header:"Impact of change"},{src:"img/avatars/Impact_node5.png",header:"Impact of change"},{src:"img/avatars/Impact_node6.png",header:"Impact of change"},{src:"img/avatars/Impact_node7.png",header:"Impact of change"},{src:"img/avatars/Impact_node8.png",header:"Impact of change"},{src:"img/avatars/Impact_node9.png",header:"Impact of change"},{src:"img/avatars/Impact_node10.png",header:"Impact of change"},{src:"img/avatars/Impact_node11.png",header:"Impact of change"},{src:"img/avatars/Impact_node12.png",header:"Impact of change"}]}];b.exports=g},{"../structures/create_actor":"structures/create_actor.js","../structures/create_node":"structures/create_node.js","../structures/create_origin":"structures/create_origin.js"}],"settings/package.json":[function(a,b,c){b.exports={name:"s4u_settings",main:"./settings.js"}},{}],"settings/settings.js":[function(a,b,c){"use strict";var d=a("./modelling.js"),e=a("./menu.js"),f={avatars:[{header:"Policy Instruments",type:"actor",images:[{src:"img/avatars/barriers_and_forces.png"},{src:"img/avatars/instrument_financial.png"},{src:"img/avatars/instrument_regulatory.png"},{src:"img/avatars/constraints.png"},{src:"img/avatars/instrument_fiscal.png"},{src:"img/avatars/social_change.png"},{src:"img/avatars/instrument_capacitybuilding.png"},{src:"img/avatars/instrument_informational.png"},{src:"img/avatars/instrument_cooperation.png"},{src:"img/avatars/instrument_market.png"}]},{header:"Controlling actors",type:"origin",images:[{src:"img/avatars/barriers_and_forces.png"},{src:"img/avatars/instrument_financial.png"},{src:"img/avatars/instrument_regulatory.png"},{src:"img/avatars/constraints.png"},{src:"img/avatars/instrument_fiscal.png"},{src:"img/avatars/social_change.png"},{src:"img/avatars/instrument_capacitybuilding.png"},{src:"img/avatars/instrument_informational.png"},{src:"img/avatars/instrument_cooperation.png"},{src:"img/avatars/instrument_market.png"}]}],sidebar:d,menu:e};b.exports=f},{"./menu.js":"settings/menu.js","./modelling.js":"settings/modelling.js"}],"settings/simulate.js":[function(a,b,c){"use strict";var d=a("./../network"),e=a("./../breakout.js"),f=a("./../object-helper.js"),g=[{header:"Simulate",type:"BUTTON",ajax:!0,callback:function(a){var b={timestep:a.loadedScenario.maxIterations,nodes:e.nodes(a),links:e.links(a),scenario:a.loadedScenario};f.forEach.call(a.nodeData,function(a){a.simulateChange=[]}),console.log(b),d(a.CONFIG.url,"/models/"+a.CONFIG.userFilter+"/"+a.CONFIG.projectFilter+"/simulate",b,function(b,c){if(c)return console.error(c),console.error(b),void a.emit(b.response.message,"notification");console.log(b.response);var d=b.response,e=a.nodeData;d.forEach(function(a){a.forEach(function(a){var b=e[a.id];b.simulateChange.push(a.relativeChange)})}),a.settings=a.settings,a.emit(null,"settings","refresh")})}},{header:"Linegraph",type:"CHECKBOX",ajax:!0,onCheck:function(a){var b=a.settings;b.linegraph=!0,a.emit("refresh")},onUncheck:function(a){var b=a.settings;b.linegraph=!1,a.emit("refresh")}},{header:"Show simulate changes",type:"CHECKBOX",onCheck:function(a){a["static"].showSimulate=!0,a.emit("refresh")},onUncheck:function(a){a["static"].showSimulate=!1,a.emit("refresh")}},{header:"Time step T",type:"DROPDOWN",values:["Week","Month","Year"],defaultValue:function(a,b){return a.loadedScenario.measurement},onChange:function(a,b){a.loadedScenario.measurement=b}},{header:"Time step N",type:"SLIDER",id:"timestep",defaultValue:function(a){return a.loadedScenario.timeStepN},range:function(a){return[0,a.loadedScenario.maxIterations]},onSlide:function(a,b){a.loadedScenario.timeStepN=parseInt(b),a.emit("refresh")},onChange:function(a,b){a.loadedScenario.timeStepN=parseInt(b)}},{header:"Max iterations",type:"INPUT",id:"iterations",defaultValue:function(a){return a.loadedScenario.maxIterations},onChange:function(a,b){a.loadedScenario.maxIterations=parseInt(b)}}];b.exports=g},{"./../breakout.js":"breakout.js","./../network":"network/network.js","./../object-helper.js":"object-helper.js"}],"settings/windows.js":[function(a,b,c){"use strict";function d(a,b){var c=this;c.resetOptions(),c.addOption("scenario","Scenario Editor"),c.refreshList()}function e(a,b){var c=this.value;this.parent.toggle(),a.emit(c,"newWindow")}a("./../scenario").ScenarioEditor;b.exports={header:"Windows",type:"DROPDOWN",update:d,callback:e}},{"./../scenario":"scenario/scenario_index.js"}],"strict_curry.js":[function(a,b,c){"use strict";function d(a){var b=Array.prototype.splice.call(arguments,1);return function(){var c=Array.prototype.splice.call(arguments,0),d=b.concat(c);return a.apply(this,d)}}b.exports=d},{}],"structures/create_actor.js":[function(a,b,c){"use strict";function d(){var a=Math.round(255*Math.random()).toString(16);return 1===a.length&&(a="0"+a),a}function e(){return"#"+d()+d()+d()}var f=a("./create_node");b.exports=function(a,b,c){return c.color=e(),f(a,b,c,"actor")}},{"./create_node":"structures/create_node.js"}],"structures/create_link.js":[function(a,b,c){"use strict";b.exports=function(a,b,c,d){return{id:a.generateId(),node1:b,node2:c,coefficient:1,type:d||"fullchannel",timelag:0,threshold:0,width:8,bidirectional:!1,bidirectionalTimelag:0,objectId:"link"}}},{}],"structures/create_node.js":[function(a,b,c){"use strict";var d=a("./../object-helper.js");b.exports=function(a,b,c,e){var f=a.generateId(),g={syncId:!1,value:0,simulateChange:[],type:e||"intermediate",initialValue:0,measurementUnit:"",description:"",baseline:0,objectId:"nodeData"},h=600,i=100,j=c?c.radius||45:45,k=a.settings.offsetX,l=(a.settings.offsetY,a["static"].width||-1);a["static"].height||-1;d.forEach.call(a.nodeGui,function(a){a.x<Math.abs(k)||a.x>l+Math.abs(k)||a.x>h&&(h=a.x)}),h+=j;var m={x:h,y:i,radius:j,links:[],color:"",objectId:"nodeGui"};return void 0!==b&&(g=d.merge.call(g,b)),void 0!==c&&(m=d.merge.call(m,c)),g.id=f,m.id=f,a.history.push({action:"newNode",data:{data:g,gui:m}}),a.revertedHistory=[],a.nodeData[f]=g,a.nodeGui[f]=m,a.emit(null,"resetUI","refresh"),a.emit([f,g,m],"newNode"),a}},{"./../object-helper.js":"object-helper.js"}],"structures/create_origin.js":[function(a,b,c){"use strict";var d=a("./create_node");b.exports=function(a,b,c){return b||(b={}),d(a,b,c,"origin")}},{"./create_node":"structures/create_node.js"}],"structures/timetable.js":[function(a,b,c){"use strict";function d(a,b,c,d){this.id=++g,this.syncId=!1,this.node=a,c?this.data=c:this.data=f.copy.call(a),this.data.id=g,this.node.timeTable=this.data.timeTable,this.header=a.name,this.onChange=b,this.container=e.div("menu"),this.timeTable=this.data.timeTable,this.timeTableDiv,this.rowContainer,this.rows={},this.dropdowns={},this.inputs={}}var e=a("./../menu_builder"),f=a("./../object-helper.js"),g=-1;d.prototype={setTimeStep:function(a,b,c){return void 0!==this.timeTable[c]?a.value=b:(this.timeTable[c]=this.timeTable[b],delete this.timeTable[b],this.rows[c]=this.rows[b],delete this.rows[b],a.value=c,this.refreshTimeTable(),void this.onChange(c,this.timeTable[c]))},setTimeValue:function(a,b,c){return c=Number(c),isNaN(c)?void(a.value=this.timeTable[b]):(this.timeTable[b]=c,a.value=c,this.node.timeTable[b]=c,void this.onChange(b,c))},addTimeRow:function(a,b){this.timeTable||(this.timeTable={});var c=this.timeTableDiv;if(!c){var c=e.div();c.className="mb-time-table",c.appendChild(e.label(key)),this.timeTableDiv=c}var d=this.rowContainer;d||(d=e.div("row-container"),this.rowContainer=d,c.appendChild(d));var f=this,g=e.div("time-row");this.rows[a]=g;var h=e.span("T");h.className="time-label";var i=e.input("time-step",a,function(b,c){f.setTimeStep(i,a,c)});i.className="time-step";var j=e.span("C");j.className="time-label";var k=e.input("time-value",b,function(b,c){f.setTimeValue(k,a,c)});k.className="time-value",g.appendChild(h),g.appendChild(i),g.appendChild(j),g.appendChild(k);var l=e.span("%");l.className="time-label",g.appendChild(l),g.stepInput=i,g.valueInput=k,d.appendChild(g),this.node.timeTable[a]=b},removeTimeRow:function(){var a=f.size.call(this.timeTable);if(void 0!==this.timeTable&&null!==this.timeTable&&0!==a){var b=f.lastKey.call(this.timeTable);delete this.timeTable[b];var c=f.last.call(this.rows);this.rowContainer.removeChild(c),delete this.rows[f.lastKey.call(this.rows)],this.onChange()}},refreshTimeTable:function(){if(this.rowContainer){for(;this.rowContainer.firstChild;)this.rowContainer.removeChild(this.rowContainer.firstChild);f.forEach.call(this.rows,function(a,b){a.stepInput.deleteEvents(),a.valueInput.deleteEvents()}),this.rows={},f.forEach.call(this.timeTable,function(a,b){this.addTimeRow(b,a),this.node.timeTable[b]=a},this)}},destroyTimeTable:function(){if(this.rowContainer){for(;this.rowContainer.firstChild;)this.rowContainer.removeChild(this.rowContainer.firstChild);f.forEach.call(this.rows,function(a,b){a.stepInput.deleteEvents(),a.valueInput.deleteEvents()}),this.rows={}}},generateTimeTable:function(){var a=this.timeTableDiv;if(a){for(;this.timeTableDiv.firstChild;)this.timeTableDiv.removeChild(this.timeTableDiv.firstChild);this.timeTableDiv.appendChild(e.label(this.node.name||"TimeTable")),f.forEach.call(this.rows,function(a,b){a.stepInput.deleteEvents(),a.valueInput.deleteEvents()}),this.rows={},this.rowContainer=null}else{var a=e.div();a.className="mb-time-table",a.appendChild(e.label(this.node.name||"TimeTable")),this.timeTableDiv=a}var b=this.rowContainer;b||(b=e.div("row-container"),this.rowContainer=b,a.appendChild(b)),this.timeTable||(this.timeTable={}),this.node.timeTable=this.timeTable,f.forEach.call(this.timeTable,function(a,b){this.addTimeRow(b,a)},this);var c=this;return a.appendChild(e.button("Add row",function(){if(void 0===c.timeTable||null===c.timeTable)c.addTimeRow(0,0);else{var a=-1;f.forEach.call(c.timeTable,function(b,c){var d;!isNaN(d=parseInt(c))&&d>a&&(a=d)});var b=-1===a?0:a+1,d=0;c.timeTable[b]=d,c.addTimeRow(b,d),c.onChange()}})),a.appendChild(e.button("Remove row",function(){c.removeTimeRow()})),a}},b.exports=d},{"./../menu_builder":"menu_builder/menu_builder.js","./../object-helper.js":"object-helper.js"}],"ui/package.json":[function(a,b,c){b.exports={name:"s4u_ui",main:"./ui.js"}},{}],"ui/sidebar.js":[function(a,b,c){"use strict";function d(a,b){this.container=f.div("menu"),this.data=a,this.loadedModel=b,this.lists=[],this.buttons=[],this.dropdowns=[],this.sliders=[],this.inputs=[]}var e=a("./../selected_menu"),f=a("./../menu_builder");d.prototype={deleteEvents:function(){this.lists.forEach(function(a){a.deleteEvents()})},createList:function(a){var b=this,c=f.label(a.header);if(a.images){var d=e.createAvatarButtons(this.loadedModel.CONFIG.url,"avatar",null,function(c,d){a.callback(b.loadedModel,{name:c,role:a.header},{avatar:d})},a.images);this.lists.push(d),this.container.appendChild(c),this.container.appendChild(d)}},createButton:function(a){var b=this,c=f.button(a.header,function(){a.callback(b.loadedModel)});this.container.appendChild(c)},createDropdown:function(a){var b=(f.label(a.header),this),c=f.select(a.header,function(c,d){a.callback(b.loadedModel,this.value)}),d=a.setDefault(this.loadedModel,a.values);a.values.forEach(function(a,b){var e=f.option(a,a);d===b&&(e.selected="selected"),c.appendChild(e)}),this.container.appendChild(c)},createSlider:function(a){var b=this,c=a.range(this.loadedModel),d=a.defaultValue(this.loadedModel),e=function(c){a.onSlide&&a.onSlide(b.loadedModel,c)},g=function(c){a.callback(b.loadedModel,c)},h=f.slider(d,c[0],c[1],g,e);this.container.appendChild(f.label(a.header)),this.container.appendChild(h)},createInput:function(a){var b=this,c=a.defaultValue(this.loadedModel),d=a.onChange,e=f.label(a.header),g=f.input("not-used",c,function(a,c){d(b.loadedModel,c)});this.container.appendChild(e),this.container.appendChild(g)},createMenu:function(a){for(;this.container.firstChild;)this.container.removeChild(this.container.firstChild);this.data.forEach(function(a){switch(a.type.toUpperCase()){case"LIST":this.lists.push(a),this.createList(a);break;case"BUTTON":this.buttons.push(a),this.createButton(a);break;case"DROPDOWN":this.dropdowns.push(a),this.createDropdown(a);break;case"SLIDER":this.sliders.push(a),this.createSlider(a);break;case"INPUT":this.inputs.push(a),this.createInput(a)}},this)}},b.exports=d},{"./../menu_builder":"menu_builder/menu_builder.js","./../selected_menu":"selected_menu/selected_menu.js"}],"ui/sidebar_manager.js":[function(a,b,c){"use strict";function d(a){this.sidebars=[],this.sidebarElements=[],this.container=a,this.sidebarContainer=e.div("menu"),this.selectedMenuContainer=e.div("menu"),this.container.appendChild(this.sidebarContainer),this.container.appendChild(this.selectedMenuContainer),this.currentSidebar,this.selectedMenu,this.selectedData=[],this.selected={}}var e=a("./../menu_builder"),f=a("./../selected_menu"),g=f.SelectedMenu,h=a("./sidebar");d.prototype={addSidebar:function(a,b){return this.gotSidebar(a)?this.currentSidebar===a?void this.currentSidebar.refresh(b):void this.setSidebar(a,b):(this.sidebars.push(a),this.sidebarElements.push(new h(a,b)),void this.setSidebar(a,b))},setSidebar:function(a,b){var c=this.gotSidebar(a);if(c){for(this.currentSidebar=c,this.currentSidebar.createMenu(b);this.sidebarContainer.firstChild;)this.sidebarContainer.removeChild(this.sidebarContainer.firstChild);this.sidebarContainer.appendChild(this.currentSidebar.container)}},gotSidebar:function(a){var b=this.sidebars.indexOf(a);return-1!==b?this.sidebarElements[b]:!1},setEnvironment:function(a){this.environment=a},setLoadedModel:function(a){this.loadedModel=a},linkModellingFilter:["type","threshold","coefficient","timelag"],linkSimulateFilter:["type","threshold","coefficient","timelag"],dataModellingFilter:["timeTable","name","description"],dataSimulateFilter:["timeTable"],modelModellingFilter:["name"],modelSimulateFilter:["maxIterations"],getLinkFilter:function(){switch(this.environment){case"modelling":return d.prototype.linkModellingFilter;case"simulate":return d.prototype.linkSimulateFilter}},getModelFilter:function(){switch(this.environment){case"modelling":return d.prototype.modelModellingFilter;case"simulate":return d.prototype.modelSimulateFilter}},getDataFilter:function(){switch(this.environment){case"modelling":return d.prototype.dataModellingFilter;case"simulate":return d.prototype.dataSimulateFilter}},getFilter:function(a){if("link"===a.objectId)return this.getLinkFilter();if("nodeData"===a.objectId||"nodeGui"===a.objectId)return this.getDataFilter();if("modelSettings"===a.objectId)return this.getModelFilter();throw console.error(a),new Error("Unrecognized objectId given to getFilter.")},setSelectedMenu:function(){for(var a=[],b=[],c=[],d=[],e=0;e<arguments.length;e++){var f=arguments[e];a.push(f)}b=this.selectedData.filter(function(b){return-1===a.indexOf(b)?!0:(d.push(b),!1)},this),c=a.filter(function(a){return-1===d.indexOf(a)}),b.forEach(function(a){var b=this.selected[a.id];b.removeData(a),0===b.data.length&&delete this.selected[a.id]},this),c.forEach(function(e){if(void 0===e)throw console.log("Current:",a),console.log("Prev:",b),console.log("Still selected:",d),console.log("New:",c),console.log("Menus:",this.selected),new Error("What the");var f=this.selected[e.id];f||(this.selected[e.id]=new g(this.loadedModel),f=this.selected[e.id],this.selectedMenuContainer.appendChild(f.container)),f.addData(this.getFilter(e),e)},this);var h=[];d.forEach(function(a){if(-1===h.indexOf(a.id)){var b=this.selected[a.id];b.loopData(function(a){a.updateFilter(this.getFilter(a.data))},this),h.push(a.id)}},this),this.selectedData=a}},b.exports=d},{"./../menu_builder":"menu_builder/menu_builder.js","./../selected_menu":"selected_menu/selected_menu.js","./sidebar":"ui/sidebar.js"}],"ui/ui.js":[function(a,b,c){"use strict";function d(a,b,c){this.data=a,this.header=a.header,this.type=a.type,this.callback=a.callback,a.update&&(this.update=a.update),this.container=f.div(),this.refresh(b,c)}function e(a,b){this.container=f.div("menu"),a.appendChild(this.container),this.data=b,this.menuItems=[]}var f=a("./../menu_builder");a("./../selected_menu/selected_menu");d.prototype={deleteEvents:function(){this.button&&this.button.deleteEvents()},refresh:function(a,b){for(this.deleteEvents();this.container.firstChild;)this.container.removeChild(this.container.firstChild);this.generateItem(a,b)},generateItem:function(a,b){this.deleteEvents();var c,d=this;if(void 0!==this.callback&&void 0!==this.update){var e=f.dropdown(this.header,function(){d.callback.call(this,a,b)},function(){d.update.call(this,a,b)});c=e.element,c.deleteEvents=e.deleteEvents}else void 0!==this.callback&&(c=f.button(this.header,function(a){d.callback()}));if(null===c)throw new Error("Invalid button type.");this.button=c,this.container.appendChild(c)}},e.prototype={deleteEvents:function(){this.menuItems.forEach(function(a){a.deleteEvents()})},resetMenu:function(a,b){for(this.deleteEvents();this.container.firstChild;)this.container.removeChild(this.container.firstChild);this.createMenu(a,b)},createMenu:function(a,b){this.data.forEach(function(c){var e=new d(c,a,b);this.menuItems.push(e),this.container.appendChild(e.container)},this)}},b.exports={Sidebar:a("./sidebar"),SidebarManager:a("./sidebar_manager"),Menu:e}},{"./../menu_builder":"menu_builder/menu_builder.js","./../selected_menu/selected_menu":"selected_menu/selected_menu.js","./sidebar":"ui/sidebar.js","./sidebar_manager":"ui/sidebar_manager.js"}],"util/generate_link.js":[function(a,b,c){"use strict";var d=a("./../collisions.js").hitTest,e=a("../structures/create_link"),f=a("./../linker.js"),g=a("./../object-helper.js");b.exports=function(a){var b=a.nodeData,c=a.nodeGui,h=a.links,i=g.filter.call(c,function(a){return a.linking===!0});g.forEach.call(i,function(i){var j=g.filter.call(c,function(a){return a.linking!==!0&&d(a,f(i))});g.forEach.call(j,function(d){void 0===i.links&&(i.links=[]);var f=d.links;void 0===f&&(d.links=[]);var g=i.id,j=d.id,k=b[i.id],l=b[j];if("ACTOR"===k.type.toUpperCase()){if("ORIGIN"!==l.type.toUpperCase())return;a.resetUI=!0}try{for(var m=c[g],n=0;n<m.links.length;n++){var o=h[m.links[n]];if(o.node1===g&&o.node2===j||o.node1===j&&o.node2===g)return o.bidirectional=!0,o.bidirectionalTimelag=1,void a.emit("selectableObjectUpdated")}var p=e(a,g,j);a.history.push({action:"newLink",data:{link:p}}),a.revertedHistory=[],h[p.id]=p,c[g].links.push(p.id),c[j].links.push(p.id),a.emit(p,"newLink")}catch(q){throw console.error(b),console.error(c),console.error(h),q}})})}},{"../structures/create_link":"structures/create_link.js","./../collisions.js":"collisions.js","./../linker.js":"linker.js","./../object-helper.js":"object-helper.js"}]},{},["main.js"]);