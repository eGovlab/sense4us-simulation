<% layout("layout") %>

<div
    id            = "model-builder"
    data-protocol = "<%= locals.protocol || 'http' %>"
    data-hostname = "<%= locals.hostname || 'localhost' %>"
    data-port     = "<%= locals.port || 3000 %>"
    style         = "height: 100%; width: 100%;"
></div>

<script src="/static/js/model-builder.debug.js"></script>
<script>
    docReady(function() {
        var modelBuilder = document.getElementById("model-builder");
        window.sense4us.inflateModel(modelBuilder);

        var loadedModel = window.sense4us.loadedModel;
        loadedModel.addListener("selected", function() {
            var nodeData = this.nodeData[this.selected.id];
            if(nodeData) {
                console.log("Name:", nodeData.name);
            }
        });

        console.log(window.sense4us.loadedModel);
    });
</script>
