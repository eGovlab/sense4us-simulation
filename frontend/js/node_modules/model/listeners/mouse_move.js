'use strict';

var mleftDrag     = require('input').mleftDrag,
    mrightDrag    = require('input').mrightDrag;

var mouseMiddlewares = [
    mleftDrag,
    mrightDrag
];

function addMouseMoveListener(loadedModel) {
    loadedModel.addListener('mouseMove', function(canvas, button, startPos, lastPos, endPos, deltaPos) {
        var middlewares = mouseMiddlewares.filter(function(input) {
            return input.button === button;
        });

        middlewares.forEach(function(middleware) {
            middleware.mouseMove(canvas, loadedModel, endPos, deltaPos);
        });

        this.emit('refresh');
    });
}

module.exports = addMouseMoveListener;
