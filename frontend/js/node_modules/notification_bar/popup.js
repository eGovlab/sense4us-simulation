'use strict';

function Popup(text) {
    if (!(this instanceof Popup)) {
        throw new Error('Accessing Popup as a generic method.');
    }

    if (!text || typeof text !== 'string') {
        throw new Error('Popup constructor parameters given are invalid.');
    }

    this.element           = document.createElement('div');
    this.element.innerHTML = text;
    this.text              = text;

    this.element.style['background-color']  = 'rgba(160, 160, 160, 1)';
    this.element.style['border-radius']     = '4px';
    this.element.style['margin-bottom']     = '2px';
    this.element.style.padding              = '7px';
    this.element.style['text-shadow']       = '0 0px 4px rgba(0,0,0,0.55)' 
    this.element.style.color                = '#fafafa';
    this.element.style['text-align']        = 'center';
    this.element.style['box-shadow']        = '0px 10px 15px 0px rgba(20, 20, 20, 0.4)';

    this.element.style['-webkit-animation'] = 'NOTIFY_FADEIN 1s 1';
    this.element.style['-moz-animation']    = 'NOTIFY_FADEIN 1s 1';
    this.element.style.animation            = 'NOTIFY_FADEIN 1s 1';
}

Popup.prototype = {
    fadeOut: function(onEnd) {
        this.element.style['-webkit-animation'] = 'NOTIFY_FADEOUT 1s 1';
        this.element.style['-moz-animation']    = 'NOTIFY_FADEOUT 1s 1';
        this.element.style.animation            = 'NOTIFY_FADEOUT 1s 1';
        setTimeout(function() {
            onEnd();
        }, 1000);
    }
};

module.exports = Popup;