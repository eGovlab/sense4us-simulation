'use strict';

function realNumbersToChange(t, baseline) {
    var data = {};

    var tKeys = Object.keys(t);
    if(tKeys.length > 0) {
        var timestep = tKeys[0];
        var value    = t[timestep];

        if(baseline === 0) {
            data[timestep] = 0;
        } else {
            data[timestep] = Math.round((value / baseline - 1) * 100);
        }

        for(var i = 1; i < tKeys.length; i++) {
            var timestep = tKeys[i];
            var value    = t[timestep];

            var previous = t[tKeys[i - 1]];

            if(previous === 0) {
                data[timestep] = 0;
                continue;
            }

            data[timestep] = Math.round((value / previous - 1) * 100);
        }
    }

    return data;
}

module.exports = {
    realNumbersToChange: realNumbersToChange
}