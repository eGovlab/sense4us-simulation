'use strict';

var objectHelper = require('object-helper');

function moveLinker(data, error, done) {
    var movingLinker = objectHelper.filter.call(
        data.nodeGui,
        function(node) {
            return node.linking === true;
        }
    );

    movingLinker = objectHelper.map.call(
        movingLinker,
        function(node) {
            return objectHelper.merge.call(node, {
                linkerX: data.pos.x,
                linkerY: data.pos.y
            });
        }
    );

    data.nodeGui = objectHelper.merge.call(data.nodeGui, movingLinker);
    
    if (Object.keys(movingLinker).length > 0) {
        return done(data);
    }

    return data;
}

module.exports = moveLinker;